/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["versa.widget.share.CopyLink"]){dojo._hasResource["versa.widget.share.CopyLink"]=true;dojo.provide("versa.widget.share.CopyLink");dojo.require("bfree.widget.Bfree");dojo.require("bfree.widget._DialogWidget");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dijit.layout.BorderContainer");dojo.require("dijit.layout.ContentPane");dojo.require("dojox.layout.TableContainer");dojo.declare("versa.widget.share.CopyLink",[dijit._Widget,dijit._Templated,bfree.widget._DialogWidget],{templateString:dojo.cache("versa/widget/share","template/CopyLink.html","<div style=\"height:100%;width:100%\">\n\n<div    dojoType=\"dijit.layout.BorderContainer\"\n        design=\"headline\"\n        gutters=\"false\"\n        style=\"padding:8px 8px 4px 8px;height:100%;width:100%;\">\n\n    <div    dojoType=\"dijit.layout.BorderContainer\"\n            design=\"headline\"\n            gutters=\"false\"\n            splitter=\"false\"\n            region=\"center\">\n\n        <div    dojoType=\"dijit.layout.ContentPane\"\n                splitter=\"false\"\n                region=\"top\"\n                splitter=\"false\"\n                style=\"padding:0 0 4px 0;overflow:hidden;height:16px;\">\n            <span class=\"dijitDarkLabel dijitMediumLabel\">Copy the following link to access the shared documents:</span>\n        </div>\n\n        <div    dojoType=\"dijit.layout.ContentPane\"\n                splitter=\"false\"\n                region=\"center\"\n                splitter=\"false\"\n                class=\"highlightPane\"\n                style=\"padding:8px;overflow:hidden;text-align:center\">\n\n            <a dojoAttachPoint=\"anchorNode\" href=\"\" target=\"_blank\" class=\"dijitBoldLabel dijitLargeLabel versashare\"></a>\n\n        </div>\n\n    </div>\n\n</div>\n\n</div>\n"),widgetsInTemplate:true,share:null,library:null,zone:null,_itemLoaded:function(){dojo.attr(this.anchorNode,{href:this.share.share_url,innerHTML:this.share.share_url});this._loadComplete();},_loadItem:function(){try{this.library.getFolders().loadItem({item:this.share,callback:this._itemLoaded,scope:this});}finally{}},constructor:function(_1){},destroy:function(){this.inherited("destroy",arguments);},isValid:function(){return true;},onDialogClosing:function(_2){var _3=false;try{_3=true;}catch(e){var _4=new bfree.api.Error("Failed to close Share Copy Link dialog",e);bfree.widget.ErrorManager.handleError({error:_4});}finally{}return _3;},postCreate:function(){this.inherited("postCreate",arguments);},startup:function(){this.inherited("startup",arguments);setTimeout(versa.widget.share.CopyLink._loadFnRef(this),0);}});versa.widget.share.CopyLink._loadFnRef=function(_5){return (function(){_5._loadItem();});};versa.widget.share.CopyLink.show=function(_6){var _7=new bfree.widget.Dialog({id:"dlgShareCopyLink",title:"Shared Folder Link: "+_6.share.name.display_limit(32),widgetConstructor:versa.widget.share.CopyLink,widgetParams:{share:_6.share,library:_6.library,zone:_6.zone},noResize:true,height:144,width:640,buttons:bfree.widget.Dialog.buttons.close,onClose:_6.onClose});_7.startup();_7.show();};}