/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["versa.widget.share.SharedItem"]){dojo._hasResource["versa.widget.share.SharedItem"]=true;dojo.provide("versa.widget.share.SharedItem");dojo.require("bfree.api.Document");dojo.require("bfree.api.Utilities");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("versa.widget.share.ContextMenu");dojo.declare("versa.widget.share.SharedItem",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("versa/widget/share","template/SharedItem.html","<div style=\"height:52px;width:100%;position:relative;border:none\">\n\n    <img src=\"\" dojoAttachPoint=\"typeIconNode\" style=\"position:absolute;left:2px;top:2px;\"/>\n\n    <div style=\"position:absolute;top:50%;left:58px;height:48px;margin-top:-24px\">\n        <div class=\"dijitDarkLabel dijitHeadingLabel\">\n            <a id=\"sharelink\" href=\"\" dojoAttachPoint=\"nameNode\" class=\"versashare\"></a>\n        </div>\n        <div style=\"padding:0;border:none\">\n            <div style=\"padding:0;display:inline-block;width:68px\" class=\"dijitSmallLabel\">File Name</div>\n            <span dojoAttachPoint=\"fileNameNode\" class=\"dijitSmallLabel\" style=\"padding:0;\"></span>\n        </div>\n        <div style=\"padding:0;border:none\">\n            <div style=\"padding:0;display:inline-block;width:68px\" class=\"dijitSmallLabel\">File Size</div>\n            <span dojoAttachPoint=\"fileSizeNode\" class=\"dijitSmallLabel\"tyle=\"padding:0;\"></span>\n        </div>\n    </div>\n\n</div>\n"),widgetsInTemplate:true,grid:null,item:null,_onCommand:function(_1,_2){this.grid._onCommand(_1,_2,{items:[this.item]});},_onItemClick:function(e){this.grid._onCommand(bfree.widget.Bfree.Commands.VIEW,bfree.widget.Bfree.ObjectTypes.DOCUMENT,{items:[this.item]});dojo.stopEvent(e);},constructor:function(_3){},destroy:function(){this.inherited("destroy",arguments);},postCreate:function(){this.inherited("postCreate",arguments);var _4=bfree.api.Document.getIconUrl(this.item.binary_content_type,48);var _5=this.item.name;dojo.attr(this.typeIconNode,"src",_4);dojo.attr(this.typeIconNode,"alt",_5);dojo.attr(this.nameNode,"innerHTML",this.item.name);dojo.attr(this.nameNode,"href",this.item.name);dojo.attr(this.fileNameNode,"innerHTML",this.item.binary_file_name);dojo.attr(this.fileSizeNode,"innerHTML",bfree.api.Utilities.readablizeBytes({bytes:this.item.binary_file_size}));this._mnuReference=new versa.widget.share.ContextMenu({targetNodeIds:[this.typeIconNode,this.nameNode],onCommand:dojo.hitch(this,this._onCommand)});dojo.connect(this.nameNode,"onclick",this,this._onItemClick);},startup:function(){this.inherited("startup",arguments);}});}