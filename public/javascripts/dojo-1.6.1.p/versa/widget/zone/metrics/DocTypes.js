/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["versa.widget.zone.metrics.DocTypes"]){dojo._hasResource["versa.widget.zone.metrics.DocTypes"]=true;dojo.provide("versa.widget.zone.metrics.DocTypes");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dijit.layout.BorderContainer");dojo.require("dijit.layout.ContentPane");dojo.require("dojox.charting.Chart");dojo.require("dojox.charting.axis2d.Default");dojo.require("dojox.charting.plot2d.Pie");dojo.require("dojox.charting.action2d.Highlight");dojo.require("dojox.charting.action2d.MoveSlice");dojo.require("dojox.charting.themes.PlotKit.cyan");dojo.require("dojox.charting.widget.Legend");dojo.require("dojox.fx.easing");dojo.require("versa.widget.zone.metrics.themes.VersaColors");dojo.require("versa.widget.zone.metrics.themes.VersaBlank");dojo.declare("versa.widget.zone.metrics.DocTypes",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("versa/widget/zone/metrics","template/DocTypes.html","<div style=\"height:100%;width:100%;position:relative;\">\n\n    <div dojoAttachPoint=\"chartNode\" style=\"height:160px;width:160px;margin: 0px auto\"></div>\n    <div class=\"dijitMediumLabel dijitDarkLabel\" style=\"position:absolute;bottom:16px;left:0;text-align:center;width:100%\">Document Type Distribution</div>\n\n</div>\n"),widgetsInTemplate:true,_wdgChart:null,metrics:null,constructor:function(_1){},destroy:function(){this.inherited("destroy",arguments);},postCreate:function(){this.inherited("postCreate",arguments);var _2=[];var _3=0;dojo.forEach(this.metrics,function(_4,_5){if(_4.document_count>0){_2.push({y:_4.document_count,text:dojo.replace("{0}: {1}",[_4.name,_4.document_count])});}_3+=_4.document_count;},this);if(_3<1){_2.push({y:1,text:"No documents have been added"});}this._wdgChart=new dojox.charting.Chart(this.chartNode);this._wdgChart.addPlot("default",{type:"Pie",radius:56,startAngle:-90,ticks:true,labelStyle:"default",labels:false});this._wdgChart.addSeries("Series1",_2);if(_3<1){this._wdgChart.setTheme(dojox.charting.themes.VersaBlank);}else{this._wdgChart.setTheme(dojox.charting.themes.VersaColors);}new dojox.charting.action2d.Tooltip(this._wdgChart,"default");new dojox.charting.action2d.MoveSlice(this._wdgChart,"default",{series:"Series1",scale:1.25,shift:0});this._wdgChart.render();},startup:function(){this.inherited("startup",arguments);}});}