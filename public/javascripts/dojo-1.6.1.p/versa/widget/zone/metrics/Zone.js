/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["versa.widget.zone.metrics.Zone"]){dojo._hasResource["versa.widget.zone.metrics.Zone"]=true;dojo.provide("versa.widget.zone.metrics.Zone");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dijit.layout.BorderContainer");dojo.require("dijit.layout.ContentPane");dojo.require("versa.widget.zone.metrics.Quotas");dojo.require("versa.widget.zone.metrics.Statistics");dojo.declare("versa.widget.zone.metrics.Zone",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("versa/widget/zone/metrics","template/Zone.html","<div style=\"height:100%;width:100%;\">\n\n<div    dojoType=\"dijit.layout.BorderContainer\"\n        dojoAttachPoint=\"mainContainer\"\n        design=\"headline\"\n        gutters=\"false\"\n        style=\"height:100%;width:100%;\">\n\n    <div    dojoType=\"dijit.layout.ContentPane\"\n            splitter=\"false\"\n            region=\"top\"\n            style=\"overflow:hidden;padding:8px 8px 0 8px;position:relative;height:172px\">\n\n         <div dojoAttachPoint=\"quotasNode\"></div>\n\n    </div>\n\n\n    <div    dojoType=\"dijit.layout.ContentPane\"\n            splitter=\"false\"\n            region=\"center\"\n            style=\"overflow:hidden;padding:0 8px 0 8px;position:relative\">\n\n        <div dojoAttachPoint=\"statsNode\"></div>\n\n    </div>\n\n\n</div>\n\n</div>\n"),widgetsInTemplate:true,_metrics:null,_wdgQuotas:null,_wdgStatistics:null,library:null,zone:null,constructor:function(_1){},destroy:function(){this.inherited("destroy",arguments);},postCreate:function(){this.inherited("postCreate",arguments);this._metrics=this.zone.getMetrics();var _2=parseInt(this.zone.getValue("user_quota"));var _3=parseInt(this.zone.getValue("disk_quota"));var _4=0;var _5=0;var _6=0;var _7=0;var _8=0;var _9=0;var _a=0;var _b=0;dojo.forEach(this._metrics.libraries,function(_c,_d){_4+=_c.choicelist_count;_5+=_c.propertydefinition_count,_6+=_c.documenttype_count,_7+=_c.viewdefinition_count,_8+=_c.folder_count;_9+=_c.document_count;_a+=_c.version_count;_b+=_c.content_size;},this);this._wdgQuotas=new versa.widget.zone.metrics.Quotas({diskQuota:_3,diskUsed:_b,userCount:this._metrics.user_count,userQuota:_2},this.quotasNode);this._wdgStatistics=new versa.widget.zone.metrics.Statistics({groupCount:this._metrics.group_count,userCount:this._metrics.user_count,choiceListCount:_4,propertyDefinitionCount:_5,documentTypeCount:_6,viewDefinitionCount:_7,folderCount:_8,documentCount:_9,versionCount:_a,documentTypeMetrics:this._metrics.libraries[0].document_types},this.statsNode);},resize:function(){this.inherited("resize",arguments);this.mainContainer.resize();},startup:function(){this.inherited("startup",arguments);this._wdgQuotas.startup();this._wdgStatistics.startup();}});}