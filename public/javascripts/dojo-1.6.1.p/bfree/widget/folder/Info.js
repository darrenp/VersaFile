/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget.folder.Info"]){dojo._hasResource["bfree.widget.folder.Info"]=true;dojo.provide("bfree.widget.folder.Info");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("versa.api.Formatter");dojo.declare("bfree.widget.folder.Info",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("bfree/widget/folder","template/Info.html","<div style=\"padding:4px 0 0 72px;position:relative;height:100%;width:100%\">\n\n    <div style=\"position:absolute;top:8px;left:8px;height:48px;width:48px;\">\n        <img dojoAttachPoint=\"typeIconNode\" src=\"\" height=\"48\" width=\"48\"/>\n        <img dojoAttachPoint=\"stateIconNode\" src=\"/images/loading/loading24.gif\" height=\"24\"width=\"24\" style=\"position:absolute;bottom:0;right:0\">\n    </div>\n\n    <div class=\"dijitBoldLabel dijitLargeLabel dijitDarkLabel\" dojoAttachPoint=\"nameNode\" style=\"margin-right:80px\"></div>\n    <div dojoAttachPoint=\"tableNode\"></div>\n\n</div>\n"),widgetsInTemplate:false,_itemMap:null,_labels:null,_propertyCount:12,_tblProperties:null,items:null,library:null,_generateSingleItem:function(_1){var _2=this._initData();_2[0].label="Type";_2[0].value=bfree.api.Folder.getTypeLabel(_1);_2[1].label="Document Count";_2[1].value=_1.document_count;_2[2].label="Path";_2[2].value=_1.text_path;_2[3].label="Last Modified Date";_2[3].value=versa.api.Formatter.formatDateTime(_1.updated_at);return _2;},_initData:function(){var _3=new Array();for(var i=0;i<this._propertyCount;i++){_3.push({label:"",value:""});}return _3;},_initialize:function(){var _4="";var _5="";var _6="";if(this.items.length==1){var _7=this.items[0];_4=bfree.api.Folder.getIconUrl(_7,48);_5=_7.text_path;_6=_7.name;}dojo.attr(this.typeIconNode,"src",_4);dojo.attr(this.typeIconNode,"alt",_5);this.nameNode.innerHTML=_6;this._labels[0].reset("Loading...","");this._tblProperties.refresh();},constructor:function(_8){this._itemMap=new Object();this._labels=new Array();},destroy:function(){this.destroyDescendants();if(this._tblProperties){this._tblProperties.destroyRecursive();this._tblProperties=null;}this.inherited("destroy",arguments);},loadItem:function(_9){var _a="";var _b="";var _c="";var _d=null;if(!_9.isInstanceOf(bfree.api.Folder)){return;}if(this._itemMap.hasOwnProperty(_9.getId())){this.nameNode.innerHTML=_9.name;_d=this._generateSingleItem(_9);dojo.forEach(this._labels,function(_e,_f){_e.reset(_d[_f].label,_d[_f].value);},this);this._tblProperties.refresh();delete this._itemMap[_9.getId()];}if(Object.keys(this._itemMap).length<1){dojo.style(this.stateIconNode,{display:"none"});}},postCreate:function(){this.inherited("postCreate",arguments);dojo.forEach(this.items,function(_10,idx){var id=_10.getId();this._itemMap[id]=_10;},this);this._tblProperties=new bfree.widget.PropertyTable({customClass:"versafootfull",showLabels:true,cols:1,labelWidth:112,style:""},this.tableNode);for(var i=0;i<this._propertyCount;i++){this._labels.push(new bfree.widget.Label({label:"",value:""}));this._tblProperties.addChild(this._labels[i]);}},startup:function(){this.inherited("startup",arguments);this._tblProperties.startup();this._initialize();}});}