/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget.acl.grantee.Grid"]){dojo._hasResource["bfree.widget.acl.grantee.Grid"]=true;dojo.provide("bfree.widget.acl.grantee.Grid");dojo.require("bfree.widget._Grid");dojo.require("dojo.data.ItemFileWriteStore");dojo.declare("bfree.widget.acl.grantee.Grid",[bfree.widget._Grid],{zone:null,_canSort:function(_1){return (_1>1);},_generateStore:function(){var _2=[];this.zone.getUsers().forEach(function(_3){if(_3.is_admin){return;}_2.push({grantee_id:_3.id,grantee_name:_3.getFullName(),grantee_type:"user"});});this.zone.getGroups().forEach(function(_4){if((_4.is_admin)||(_4.is_everyone)){return;}_2.push({grantee_id:_4.id,grantee_name:_4.name,grantee_type:"group"});},this);var _5={label:"grantee_name",items:_2};return new dojo.data.ItemFileWriteStore({data:_5});},constructor:function(_6){this.updateDelay=0;this.rowsPerPage=25;this.formatterScope=this;this.query={};this.queryOptions={cache:false};this.clientSort=true;this.canSort=this._canSort;this.noDataMessage="No User/Groups entries found";},getSelected:function(){var _7=[];dojo.forEach(this.selection.getSelected(),function(_8){_7.push({id:this.store.getValue(_8,"grantee_id"),type:this.store.getValue(_8,"grantee_type"),name:this.store.getValue(_8,"grantee_name")});},this);return _7;},postCreate:function(){this.inherited("postCreate",arguments);this.set("structure",bfree.widget.acl.grantee.Grid.view);this.set("sortInfo",2);this.startup();this.setStore(this._generateStore());}});bfree.widget.acl.grantee._generateIcon=function(_9,_a){return dojo.replace("<img src=\"/images/icons/16/{0}.png\" height=\"16\" width=\"16\" />",[_9]);};bfree.widget.acl.grantee.Grid.view=[{cells:[{field:"grantee_type",name:"&nbsp;",width:"16px",formatter:bfree.widget.acl.grantee._generateIcon},{field:"grantee_name",name:"User/Group",width:"auto"}],width:"auto"}];}