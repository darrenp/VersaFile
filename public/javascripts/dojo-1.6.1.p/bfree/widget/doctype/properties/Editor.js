/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget.doctype.properties.Editor"]){dojo._hasResource["bfree.widget.doctype.properties.Editor"]=true;dojo.provide("bfree.widget.doctype.properties.Editor");dojo.require("bfree.widget.propdef.Widget");dojo.require("bfree.widget.PropertyTable");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dijit.layout.ContentPane");dojo.declare("bfree.widget.doctype.properties.Editor",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("bfree/widget/doctype/properties","template/Editor.html","<div style=\"padding:0 8px 0 0;height:100%;width:100%\">\n\n    <div dojoAttachPoint=\"tableNode\"></div>\n\n</div>\n"),widgetsInTemplate:true,_tblProperties:null,activeItem:null,choiceLists:null,propertyDefinitions:null,_onChange:function(id,_1){this.onValueChange(bfree.widget.propdef.Widget.resolveWdgName(id),_1);},_setActiveItemAttr:function(_2){this.activeItem=_2;dojo.forEach(this.activeItem.property_mappings,function(_3,_4){var _5=this.propertyDefinitions.fetchById({id:_3.property_definition_id});var _6=null;var _7=null;if(_3.choice_list_id){_7=this.choiceLists.fetchById({id:_3.choice_list_id});}_6=bfree.widget.propdef.Widget.generate(_3,_5,_7);if(_6){this._tblProperties.addChild(_6);_6.onChange=dojo.hitch(this,this._onChange,_6.id);}},this);this._tblProperties.refresh();this.onLoaded();},_setDisabledAttr:function(_8){this._tblProperties.set("disabled",_8);var _9=this._tblProperties.getChildren();dojo.forEach(_9,function(_a,_b){_a.set("disabled",_8);},this);},constructor:function(_c){dojo.safeMixin(this,_c);},destroy:function(){if(this._tblProperties){this._tblProperties.destroyDescendants();this._tblProperties.destroy();this._tblProperties=null;}this.inherited("destroy",arguments);},focus:function(){},onLoaded:function(){},onValueChange:function(id,_d){},postCreate:function(){this.inherited("postCreate",arguments);this._tblProperties=new bfree.widget.PropertyTable({id:"tblProps1",customClass:"versa",showLabels:true,cols:1,labelWidth:88,style:"width:100%"},this.tableNode);},setValue:function(_e,_f){var _10=bfree.widget.propdef.Widget.generateWdgName(_e);var wdg=dijit.byId(_10);if(wdg){wdg.set("value",_f);}},startup:function(){this.inherited("startup",arguments);this._tblProperties.startup();}});}