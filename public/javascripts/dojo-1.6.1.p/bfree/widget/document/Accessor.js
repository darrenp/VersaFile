/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget.document.Accessor"]){dojo._hasResource["bfree.widget.document.Accessor"]=true;dojo.provide("bfree.widget.document.Accessor");dojo.declare("bfree.widget.document.Accessor",null,{library:null,zone:null,constructor:function(_1){this.library=_1.library;this.zone=_1.zone;},doCancelCheckout:function(_2){try{_2.cancelCheckout({zone:this.zone,library:this.library});}finally{this.library.getDocuments().refreshItem(_2.getId());}},doCheckout:function(_3){try{_3.checkout({zone:this.zone,library:this.library});}finally{this.library.getDocuments().refreshItem(_3.getId());}},doCopyLocal:function(_4){_4.copyLocal({zone:this.zone,library:this.library});},doRestore:function(_5,_6){var _7=this.library.getDocuments().getValue(_5,"folder_id");var _8;if(_7!=0){try{_8=this.library.getFolders().fetchById({id:_7});}catch(e){}}this.library.getDocuments().setValue(_5,"state",_5.setState(bfree.api.Document.states.DELETED,false));if(!_8||this.library.getFolders().isDirty({item:_8})){this.library.getDocuments().setValue(_5,"folder_id",0);}else{this.library.getDocuments().setValue(_5,"folder_id",_8.getId());}if(_6){this.library.getDocuments().save();}},doView:function(_9){var _a=bfree.api.Utilities.getBox({scale:0.75});_9.view({zone:this.zone,library:this.library,windowBox:_a});}});}