/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget.document.DraggableGridItem"]){dojo._hasResource["bfree.widget.document.DraggableGridItem"]=true;dojo.provide("bfree.widget.document.DraggableGridItem");dojo.require("dojo.dnd.Source");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.declare("bfree.widget.document.DraggableGridItem",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("bfree/widget/document","template/DraggableGridItem.html","<div style=\"height:100%;width:100%\">\n    <div dojoAttachPoint=\"source\" style=\"width:100%;height:100%\">\n    </div>\n</div>\n"),widgetsInTemplate:true,dnd:null,document:null,data:null,grid:null,selectedItems:null,constructor:function(_1){this.data=_1.data;this.document=_1.document;this.grid=_1.grid;},postCreate:function(){this.inherited("postCreate",arguments);this.dnd=new dojo.dnd.Source(this.source,{accept:[],creator:dojo.hitch(this,this.creator)});this.dnd.insertNodes(true,[this.document]);},creator:function(_2,_3){var _4=null;if(_3=="avatar"){this.selectedItems=this.grid.selection.getSelected();_4=dojo.create("tr");var _5=dojo.create("table",{style:{borderCollapse:"collapse"}},_4);dojo.forEach(this.selectedItems,function(_6,_7){var _8=dojo.create("tr",null,_5);var _9=dojo.create("td",null,_8);var _a=bfree.api.Document.getIconUrl(_6.binary_content_type,16);dojo.create("img",{src:_a,width:16,height:16},_9);dojo.create("td",{innerHTML:_6.name},_8);},this);this.dnd.itemCount=this.selectedItems.length;}else{_4=dojo.create("div",{innerHTML:this.data});this.selectedItems=[_2];}return {node:_4,data:this.selectedItems};}});}