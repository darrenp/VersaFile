/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget.search.TextBox"]){dojo._hasResource["bfree.widget.search.TextBox"]=true;dojo.provide("bfree.widget.search.TextBox");dojo.require("bfree.api.Search");dojo.require("bfree.widget.ValidationTextBox");dojo.require("bfree.widget.search.DropDown");dojo.require("dijit._Templated");dojo.require("dijit._Widget");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.declare("bfree.widget.search.TextBox",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("bfree.widget.search","template/TextBox.html","<div class=\"versaSearchBox dijitTextBox\">\n\n<div dojoAttachPoint=\"formNode\">\n\n\t<table cellpadding=\"0\" cellspacing=\"0\" style=\"height:100%;width:100%;\">\n\t\t<tr>\n            <td style=\"width:1px;\"><button dojoAttachPoint=\"advancedButtonNode\"></button></td>\n            <td style=\"\"><input dojoAttachPoint=\"textboxNode,focusNode\"></input></td>\n\t\t\t<td style=\"width:1px\"><button dojoAttachPoint=\"submitButtonNode\"></button></td>\n\t\t</tr>\t\t\n\t</table>\n\n</div>\n\n</div>\n"),operators:null,library:null,_form:null,activeQuery:null,txtSearch:null,_form_onReset:function(){},_form_onSubmit:function(){var _1=this.txtSearch.get("value");this.activeQuery=new bfree.api.Search({type:bfree.api.Search.types.SIMPLE,queryData:_1});this.onSearch(this.activeQuery);return false;},_onSearch:function(_2){this.activeQuery=_2;this.onSearch(this.activeQuery);},_textbox_onChange:function(_3){},_textbox_onFocus:function(){},constructor:function(_4){},onSearch:function(_5){},_form_onKeyPress:function(_6){if(_6.keyCode==13){_6.preventDefault();this._form_onSubmit();return false;}},postCreate:function(){this.inherited("postCreate",arguments);this._form=new dijit.form.Form({onSubmit:dojo.hitch(this,this._form_onSubmit),onReset:dojo.hitch(this,this._form_onReset),onKeyPress:dojo.hitch(this,this._form_onKeyPress)},this.formNode);new dijit.form.Button({baseClass:"imageButton",iconClass:"imageIcon bfreeIconSearch",label:"Search",showLabel:false,type:"submit"},this.submitButtonNode);this.txtSearch=new bfree.widget.ValidationTextBox({intermediateChanges:true,placeHolder:"Search documents...",style:"border:0;font-size:13px;width:100%;background:transparent;"},this.textboxNode);new bfree.widget.search.DropDown({library:this.library,iconClass:"searchIcon bfreeIcon",showLabel:false,onSearch:dojo.hitch(this,this._onSearch)},this.advancedButtonNode);},startup:function(){this.inherited("startup",arguments);}});}