/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget.propdef.FilterGrid"]){dojo._hasResource["bfree.widget.propdef.FilterGrid"]=true;dojo.provide("bfree.widget.propdef.FilterGrid");dojo.require("bfree.api.Application");dojo.require("bfree.widget._Grid");dojo.require("bfree.api.ItemFileWriteStore");dojo.declare("bfree.widget.propdef.FilterGrid",[bfree.widget._Grid],{_store:null,_view:[{cells:[{field:"name",name:"Name",width:"auto"},{field:"data_type",name:"Data Type",width:"80px"},{field:"max_length",name:"Length",width:"80px"},{field:"filter",name:"Filter",width:"64px",hidden:true}],width:"auto"}],_dataTypes:null,selectionMode:"single",propertyDefinitions:null,idFilter:[],_buildStore:function(){var _1=[];this.propertyDefinitions.forEach(function(_2,_3){if(!(_2.is_system&&_2.is_readonly)){var _4=this._dataTypes.fetchById({id:_2.data_type_id});_1.push({id:_2.id,name:_2.name,data_type:_4.name,max_length:_2.max_length,filter:dojo.has(this.idFilter,_2.id)});}},this);this._store=new bfree.api.ItemFileWriteStore({data:{identifier:"id",label:"name",items:_1}});this._store.comparatorMap={};this._store.comparatorMap["name"]=function(_5,_6){return _5-_6;};this._store.save();},_canEdit:function(_7,_8){return false;},_canSort:function(_9){return true;},constructor:function(_a){this.updateDelay=0;this.rowsPerPage=25;this.formatterScope=this;this.query={};this.queryOptions={cache:true};this.clientSort=false;this.canEdit=this._canEdit;this.canSort=this._canSort;this.noDataMessage="No Property Definitions found";this.sortInfo=1;},postCreate:function(){this.inherited("postCreate",arguments);this._dataTypes=bfree.api.Application.getDataTypes();this._buildStore();this.set("structure",this._view);},startup:function(){this.inherited("startup",arguments);this.setStore(this._store);this.filter({filter:false});}});}