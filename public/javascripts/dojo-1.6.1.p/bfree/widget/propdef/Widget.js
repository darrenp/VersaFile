/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget.propdef.Widget"]){dojo._hasResource["bfree.widget.propdef.Widget"]=true;dojo.provide("bfree.widget.propdef.Widget");dojo.require("bfree.api.Application");dojo.require("bfree.api.ItemFileWriteStore");dojo.require("bfree.widget.ValidationTextBox");dojo.require("bfree.widget.BooleanSelect");dojo.require("bfree.widget.DateTextBox");dojo.require("bfree.widget.NumberSpinner");dojo.require("dijit.form.CheckBox");dojo.require("dijit.form.SimpleTextarea");dojo.declare("bfree.widget.propdef.Widget",null,{});bfree.widget.propdef.Widget.generateWdgName=function(_1){return dojo.replace("wdg_{0}",[_1]);};bfree.widget.propdef.Widget.resolveWdgName=function(_2){return _2.replace("wdg_","");};bfree.widget.propdef.Widget.formats={"SHORT":0,"LONG":1};bfree.widget.propdef.Widget.getWidget=function(_3,_4,_5,_6,_7){var _8=null;if(_3.isString()||((_3.isText())&&(_6==bfree.widget.propdef.Widget.formats.SHORT))){_8=new bfree.widget.ValidationTextBox({id:_4,intermediateChanges:true,label:_5,scrollOnFocus:false,selectOnClick:true,style:"width:100%",value:_7});}else{if(_3.isDateTime()){_8=new bfree.widget.DateTextBox({id:_4,label:_5,scrollOnFocus:false,selectOnClick:true,style:"width:100%",value:_7});}else{if(_3.isText()){_8=new dijit.form.SimpleTextarea({id:_4,intermediateChanges:true,label:_5,"class":"bfree",scrollOnFocus:false,selectOnClick:true,style:"resize:none;width:100%",value:_7});}else{if((_3.isBoolean())&&((!_6)||(_6==bfree.widget.propdef.Widget.formats.SHORT))){_8=new dijit.form.CheckBox({id:_4,label:_5,scrollOnFocus:false,checked:_7});}else{if((_3.isBoolean())&&(_6==bfree.widget.propdef.Widget.formats.LONG)){_8=new bfree.widget.BooleanSelect({id:_4,label:_5,scrollOnFocus:false,style:"width:100%",value:_7});}else{if(_3.isInteger()){_8=new bfree.widget.NumberSpinner({id:_4,label:_5,smallDelta:1,largeDelta:10,constraints:{fractional:false,min:-2147483648,max:2147483647},scrollOnFocus:false,selectOnClick:true,style:"width:100%",value:_7});}else{if(_3.isFloat()){_8=new bfree.widget.NumberSpinner({id:_4,label:_5,smallDelta:1,largeDelta:10,constraints:{places:"0,4"},scrollOnFocus:false,selectOnClick:true,style:"width:100%",value:_7});}}}}}}}return _8;};bfree.widget.propdef.Widget.getChoiceListWidget=function(_9,_a,_b,_c){var _d=null;var _e=bfree.widget.propdef.Widget.generateStore(_b,_c);_d=new bfree.widget.FilteringSelect({id:_9,label:_a,query:{},store:_e,searchAttr:"display"});return _d;};bfree.widget.propdef.Widget.generate=function(_f,_10,_11){var wdg=null;var _12=bfree.api.Application.getDataTypes();var _13=_12.fetchById({id:_10.data_type_id});var id=bfree.widget.propdef.Widget.generateWdgName(_10.getDbName());if(_11){wdg=bfree.widget.propdef.Widget.getChoiceListWidget(id,_10.name,_11);}else{wdg=bfree.widget.propdef.Widget.getWidget(_13,id,_10.name);}wdg.set("required",_f.is_required);wdg.set("value",_f.default_value);return wdg;};bfree.widget.propdef.Widget.generateStore=function(_14,_15){var _16=[];if(_15){_16.push({id:null,display:"None"});}dojo.forEach(_14.choice_values,function(_17,idx){_16.push({id:_17.value,display:_17.name});},this);return new bfree.api.ItemFileWriteStore({data:{identifier:"id",label:"display",items:_16}});};}