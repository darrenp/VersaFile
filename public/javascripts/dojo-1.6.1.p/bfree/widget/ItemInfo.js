/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget.ItemInfo"]){dojo._hasResource["bfree.widget.ItemInfo"]=true;dojo.provide("bfree.widget.ItemInfo");dojo.require("bfree.widget.document.Info");dojo.require("bfree.widget.document.multiple.Info");dojo.require("bfree.widget.folder.Info");dojo.require("bfree.widget.search.Info");dojo.require("dijit._Templated");dojo.require("dijit._Widget");dojo.declare("bfree.widget.ItemInfo",[dijit._Widget,dijit._Templated],{templateString:null,templateString:dojo.cache("bfree/widget","template/ItemInfo.html","<div dojoAttachPoint=\"mainNode\" style=\"height:100%;position:relative;width:100%\">\n\n<!-- div dojoAttachPoint=\"loadingNode\" style=\"position:absolute;top:0;left:0\">\n    <div style=\"position:absolute;top:8px;left:8px\">\n        <img dojoAttachPoint=\"typeIconNode\" src=\"/images/loading/loading48.gif\" height=\"48\" width=\"48\"/>\n    </div>\n    <div class=\"dijitBoldLabel dijitLargeLabel dijitDarkLabel\" dojoAttachPoint=\"nameNode\" style=\"white-space:nowrap;position:absolute;top:4px;left:74px\">Loading information...</div>\n</div -->\n\n</div>\t\n"),widgetsInTemplate:true,_wdgInfo:null,activeType:null,activeItems:[],library:null,preferences:null,root:null,postCreate:function(){this.inherited("postCreate",arguments);},_deleteWidget:function(){if(this._wdgInfo){this._wdgInfo.destroy(false);this._wdgInfo=null;}},_getId:function(_1){return (_1.isInstanceOf(bfree.api.Reference))?_1.document_id:_1.getId();},_isActive:function(_2,_3){var _4=dojo.every(_3,function(_5,_6){return (dojo.indexOf(this.activeItems,this._getId(_5))>=0);},this);return ((_4)&&(_2==this.activeType)&&(_3.length==this.activeItems.length));},_setActive:function(_7,_8){this.activeType=_7;this.activeItems=[];dojo.forEach(_8,function(_9){this.activeItems.push(this._getId(_9));},this);},errorItem:function(_a){if(!this._wdgInfo){return;}this._wdgInfo.errorItem(_a.item,_a.isDeleted);},load:function(_b){if(!this._isActive(_b.type,_b.items)){return;}this._wdgInfo.load(_b.items);},preload:function(_c){if(this._isActive(_c.type,_c.items)){return;}this._setActive(_c.type,_c.items);if(this._wdgInfo){this._deleteWidget();}switch(this.activeType){case bfree.widget.Bfree.ObjectTypes.DOCUMENT:this._wdgInfo=new bfree.widget.document.Info({items:_c.items,library:this.library});break;case bfree.widget.Bfree.ObjectTypes.FOLDER:this._wdgInfo=new bfree.widget.folder.Info({items:_c.items,library:this.library});}if(this._wdgInfo){this._wdgInfo.placeAt(this.mainNode,"last");this._wdgInfo.startup();}},setBusy:function(_d){if(this._wdgInfo){this._wdgInfo.setBusy(_d);}}});}