/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget._Grid"]){dojo._hasResource["bfree.widget._Grid"]=true;dojo.provide("bfree.widget._Grid");dojo.require("dojox.grid.DataGrid");dojo.declare("bfree.widget._Grid",dojox.grid.DataGrid,{autoSelect:true,noHeader:false,_onFetchComplete:function(){this.inherited("_onFetchComplete",arguments);if((this.autoSelect)&&(this.rowCount>0)){var _1=this.getItem(0);this.selectItem(_1);}else{this.selectItem(null);}},constructor:function(_2){dojo.safeMixin(this,_2);},onSelected:function(_3){this.inherited("onSelected",arguments);this.onSelectedItem(this.getItem(_3));},onRowClick:function(e){this.inherited("onRowClick",arguments);this.onSelectedItems(this.selection.getSelected());},onSelectionChanged:function(){this.onSelectedItems(this.selection.getSelected());},onSelectedItem:function(_4){},onSelectedItems:function(_5){},onItemClick:function(_6){},postCreate:function(){this.inherited(arguments);},refresh:function(){var q=this.query;var o=this.queryOptions;this.setStore(this.store,q,o);this.onSelectedItems(this.selection.getSelected());},selectItem:function(_7){this.selection.clear();if(_7){var _8=this.getItemIndex(_7);this.selection.select(_8);this.updateRow();this.onRowClick({rowIndex:_8});}else{this.onSelectedItem(null);}},setSelectedIndex:function(_9){while(_9>=this.rowCount){_9--;}if((_9<0)&&(this.rowCount<=0)){this.selectItem(null);}else{if(_9<1){_9=0;}var _a=this.getItem(_9);this.selectItem(_a);}},startup:function(){this.inherited("startup",arguments);},_onDelete:function(_b){if(!this.deleting){this._checkUpdateStatus();var _c=this._getItemIndex(_b,true);if(_c>=0){this._pages=[];this._bop=-1;this._eop=-1;var o=this._by_idx[_c];this._by_idx.splice(_c,1);delete this._by_idty[o.idty];this.updateRowCount(this.get("rowCount")-1);if(this.get("rowCount")===0){this.showMessage(this.noDataMessage);}}}},_setDeletingAttr:function(_d){this.deleting=_d;if(!this.deleting){this.refresh();}}});}