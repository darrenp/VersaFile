/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.widget._Grid"]){dojo._hasResource["bfree.widget._Grid"]=true;dojo.provide("bfree.widget._Grid");dojo.require("dojox.grid.DataGrid");dojo.declare("bfree.widget._Grid",dojox.grid.DataGrid,{autoSelect:true,noHeader:false,_onRevert:function(){this.inherited("_onRevert",arguments);if(this.invalidated){delete this.invalidated.rowCount;}},constructor:function(_1){},onSelectionChanged:function(){this.onSelectedItems(this.selection.getSelected());},onSelectedItems:function(_2){},onItemClick:function(_3){},postCreate:function(){this.inherited(arguments);},refresh:function(){var q=this.query;var o=this.queryOptions;this.setStore(this.store,q,o);this.onSelectedItems(this.selection.getSelected());},selectItem:function(_4){this.selection.clear();if(_4){var _5=this.getItemIndex(_4);this.selection.select(_5);this.updateRow();this.onRowClick({rowIndex:_5});}else{this.onSelectedItem(null);}},selectItems:function(_6,_7){_7=((!_7)||(_7<1))?0:_7;try{this.selection._beginUpdate();this.selection.clear();dojo.forEach(_6,function(_8,_9){this.selection.addToSelection(_8);},this);if(this.selection.getSelectedCount()<1){this.setSelectedIndex(_7);}}finally{this.selection._endUpdate();}},setSelectedIndex:function(_a){while(_a>=this.rowCount){_a--;}if((_a<0)&&(this.rowCount<=0)){this.selection.clear();}else{if(_a<1){_a=0;}this.selection.select(_a);this.onSelectedItems(this.selection.getSelected());}},startup:function(){this.inherited("startup",arguments);},_setDeletingAttr:function(_b){this.deleting=_b;if(!this.deleting){this.refresh();}}});}