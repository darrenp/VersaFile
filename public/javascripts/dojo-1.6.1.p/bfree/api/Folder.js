/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.api.Folder"]){dojo._hasResource["bfree.api.Folder"]=true;dojo.provide("bfree.api.Folder");dojo.require("bfree.api._Object");dojo.require("bfree.api._Securable");dojo.require("bfree.api.Acl");dojo.require("bfree.api.Search");dojo.declare("bfree.api.Folder",[bfree.api._Object,bfree.api._Securable],{_activeQuery:null,constructor:function(_1){dojo.safeMixin(this,((!_1)?{}:_1));this.securable_type=bfree.api._Securable.types.Folder;},getActiveQuery:function(){if(!this._activeQuery){this._activeQuery=new bfree.api.Search({type:(this.isTrash()?bfree.api.Search.types.TRASH:bfree.api.Search.types.FOLDER),queryData:this.getId()});}return this._activeQuery;},isSearch:function(){return this.is_search;},isTrash:function(){return (this.is_trash);},setActiveQuery:function(_2){this._activeQuery=_2;}});bfree.api.Folder.FolderTypes={"CONTENT":0,"SHARE_ROOT":16,"SHARE":17,"SEARCH":32,"TRASH":64};bfree.api.Folder.getIconUrl=function(_3,_4){var _5="content";switch(_3){case bfree.api.Folder.FolderTypes.TRASH:_5="recyclebin";break;case bfree.api.Folder.FolderTypes.SEARCH:_5="search";break;}return dojo.replace("/images/mimetypes/{0}/{1}.png",[_4,_5]);};bfree.api.Folder.sort=function(_6,_7){if((_6.is_trash)&&(_7.is_search)){return -1;}if((_6.is_search)&&(_7.is_trash)){return 1;}if((_6.is_trash)||(_6.is_search)){return -1;}if((_7.is_trash)||(_7.is_search)){return 1;}if(_6.name==_7.name){return 0;}return (_6.name?_6.name:"").toLowerCase()<(_7.name?_7.name:"").toLowerCase()?-1:1;};bfree.api.Folder.permissionIndices={"CREATE":0,"VIEW":1,"FILE":2,"DELETE":3,"SECURE":4};bfree.api.Folder.getPermissionSet=function(_8,_9,_a){var _b=new Array();var _c=(_9==null);var _d=((_c)||(_8==null));var _e=((!_d)&&((_8.root)||(_8.is_trash)||(_8.is_search)));_b[bfree.api.Folder.permissionIndices.CREATE]=((!_d)&&((!_8.is_trash)&&(!_8.is_search))&&(_8.hasRights(bfree.api._Securable.permissions.CREATE_FOLDERS)));_b[bfree.api.Folder.permissionIndices.EDIT]=((!_d)&&(!_e)&&(_8.hasRights(bfree.api._Securable.permissions.WRITE_METADATA)));_b[bfree.api.Folder.permissionIndices.FILE]=((!_d)&&(!_8.is_trash)&&(!_8.is_search)&&(_8.hasRights(bfree.api._Securable.permissions.CREATE_DOCUMENTS)));_b[bfree.api.Folder.permissionIndices.DELETE]=((!_d)&&(!_e)&&(_8.hasRights(bfree.api._Securable.permissions.DELETE_ITEMS)));_b[bfree.api.Folder.permissionIndices.SECURE]=((!_d)&&(!_8.is_search)&&(_8.hasRights(bfree.api._Securable.permissions.WRITE_ACL)));return _b;};bfree.api.Folder.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"created_at":{type:"string",format:"date-time","default":dojo.date.stamp.toISOString(new Date(),{zulu:true})},"created_by":{type:"string","default":""},"updated_at":{type:"string",format:"date-time","default":dojo.date.stamp.toISOString(new Date(),{zulu:true})},"updated_by":{type:"string","default":""},"text_path":{type:"string","default":""},"document_count":{type:"integer","default":0}},prototype:new bfree.api.Folder()};}