/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.api.Zone"]){dojo._hasResource["bfree.api.Zone"]=true;dojo.provide("bfree.api.Zone");dojo.require("bfree.api._Object");dojo.require("bfree.api._Configurable");dojo.require("bfree.api.Groups");dojo.require("bfree.api.Libraries");dojo.require("bfree.api.Roles");dojo.require("bfree.api.Users");dojo.require("bfree.api.DocumentTypes");dojo.require("bfree.api.PropertyDefinitions");dojo.require("bfree.api.PropertyMappings");dojo.require("bfree.api.ChoiceLists");dojo.require("bfree.api.ViewDefinitions");dojo.require("bfree.api.CellDefinitions");dojo.require("bfree.api.XhrHelper");dojo.require("bfree.api.Folders");dojo.require("bfree.api.Preferences");dojo.declare("bfree.api.Zone",[bfree.api._Object,bfree.api._Configurable],{subdomain:null,_groups:null,_libraries:null,_roles:null,_users:null,_documentTypes:new Array(),_propertyDefinitions:new Array(),_propertyMappings:new Array(),_choiceLists:new Array(),_choiceValues:new Array(),_cellDefinitions:new Array(),_viewDefinitions:new Array(),constructor:function(_1){if(_1){dojo.safeMixin(this,_1);}},getGroups:function(){if(!this._groups){this._groups=new bfree.api.Groups({zone:this});}return this._groups;},getLibraries:function(){if(!this._libraries){this._libraries=new bfree.api.Libraries({zone:this});}return this._libraries;},getMetrics:function(_2){var _3=dojo.replace(bfree.api.Zone.MT_TRGT,[this.subdomain]);var _4=bfree.api.XhrHelper.doGetAction({target:_3});return _4;},getRoles:function(){if(!this._roles){this._roles=new bfree.api.Roles({zone:this});}return this._roles;},getUsers:function(){if(!this._users){this._users=new bfree.api.Users({zone:this});}return this._users;},getPropertyDefinitions:function(_5){if(!this._propertyDefinitions[_5.id]){this._propertyDefinitions[_5.id]=new bfree.api.PropertyDefinitions({zone:this,library:_5});}return this._propertyDefinitions[_5.id];},getDocumentTypes:function(_6){if(!this._documentTypes[_6.id]){this._documentTypes[_6.id]=new bfree.api.DocumentTypes({zone:this,library:_6});}return this._documentTypes[_6.id];},getChoiceLists:function(_7){if(!this._choiceLists[_7.id]){this._choiceLists[_7.id]=new bfree.api.ChoiceLists({zone:this,library:_7});}return this._choiceLists[_7.id];},getChoiceValues:function(_8){if(!this._choiceValues[_8.id]){this._choiceValues[_8.id]=new bfree.api.ChoiceValues({zone:this,library:_8});}return this._choiceValues[_8.id];},getPropertyMappings:function(_9){if(!this._propertyMappings[_9.id]){this._propertyMappings[_9.id]=new bfree.api.PropertyMappings({zone:this,library:_9});}return this._propertyMappings[_9.id];},getCellDefinitions:function(_a){if(!this._cellDefinitions[_a.id]){this._cellDefinitions[_a.id]=new bfree.api.CellDefinitions({zone:this,library:_a});}return this._cellDefinitions[_a.id];},getViewDefinitions:function(_b){if(!this._viewDefinitions[_b.id]){this._viewDefinitions[_b.id]=new bfree.api.ViewDefinitions({zone:this,library:_b,cellDefinitions:this.getCellDefinitions(_b)});}return this._viewDefinitions[_b.id];},isAlive:function(){var _c=dojo.replace(bfree.api.Zone.ISALIVE_URL,this);var _d={};var _e=bfree.api.XhrHelper.doPostAction({target:_c,postData:_d});return true;},logon:function(_f,_10){var url=dojo.replace(bfree.api.Zone.LOGIN_URL,this);var _11={username:_f,password:_10};var _12=bfree.api.XhrHelper.doPostAction({target:url,postData:_11});return new bfree.api.User(_12);},logoff:function(){var url=dojo.replace(bfree.api.Zone.LOGOUT_URL,this);var _13={};var _14=bfree.api.XhrHelper.doPostAction({target:url,postData:_13});return _14;},resetPassword:function(_15,_16){var url=dojo.replace(bfree.api.Zone.RESET_URL,this);var _17={username:_15,email:_16};var _18=bfree.api.XhrHelper.doPostAction({target:url,postData:_17});return _18;}});bfree.api.Zone.LOGIN_URL="/zones/{subdomain}/logon.json";bfree.api.Zone.LOGOUT_URL="/zones/{subdomain}/logoff.json";bfree.api.Zone.ISALIVE_URL="/zones/{subdomain}/alive.json";bfree.api.Zone.MT_TRGT="/zones/{0}/metrics.json";bfree.api.Zone.RESET_URL="/zones/{subdomain}/reset.json";bfree.api.Zone.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"subdomain":{type:"string"},"active_permissions":{type:"integer","default":0},"created_at":{type:"date",format:"date-time"},"updated_at":{type:"date",format:"date-time"}},prototype:new bfree.api.Zone()};}