/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.api.Folders"]){dojo._hasResource["bfree.api.Folders"]=true;dojo.provide("bfree.api.Folders");dojo.require("bfree.api._Collection");dojo.require("bfree.api.Folder");dojo.require("bfree.api.Utilities");dojo.declare("bfree.api.Folders",[bfree.api._Collection],{library:null,_getExistingNames:function(_1){var _2=[];if((_1)&&(_1.children)){dojo.forEach(_1.children,function(_3){_2.push(_3.name);});}return _2;},_isUpdateable:function(_4){if(_4.query.hasOwnProperty("parent_id")){return true;}return typeof _4.query=="object";},constructor:function(_5){this.zone=_5.zone;this.library=_5.library;this.target=dojo.replace(bfree.api.Folders.TRGT,[this.zone.subdomain,this.library.id]);this.schema=bfree.api.Folder.schema;this.cache=true;this._initialize();},generateUniqueName:function(_6){var _7=this._getExistingNames(_6.parent);var _8=_6.base_name;return bfree.api.Utilities.generateUniqueName({names:_7,base_name:_8});},getTextPath:function(_9){var _a=_9.item;if(_a.parent_id){var _b=this.fetchById({id:_a.parent_id});return this.getTextPath({item:_b})+"/"+_a.name;}else{return "/"+_a.name;}}});bfree.api.Folders.TRGT="/zones/{0}/libraries/{1}/folders";bfree.api.Folders.generateUniqueName=function(_c){var _d=_c.folder;var _e=[];dojo.forEach(_d.children,function(_f){_e.push(_f.name);});return bfree.api.Utilities.generateUniqueName({names:_e,base_name:_c.base_name});};}