/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.api.Uploader"]){dojo._hasResource["bfree.api.Uploader"]=true;dojo.provide("bfree.api.Uploader");dojo.require("dojox.embed.Flash");dojo.declare("bfree.api.Uploader",null,{});bfree.api.Uploader.useFlash=function(){if(dojo.isOpera){return false;}return dojox.embed.Flash.available;};bfree.api.Uploader.CLEAN_TRGT="/zones/{0}/uploader/clean.json";bfree.api.Uploader.PRV_TRGT="/zones/{0}/uploader/preview?file={1}&authenticity_token={2}";bfree.api.Uploader.DL_TRGT="/zones/{0}/uploader/download?file={1}";bfree.api.Uploader.UL_TRGT="/zones/{0}/uploader/upload?pkg={1}";bfree.api.Uploader.getDownloadUrl=function(_1){return dojo.replace(bfree.api.Uploader.DL_TRGT,[_1.zone.subdomain,encodeURIComponent(_1.item.file)]);};bfree.api.Uploader.getPreviewUrl=function(_2){var _3=(_2.item)?_2.item.binary_file_name:"";return dojo.replace(bfree.api.Uploader.PRV_TRGT,[_2.zone.subdomain,encodeURIComponent(_3),bfree.api.XhrHelper.authenticity_token]);};bfree.api.Uploader.getUploadUrl=function(_4){return dojo.replace(bfree.api.Uploader.UL_TRGT,[_4.zone.subdomain,_4.isPackage]);};bfree.api.Uploader.clean=function(_5){var _6=dojo.replace(bfree.api.Uploader.CLEAN_TRGT,[_5.zone.subdomain]);var _7={};var _8=bfree.api.XhrHelper.doPostAction({target:_6,postData:_7});};}