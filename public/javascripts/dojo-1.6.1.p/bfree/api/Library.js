/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["bfree.api.Library"]){dojo._hasResource["bfree.api.Library"]=true;dojo.provide("bfree.api.Library");dojo.require("bfree.api._Object");dojo.require("bfree.api._Securable");dojo.require("bfree.api.ChoiceLists");dojo.require("bfree.api.Documents");dojo.require("bfree.api.DocumentTypes");dojo.require("bfree.api.Folders");dojo.require("bfree.api.PropertyDefinitions");dojo.require("bfree.api.References");dojo.require("bfree.api.ViewMappings");dojo.declare("bfree.api.Library",[bfree.api._Object,bfree.api._Securable],{zone:null,_choiceLists:null,_documents:null,_documentTypes:null,_folders:null,_propertyDefinitions:null,_references:null,_viewDefinitions:null,_viewMappings:null,_cellDefinitions:null,description:null,constructor:function(_1){dojo.safeMixin(this,((!_1)?{}:_1));this.securable_type=bfree.api._Securable.types.Library;},createShare:function(_2){var _3=_2.shareRoot;var _4={parent:_3,attribute:"children"};var _5=this.getFolders().store.newItem({name:_2.name,folder_type:bfree.api.Folder.FolderTypes.SHARE,parent_id:_3.getId(),password:_2.password,expiry:_2.expiry,seed_id:(_2.seed)?_2.seed.getId():null,children:[]},_4);return _5;},empty_trash:function(_6){var _7=_6.zone;var _8=dojo.replace(bfree.api.Library.EMPTYTRASH_TRGT,[_7.subdomain,this.getId()]);var _9=bfree.api.XhrHelper.doPutAction({target:_8,putData:{}});return true;},getChoiceLists:function(){if(!this._choiceLists){this._choiceLists=new bfree.api.ChoiceLists({zone:this.zone,library:this});}return this._choiceLists;},getDocuments:function(){if(!this._documents){this._documents=new bfree.api.Documents({zone:this.zone,library:this});}return this._documents;},getDocumentTypes:function(){if(!this._documentTypes){this._documentTypes=new bfree.api.DocumentTypes({zone:this.zone,library:this});}return this._documentTypes;},getFolders:function(){if(!this._folders){this._folders=new bfree.api.Folders({zone:this.zone,library:this});}return this._folders;},getPropertyDefinitions:function(){if(!this._propertyDefinitions){this._propertyDefinitions=new bfree.api.PropertyDefinitions({zone:this.zone,library:this});}return this._propertyDefinitions;},getPropertyMappings:function(){if(!this._propertyMappings){this._propertyMappings=new bfree.api.PropertyMappings({zone:this.zone,library:this});}return this._propertyMappings;},getReferences:function(){if(!this._references){this._references=new bfree.api.References({zone:this.zone,library:this});}return this._references;},getViewDefinitions:function(){if(!this._viewDefinitions){this._viewDefinitions=new bfree.api.ViewDefinitions({zone:this.zone,library:this});}return this._viewDefinitions;},getViewMappings:function(){if(!this._viewMappings){this._viewMappings=new bfree.api.ViewMappings({zone:this.zone,library:this});}return this._viewMappings;},getCellDefinitions:function(){if(!this._cellDefinitions){this._cellDefinitions=new bfree.api.CellDefinitions({zone:this.zone,library:this});}return this._cellDefinitions;}});bfree.api.Library.EMPTYTRASH_TRGT="/zones/{0}/libraries/{1}/empty_trash.json";bfree.api.Library.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"description":{type:"string"},"created_at":{type:"date",format:"date-time"},"created_by":{type:"string"},"updated_at":{type:"date",format:"date-time"},"updated_by":{type:"string"}},prototype:new bfree.api.Library()};}