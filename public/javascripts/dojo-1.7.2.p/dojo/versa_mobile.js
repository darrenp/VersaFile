/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

//>>built
require({cache:{"dojox/mobile/ToolBarButton":function(){define("dojox/mobile/ToolBarButton",["dojo/_base/declare","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","./common","./_ItemBase"],function(_1,_2,_3,_4,_5,_6,_7){return _1("dojox.mobile.ToolBarButton",_7,{selected:false,btnClass:"",_defaultColor:"mblColorDefault",_selColor:"mblColorDefaultSel",buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||_2.doc.createElement("div");this.inheritParams();_3.add(this.domNode,"mblToolBarButton mblArrowButtonText");var _8;if(this.selected){_8=this._selColor;}else{if(this.domNode.className.indexOf("mblColor")==-1){_8=this._defaultColor;}}_3.add(this.domNode,_8);if(!this.label){this.label=this.domNode.innerHTML;}if(this.icon&&this.icon!="none"){this.iconNode=_4.create("div",{className:"mblToolBarButtonIcon"},this.domNode);_6.createIcon(this.icon,this.iconPos,null,this.alt,this.iconNode);if(this.iconPos){_3.add(this.iconNode.firstChild,"mblToolBarButtonSpriteIcon");}}else{if(_6.createDomButton(this.domNode)){_3.add(this.domNode,"mblToolBarButtonDomButton");}else{_3.add(this.domNode,"mblToolBarButtonText");}}this.connect(this.domNode,"onclick","onClick");},select:function(){_3.toggle(this.domNode,this._selColor,!arguments[0]);this.selected=!arguments[0];},deselect:function(){this.select(true);},onClick:function(e){this.setTransitionPos(e);this.defaultClickAction();},_setBtnClassAttr:function(_9){var _a=this.domNode;if(_a.className.match(/(mblDomButton\w+)/)){_3.remove(_a,RegExp.$1);}_3.add(_a,_9);if(_6.createDomButton(this.domNode)){_3.add(this.domNode,"mblToolBarButtonDomButton");}},_setLabelAttr:function(_b){this.label=_b;this.domNode.innerHTML=this._cv?this._cv(_b):_b;}});});},"versa/api/References":function(){define("versa/api/References",["dojo/_base/declare","versa/api/_Collection","versa/api/Reference"],function(_c){var o=_c("versa.api.References",[versa.api._Collection],{library:null,zone:null,_isUpdateable:function(_d){return false;},_softDelete:function(_e){var _f=dojo.replace(versa.api.References.SDEL_TRGT,[this.zone.subdomain,this.library.getId(),_e.getId()]);var _10={};var _11=versa.api.XhrHelper.doPutAction({target:_f,putData:_10});return _11;},constructor:function(_12){this.zone=_12.zone;this.library=_12.library;this.target=dojo.replace(versa.api.References.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.Reference.schema;this.cache=false;this._initialize();this.store.isUpdateable=dojo.hitch(this,this._isUpdateable);},destroy:function(_13){var _14=_13.item;if((_14.isInstanceOf(versa.api.Reference))&&(_13.soft)){_14=this._softDelete(_14);this.store.onDelete(_14);}else{this.inherited("destroy",arguments);}},export_query:function(_15){var _16=dojo.objectToQuery(_15.query);var _17=dojo.replace("sort({0}{1})",[(_15.sort.descending?"-":"+"),encodeURIComponent(_15.sort.attribute)]);var _18="json";switch(_15.type){case versa.api.References.ExportTypes.CSV:_18="csv";break;case versa.api.References.ExportTypes.PDF:_18="pdf";break;case versa.api.References.ExportTypes.XML:_18="xml";break;}var url=dojo.replace(versa.api.References.EXPORT_TRGT,[_15.zone.subdomain,_15.library.id,_16,_17,_18]);if(_15.type==versa.api.Documents.ExportTypes.PDF){versa.api.Utilities.viewUrl({windowBox:_15.windowBox,url:url,window_name:"versa_save"});}else{versa.api.Utilities.saveUrl({url:url,window_name:"versa_save"});}},print_query:function(_19){var _1a=dojo.objectToQuery(_19.query);var _1b=dojo.replace("sort({0}{1})",[(_19.sort.descending?"-":"+"),encodeURIComponent(_19.sort.attribute)]);var url=dojo.replace(versa.api.References.PRINT_TRGT,[_19.zone.subdomain,_19.library.id,_1a,_1b,"html"]);versa.api.Utilities.viewUrl({windowBox:_19.windowBox,url:url,window_name:"versa_printer"});}});o.ExportTypes={"NONE":0,"CSV":1,"PDF":2,"XML":3};o.TRGT="/zones/{0}/libraries/{1}/references";o.SDEL_TRGT="/zones/{0}/libraries/{1}/references/{2}/soft_delete.json";o.PRINT_TRGT="/zones/{0}/libraries/{1}/references?{2}&{3}";o.EXPORT_TRGT="/zones/{0}/libraries/{1}/references.{4}?{2}&{3}";return o;});},"dojox/mobile/transition":function(){define("dojox/mobile/transition",["dojo/_base/Deferred","dojo/_base/config"],function(_1c,_1d){if(_1d["mblCSS3Transition"]){var _1e=new _1c();require([_1d["mblCSS3Transition"]],function(_1f){_1e.resolve(_1f);});return _1e;}return null;});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/sniff","dojo/_base/unload","dojo/_base/window"],function(_20,_21,_22,_23,_24,_25,_26,_27,has,_28,win){var _29=_26("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(_2a){var _2b=this.declaredClass,_2c=this;return _23.substitute(_2a,this,function(_2d,key){if(key.charAt(0)=="!"){_2d=_20.getObject(key.substr(1),false,_2c);}if(typeof _2d=="undefined"){throw new Error(_2b+" template:"+key);}if(_2d==null){return "";}return key.charAt(0)=="!"?_2d:_2d.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_24(this.templatePath,{sanitize:true});}var _2e=_29.getCachedTemplate(this.templateString,this._skipNodeCache);var _2f;if(_20.isString(_2e)){_2f=_27.toDom(this._stringRepl(_2e));if(_2f.nodeType!=1){throw new Error("Invalid template: "+_2e);}}else{_2f=_2e.cloneNode(true);}this.domNode=_2f;this.inherited(arguments);this._attachTemplateNodes(_2f,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_30){var _31=this.containerNode;if(_30&&_31){while(_30.hasChildNodes()){_31.appendChild(_30.firstChild);}}},_attachTemplateNodes:function(_32,_33){var _34=_20.isArray(_32)?_32:(_32.all||_32.getElementsByTagName("*"));var x=_20.isArray(_32)?0:-1;for(;x<_34.length;x++){var _35=(x==-1)?_32:_34[x];if(this.widgetsInTemplate&&(_33(_35,"dojoType")||_33(_35,"data-dojo-type"))){continue;}var _36=_33(_35,"dojoAttachPoint")||_33(_35,"data-dojo-attach-point");if(_36){var _37,_38=_36.split(/\s*,\s*/);while((_37=_38.shift())){if(_20.isArray(this[_37])){this[_37].push(_35);}else{this[_37]=_35;}this._attachPoints.push(_37);}}var _39=_33(_35,"dojoAttachEvent")||_33(_35,"data-dojo-attach-event");if(_39){var _3a,_3b=_39.split(/\s*,\s*/);var _3c=_20.trim;while((_3a=_3b.shift())){if(_3a){var _3d=null;if(_3a.indexOf(":")!=-1){var _3e=_3a.split(":");_3a=_3c(_3e[0]);_3d=_3c(_3e[1]);}else{_3a=_3c(_3a);}if(!_3d){_3d=_3a;}this._attachEvents.push(this.connect(_35,_21[_3a]||_3a,_3d));}}}}},destroyRendering:function(){_25.forEach(this._attachPoints,function(_3f){delete this[_3f];},this);this._attachPoints=[];_25.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_29._templateCache={};_29.getCachedTemplate=function(_40,_41){var _42=_29._templateCache;var key=_40;var _43=_42[key];if(_43){try{if(!_43.ownerDocument||_43.ownerDocument==win.doc){return _43;}}catch(e){}_27.destroy(_43);}_40=_23.trim(_40);if(_41||_40.match(/\$\{([^\}]+)\}/g)){return (_42[key]=_40);}else{var _44=_27.toDom(_40);if(_44.nodeType!=1){throw new Error("Invalid template: "+_40);}return (_42[key]=_44);}};if(has("ie")){_28.addOnWindowUnload(function(){var _45=_29._templateCache;for(var key in _45){var _46=_45[key];if(typeof _46=="object"){_27.destroy(_46);}delete _45[key];}});}_20.extend(_22,{dojoAttachEvent:"",dojoAttachPoint:""});return _29;});},"versa/api/Preferences":function(){define("versa/api/Preferences",["dojo/_base/declare","versa/api/_Collection","versa/api/Preference","dojo/data/ItemFileReadStore"],function(_47){var o=_47("versa.api.Preferences",[versa.api._Collection],{constructor:function(_48){this.zone=_48.zone;this.library=_48.library;this.target=dojo.replace(versa.api.Preferences.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.Preference.schema;this.cache=true;this._dateEntryFormats=new dojo.data.ItemFileReadStore({data:{"identifier":"id","label":"name","items":[{id:versa.api.Preference.dateEntryFormats._date,name:"Date only"},{id:versa.api.Preference.dateEntryFormats._time,name:"Time only"},{id:versa.api.Preference.dateEntryFormats._datetime,name:"Date and Time"}]},clearOnClose:true});this._initialize();},getDateEntryFormat:function(){var _49=this.store.fetch({query:{name:"Date entry format"}}).results[0];return (_49)?parseInt(this.getValue(_49,"value")):1;}});o.TRGT="/zones{0}/libraries/${1}/preferences";return o;});},"versa/api/Libraries":function(){define("versa/api/Libraries",["dojo/_base/declare","versa/api/_Collection","versa/api/Library"],function(_4a){var o=_4a("versa.api.Libraries",[versa.api._Collection],{zone:null,constructor:function(_4b){this.zone=_4b.zone;this.target=dojo.replace(versa.api.Libraries.TRGT,this.zone);this.schema=versa.api.Library.schema;this.cache=true;this._initialize();}});o.TRGT="/zones/{subdomain}/libraries";return o;});},"versa/widget/mobile/TextBox":function(){define("versa/widget/mobile/TextBox",["dojo/_base/declare","dojox/mobile/TextBox"],function(_4c){return _4c("versa.widget.mobile.TextBox",[dojox.mobile.TextBox],{buildRendering:function(){this.inherited("buildRendering",arguments);if(this.type){this.domNode.type=this.type;}},_onFocus:function(){this.inherited("_onFocus",arguments);this.onFocus();},_onBlur:function(){this.inherited("_onBlur",arguments);this.onFocus();},onFocus:function(){},onBlur:function(){}});});},"versa/api/Formatter":function(){define("versa/api/Formatter",["dojo/_base/declare","dojo/date/locale"],function(_4d){var o=_4d("versa.api.Formatter",[],{});o.formatDateTime=function(_4e){var _4f=_4e;if(String.isEmpty(_4e)){return "";}if(typeof _4e=="string"){_4f=dojo.date.stamp.fromISOString(_4e);}return dojo.date.locale.format(_4f,{selector:"date",formatLength:"short"});};return o;});},"versa/api/Documents":function(){define("versa/api/Documents",["dojo/_base/declare","versa/api/_Collection","versa/api/Document","versa/api/Utilities"],function(_50){var o=_50("versa.api.Documents",[versa.api._Collection],{library:null,_isUpdateable:function(_51){return false;},_softDelete:function(_52){var url=dojo.replace(versa.api.Documents.SDEL_TRGT,[this.zone.subdomain,this.library.getId(),_52.getId()]);var _53={};var _54=versa.api.XhrHelper.doPutAction({target:url,putData:_53});return _54;},constructor:function(_55){this.zone=_55.zone;this.library=_55.library;this.target=dojo.replace(versa.api.Documents.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.Document.schema;this.cache=false;this.syncMode=false;this._initialize();this.store.isUpdateable=dojo.hitch(this,this._isUpdateable);},destroy:function(_56){var _57=_56.item;if((_57.isInstanceOf(versa.api.Document))&&(_56.soft)){_57=this._softDelete(_57);this.store.onDelete(_57);}else{this.inherited("destroy",arguments);}},empty_recycling:function(_58){var _59=_58.zone;var _5a=_58.library;var url=dojo.replace(versa.api.Documents.EMPTY,[_59.subdomain,_5a.id]);var _5b=versa.api.XhrHelper.doPostAction({target:url,postData:{}});return true;},export_query:function(_5c){var _5d=dojo.objectToQuery(_5c.query);var _5e=dojo.replace("sort({0}{1})",[(_5c.sort.descending?"-":"+"),encodeURIComponent(_5c.sort.attribute)]);var _5f="json";switch(_5c.type){case versa.api.Documents.ExportTypes.CSV:_5f="csv";break;case versa.api.Documents.ExportTypes.PDF:_5f="pdf";break;case versa.api.Documents.ExportTypes.XML:_5f="xml";break;}var url=dojo.replace(versa.api.Documents.EXPORT_TRGT,[_5c.zone.subdomain,_5c.library.id,_5d,_5e,_5f]);if(_5c.type==versa.api.Documents.ExportTypes.PDF){versa.api.Utilities.viewUrl({windowBox:_5c.windowBox,url:url,window_name:"versa_save"});}else{versa.api.Utilities.saveUrl({url:url,window_name:"versa_save"});}},isValid:function(_60){this.validate(_60);return this.getState(versa.api.Document.states.INVALID);},print_query:function(_61){var _62=dojo.objectToQuery(_61.query);var _63=dojo.replace("sort({0}{1})",[(_61.sort.descending?"-":"+"),encodeURIComponent(_61.sort.attribute)]);var url=dojo.replace(versa.api.Documents.EXPORT_TRGT,[_61.zone.subdomain,_61.library.id,_62,_63,"html"]);versa.api.Utilities.viewUrl({windowBox:_61.windowBox,url:url,window_name:"versa_printer"});}});o.States={pending:0,checked_in:1,checked_out:2,busy:16384,deleted:32768};o.ExportTypes={"NONE":0,"CSV":1,"PDF":2,"XML":3};o.TRGT="/zones/{0}/libraries/{1}/documents";o.PRINT_TRGT="/zones/{0}/libraries/{1}/documents?{2}&{3}";o.EXPORT_TRGT="/zones/{0}/libraries/{1}/documents.{4}?{2}&{3}";o.EMPTY="/zones/{0}/libraries/{1}/documents/empty";o.SDEL_TRGT="/zones/{0}/libraries/{1}/documents/{2}/soft_delete.json";o.isCheckedOut=function(_64){var _65;if(_64.document){_65=_64.document.state;}else{if(_64.state){_65=_64.state;}}return ((_65&versa.api.Documents.States.checked_out)>0);};o.isBusy=function(_66){return ((_66.state&versa.api.Documents.States.busy)>0);};return o;});},"versa/api/Share":function(){define("versa/api/Share",["dojo/_base/declare","versa/api/_Object","versa/api/SharedItems"],function(_67){var o=_67("versa.api.Share",[versa.api._Object],{constructor:function(_68){dojo.safeMixin(this,((!_68)?{}:_68));},authorize:function(_69){var url=dojo.replace(versa.api.Share.AUTH_URL,[_69.id,this.fingerprint]);var _6a={password:this.password};var _6b=versa.api.XhrHelper.doPostAction({target:url,postData:_6a});return true;},getSharedItems:function(_6c){return new versa.api.SharedItems({zone:_6c.zone,share:this});}});o.AUTH_URL="/zones/{0}/shares/{1}/authorize.json";o.schema={type:"object",properties:{"id":{type:"integer"}},prototype:new o()};return o;});},"dojox/mobile/TabBarButton":function(){define("dojox/mobile/TabBarButton",["dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dijit/registry","./common","./_ItemBase"],function(_6d,_6e,win,_6f,_70,_71,_72,_73){return _6d("dojox.mobile.TabBarButton",_73,{icon1:"",icon2:"",iconPos1:"",iconPos2:"",selected:false,transition:"none",tag:"LI",selectOne:true,inheritParams:function(){if(this.icon&&!this.icon1){this.icon1=this.icon;}var _74=this.getParent();if(_74){if(!this.transition){this.transition=_74.transition;}if(this.icon1&&_74.iconBase&&_74.iconBase.charAt(_74.iconBase.length-1)==="/"){this.icon1=_74.iconBase+this.icon1;}if(!this.icon1){this.icon1=_74.iconBase;}if(!this.iconPos1){this.iconPos1=_74.iconPos;}if(this.icon2&&_74.iconBase&&_74.iconBase.charAt(_74.iconBase.length-1)==="/"){this.icon2=_74.iconBase+this.icon2;}if(!this.icon2){this.icon2=_74.iconBase||this.icon1;}if(!this.iconPos2){this.iconPos2=_74.iconPos||this.iconPos1;}}},buildRendering:function(){var a=this.anchorNode=_70.create("A",{className:"mblTabBarButtonAnchor"});this.connect(a,"onclick","onClick");this.box=_70.create("DIV",{className:"mblTabBarButtonTextBox"},a);var box=this.box;var _75="";var r=this.srcNodeRef;if(r){for(var i=0,len=r.childNodes.length;i<len;i++){var n=r.firstChild;if(n.nodeType===3){_75+=_6e.trim(n.nodeValue);}box.appendChild(n);}}if(!this.label){this.label=_75;}this.domNode=this.srcNodeRef||_70.create(this.tag);this.containerNode=this.domNode;this.domNode.appendChild(a);if(this.domNode.className.indexOf("mblDomButton")!=-1){var _76=_70.create("DIV",null,a);_72.createDomButton(this.domNode,null,_76);_6f.add(this.domNode,"mblTabButtonDomButton");_6f.add(_76,"mblTabButtonDomButtonClass");}if((this.icon1||this.icon).indexOf("mblDomButton")!=-1){_6f.add(this.domNode,"mblTabButtonDomButton");}},startup:function(){if(this._started){return;}this.inheritParams();var _77=this.getParent();var _78=_77?_77._clsName:"mblTabBarButton";_6f.add(this.domNode,_78+(this.selected?" mblTabButtonSelected":""));if(_77&&_77.barType=="segmentedControl"){_6f.remove(this.domNode,"mblTabBarButton");_6f.add(this.domNode,_77._clsName);this.box.className="";}this.set({icon1:this.icon1,icon2:this.icon2});this.inherited(arguments);},select:function(){if(arguments[0]){this.selected=false;_6f.remove(this.domNode,"mblTabButtonSelected");}else{this.selected=true;_6f.add(this.domNode,"mblTabButtonSelected");for(var i=0,c=this.domNode.parentNode.childNodes;i<c.length;i++){if(c[i].nodeType!=1){continue;}var w=_71.byNode(c[i]);if(w&&w!=this){w.deselect();}}}if(this.iconNode1){this.iconNode1.style.visibility=this.selected?"hidden":"";}if(this.iconNode2){this.iconNode2.style.visibility=this.selected?"":"hidden";}},deselect:function(){this.select(true);},onClick:function(e){this.defaultClickAction();},_setIcon:function(_79,pos,num,sel){var i="icon"+num,n="iconNode"+num,p="iconPos"+num;if(_79){this[i]=_79;}if(pos){if(this[p]===pos){return;}this[p]=pos;}if(_79&&_79!=="none"){if(!this.iconDivNode){this.iconDivNode=_70.create("DIV",{className:"mblTabBarButtonDiv"},this.anchorNode,"first");}if(!this[n]){this[n]=_70.create("div",{className:"mblTabBarButtonIcon"},this.iconDivNode);}else{_70.empty(this[n]);}_72.createIcon(_79,this[p],null,this.alt,this[n]);if(this[p]){_6f.add(this[n].firstChild,"mblTabBarButtonSpriteIcon");}_6f.remove(this.iconDivNode,"mblTabBarButtonNoIcon");this[n].style.visibility=sel?"hidden":"";}else{if(this.iconDivNode){_6f.add(this.iconDivNode,"mblTabBarButtonNoIcon");}}},_setIcon1Attr:function(_7a){this._setIcon(_7a,null,1,this.selected);},_setIcon2Attr:function(_7b){this._setIcon(_7b,null,2,!this.selected);},_setIconPos1Attr:function(pos){this._setIcon(null,pos,1,this.selected);},_setIconPos2Attr:function(pos){this._setIcon(null,pos,2,!this.selected);},_setLabelAttr:function(_7c){this.label=_7c;this.box.innerHTML=this._cv?this._cv(_7c):_7c;}});});},"dojox/mobile/_ScrollableMixin":function(){define("dojox/mobile/_ScrollableMixin",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom","dojo/dom-class","dijit/registry","./scrollable"],function(_7d,_7e,_7f,win,dom,_80,_81,_82){var cls=_7e("dojox.mobile._ScrollableMixin",null,{fixedHeader:"",fixedFooter:"",scrollableParams:null,allowNestedScrolls:true,constructor:function(){this.scrollableParams={};},destroy:function(){this.cleanup();this.inherited(arguments);},startup:function(){if(this._started){return;}var _83;var _84=this.scrollableParams;if(this.fixedHeader){_83=dom.byId(this.fixedHeader);if(_83.parentNode==this.domNode){this.isLocalHeader=true;}_84.fixedHeaderHeight=_83.offsetHeight;}if(this.fixedFooter){_83=dom.byId(this.fixedFooter);if(_83.parentNode==this.domNode){this.isLocalFooter=true;_83.style.bottom="0px";}_84.fixedFooterHeight=_83.offsetHeight;}this.init(_84);if(this.allowNestedScrolls){for(var p=this.getParent();p;p=p.getParent()){if(p&&p.scrollableParams){this.isNested=true;this.dirLock=true;p.dirLock=true;break;}}}this.inherited(arguments);},findAppBars:function(){var i,len,c;for(i=0,len=win.body().childNodes.length;i<len;i++){c=win.body().childNodes[i];this.checkFixedBar(c,false);}if(this.domNode.parentNode){for(i=0,len=this.domNode.parentNode.childNodes.length;i<len;i++){c=this.domNode.parentNode.childNodes[i];this.checkFixedBar(c,false);}}this.fixedFooterHeight=this.fixedFooter?this.fixedFooter.offsetHeight:0;},checkFixedBar:function(_85,_86){if(_85.nodeType===1){var _87=_85.getAttribute("fixed")||(_81.byNode(_85)&&_81.byNode(_85).fixed);if(_87==="top"){_80.add(_85,"mblFixedHeaderBar");if(_86){_85.style.top="0px";this.fixedHeader=_85;}return _87;}else{if(_87==="bottom"){_80.add(_85,"mblFixedBottomBar");this.fixedFooter=_85;return _87;}}}return null;}});_7f.extend(cls,new _82(_7d,dojox));return cls;});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","."],function(_88,_89,dom,_8a,_8b,_8c,_8d,on,_8e,has,_8f,_90,win,_91,_92,_93,_94){var _95=_89([_8f,_8c],{curNode:null,activeStack:[],constructor:function(){var _96=_8d.hitch(this,function(_97){if(dom.isDescendant(this.curNode,_97)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,_97)){this.set("prevNode",null);}});_88.before(_8b,"empty",_96);_88.before(_8b,"destroy",_96);},registerIframe:function(_98){return this.registerWin(_98.contentWindow,_98);},registerWin:function(_99,_9a){var _9b=this;var _9c=function(evt){_9b._justMouseDowned=true;setTimeout(function(){_9b._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_9b._onTouchNode(_9a||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_99.document.documentElement:_99.document;if(doc){if(has("ie")){_99.document.body.attachEvent("onmousedown",_9c);var _9d=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(_92.isTabNavigable(evt.srcElement)){_9b._onFocusNode(_9a||evt.srcElement);}else{_9b._onTouchNode(_9a||evt.srcElement);}};doc.attachEvent("onactivate",_9d);var _9e=function(evt){_9b._onBlurNode(_9a||evt.srcElement);};doc.attachEvent("ondeactivate",_9e);return {remove:function(){_99.document.detachEvent("onmousedown",_9c);doc.detachEvent("onactivate",_9d);doc.detachEvent("ondeactivate",_9e);doc=null;}};}else{doc.body.addEventListener("mousedown",_9c,true);doc.body.addEventListener("touchstart",_9c,true);var _9f=function(evt){_9b._onFocusNode(_9a||evt.target);};doc.addEventListener("focus",_9f,true);var _a0=function(evt){_9b._onBlurNode(_9a||evt.target);};doc.addEventListener("blur",_a0,true);return {remove:function(){doc.body.removeEventListener("mousedown",_9c,true);doc.body.removeEventListener("touchstart",_9c,true);doc.removeEventListener("focus",_9f,true);doc.removeEventListener("blur",_a0,true);doc=null;}};}}},_onBlurNode:function(){this.set("prevNode",this.curNode);this.set("curNode",null);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(_8d.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);this.prevNode=null;}),100);},_onTouchNode:function(_a1,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _a2=[];try{while(_a1){var _a3=_8a.get(_a1,"dijitPopupParent");if(_a3){_a1=_93.byId(_a3).domNode;}else{if(_a1.tagName&&_a1.tagName.toLowerCase()=="body"){if(_a1===win.body()){break;}_a1=_91.get(_a1.ownerDocument).frameElement;}else{var id=_a1.getAttribute&&_a1.getAttribute("widgetId"),_a4=id&&_93.byId(id);if(_a4&&!(by=="mouse"&&_a4.get("disabled"))){_a2.unshift(id);}_a1=_a1.parentNode;}}}}catch(e){}this._setStack(_a2,by);},_onFocusNode:function(_a5){if(!_a5){return;}if(_a5.nodeType==9){return;}this._onTouchNode(_a5);if(_a5==this.curNode){return;}this.set("curNode",_a5);},_setStack:function(_a6,by){var _a7=this.activeStack;this.set("activeStack",_a6);for(var _a8=0;_a8<Math.min(_a7.length,_a6.length);_a8++){if(_a7[_a8]!=_a6[_a8]){break;}}var _a9;for(var i=_a7.length-1;i>=_a8;i--){_a9=_93.byId(_a7[i]);if(_a9){_a9._hasBeenBlurred=true;_a9.set("focused",false);if(_a9._focusManager==this){_a9._onBlur(by);}this.emit("widget-blur",_a9,by);}}for(i=_a8;i<_a6.length;i++){_a9=_93.byId(_a6[i]);if(_a9){_a9.set("focused",true);if(_a9._focusManager==this){_a9._onFocus(by);}this.emit("widget-focus",_a9,by);}}},focus:function(_aa){if(_aa){try{_aa.focus();}catch(e){}}}});var _ab=new _95();_8e(function(){var _ac=_ab.registerWin(win.doc.parentWindow||win.doc.defaultView);if(has("ie")){_90.addOnWindowUnload(function(){_ac.remove();_ac=null;});}});_94.focus=function(_ad){_ab.focus(_ad);};for(var _ae in _ab){if(!/^_/.test(_ae)){_94.focus[_ae]=typeof _ab[_ae]=="function"?_8d.hitch(_ab,_ae):_ab[_ae];}}_ab.watch(function(_af,_b0,_b1){_94.focus[_af]=_b1;});return _ab;});},"dojo/i18n":function(){define("dojo/i18n",["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./_base/xhr"],function(_b2,_b3,has,_b4,_b5,_b6,xhr){var _b7=_b2.i18n={},_b8=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,_b9=function(_ba,_bb,_bc,_bd){for(var _be=[_bc+_bd],_bf=_bb.split("-"),_c0="",i=0;i<_bf.length;i++){_c0+=(_c0?"-":"")+_bf[i];if(!_ba||_ba[_c0]){_be.push(_bc+_c0+"/"+_bd);}}return _be;},_c1={},_c2=_b2.getL10nName=function(_c3,_c4,_c5){_c5=_c5?_c5.toLowerCase():_b2.locale;_c3="dojo/i18n!"+_c3.replace(/\./g,"/");_c4=_c4.replace(/\./g,"/");return (/root/i.test(_c5))?(_c3+"/nls/"+_c4):(_c3+"/nls/"+_c5+"/"+_c4);},_c6=function(_c7,_c8,_c9,_ca,_cb,_cc){_c7([_c8],function(_cd){var _ce=_c1[_c8+"/"]=_b6.clone(_cd.root),_cf=_b9(!_cd._v1x&&_cd,_cb,_c9,_ca);_c7(_cf,function(){for(var i=1;i<_cf.length;i++){_c1[_cf[i]]=_ce=_b6.mixin(_b6.clone(_ce),arguments[i]);}var _d0=_c8+"/"+_cb;_c1[_d0]=_ce;_cc&&_cc(_b6.delegate(_ce));});});},_d1=function(id,_d2){var _d3=_b8.exec(id),_d4=_d3[1];return /^\./.test(_d4)?_d2(_d4)+"/"+id.substring(_d4.length):id;},_d5=function(){},_d6=function(id,_d7,_d8){var _d9=_b8.exec(id),_da=_d9[1]+"/",_db=_d9[5]||_d9[4],_dc=_da+_db,_dd=(_d9[5]&&_d9[4]),_de=_dd||_b2.locale,_df=_dc+"/"+_de;if(_dd){_d5(_df);if(_c1[_df]){_d8(_c1[_df]);}else{_c6(_d7,_dc,_da,_db,_de,_d8);}return;}var _e0=_b5.extraLocale||[];_e0=_b6.isArray(_e0)?_e0:[_e0];_e0.push(_de);var _e1=_e0.length,_e2;_b4.forEach(_e0,function(_e3){_c6(_d7,_dc,_da,_db,_e3,function(_e4){if(_e3==_de){_e2=_e4;}if(!--_e1){_d8(_e2);}});});};if(has("dojo-unit-tests")){var _e5=_b7.unitTests=[];}true||has.add("dojo-v1x-i18n-Api",1);if(1){var _e6={},_e7=new Function("bundle, __evalError","var __amdResult, define = function(x){__amdResult= x;};"+"return [(function(){"+"try{eval(arguments[0]);}catch(e){}"+"if(__amdResult)return 0;"+"try{return eval('('+arguments[0]+')');}"+"catch(e){__evalError.e = e; return __evalError;}"+"})(arguments[0]) , __amdResult];"),_e8=function(url,_e9,_ea){if(_e9===_e6){return {};}return _e9?(/nls\/[^\/]+\/[^\/]+$/.test(url)?_e9:{root:_e9,_v1x:1}):_ea;},_eb=function(_ec,_ed){var _ee=[];_b4.forEach(_ec,function(mid){var url=_b3.toUrl(mid+".js");if(_c1[url]){_ee.push(_c1[url]);}else{try{var _ef=_b3(mid);if(_ef){_ee.push(_ef);return;}}catch(e){}xhr.get({url:url,sync:true,load:function(_f0){var _f1=_e7(_f0,_e6);_ee.push(_c1[url]=_e8(url,_f1[0],_f1[1]));},error:function(){_ee.push(_c1[url]={});}});}});_ed&&_ed.apply(null,_ee);},_f2=_b7.normalizeLocale=function(_f3){var _f4=_f3?_f3.toLowerCase():_b2.locale;if(_f4=="root"){_f4="ROOT";}return _f4;},_f5=function(_f6,_f7){var _f8=_f6.split("-");while(_f8.length){if(_f7(_f8.join("-"))){return true;}_f8.pop();}return _f7("ROOT");};_d5=function(_f9){for(var _fa=_f9.split("/"),_fb=_b2.global[_fa[0]],i=1;_fb&&i<_fa.length;_fb=_fb[_fa[i++]]){}if(_fb){_c1[_f9]=_fb;}};_b7.getLocalization=function(_fc,_fd,_fe){var _ff,_100=_c2(_fc,_fd,_fe).substring(10);_d6(_100,(1&&!_b3.isXdUrl(_b3.toUrl(_100+".js"))?_eb:_b3),function(_101){_ff=_101;});return _ff;};_b7._preloadLocalizations=function(_102,_103){function _104(_105){_105=_f2(_105);_f5(_105,function(loc){for(var i=0;i<_103.length;i++){if(_103[i]==loc){_eb([_102.replace(/\./g,"/")+"_"+loc]);return true;}}return false;});};_104();var _106=_b2.config.extraLocale||[];for(var i=0;i<_106.length;i++){_104(_106[i]);}};if(has("dojo-unit-tests")){_e5.push(function(doh){doh.register("tests.i18n.unit",function(t){var _107;_107=_e7("{prop:1}",_e6);t.is({prop:1},_107[0]);t.is(undefined,_107[1]);_107=_e7("({prop:1})",_e6);t.is({prop:1},_107[0]);t.is(undefined,_107[1]);_107=_e7("{'prop-x':1}",_e6);t.is({"prop-x":1},_107[0]);t.is(undefined,_107[1]);_107=_e7("({'prop-x':1})",_e6);t.is({"prop-x":1},_107[0]);t.is(undefined,_107[1]);_107=_e7("define({'prop-x':1})",_e6);t.is(0,_107[0]);t.is({"prop-x":1},_107[1]);_107=_e7("define({'prop-x':1});",_e6);t.is(0,_107[0]);t.is({"prop-x":1},_107[1]);_107=_e7("this is total nonsense and should throw an error",_e6);t.is(_e6,_107[0]);t.is(undefined,_107[1]);t.is({},_e8("some/url",_107[0],_107[1]));});});}}return _b6.mixin(_b7,{dynamic:true,normalize:_d1,load:_d6,cache:function(mid,_108){_c1[mid]=_108;}});});},"dijit/hccss":function(){define("dijit/hccss",["require","dojo/_base/config","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/ready","dojo/_base/sniff","dojo/_base/window"],function(_109,_10a,_10b,_10c,_10d,_10e,has,win){if(has("ie")||has("mozilla")){_10e(90,function(){var div=_10c.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(_10a.blankGif||_109.toUrl("dojo/resources/blank.gif"))+"\");"}},win.body());var cs=_10d.getComputedStyle(div);if(cs){var _10f=cs.backgroundImage;var _110=(cs.borderTopColor==cs.borderRightColor)||(_10f!=null&&(_10f=="none"||_10f=="url(invalid-url:)"));if(_110){_10b.add(win.body(),"dijit_a11y");}if(has("ie")){div.outerHTML="";}else{win.body().removeChild(div);}}});}});},"versa/widget/zone/mobile/Show":function(){define("versa/widget/zone/mobile/Show",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojox/mobile/Heading","dojox/mobile/ScrollableView","dojox/mobile/EdgeToEdgeDataList","dojox/mobile/TabBar","dojox/mobile/TabBarButton","versa/api/Folders","versa/api/Documents","versa/api/Zones","versa/widget/folder/mobile/FolderView","versa/widget/document/mobile/DocumentPropertyView","versa/widget/document/mobile/DocumentContentView","versa/widget/document/mobile/LargeTextView","versa/widget/search/mobile/SearchView","versa/widget/search/mobile/SearchResultsView","versa/widget/mobile/TextBox","versa/widget/mobile/Heading","versa/widget/mobile/Footing","dojox/mobile/Button","dojo/data/ItemFileWriteStore"],function(_111){var o=_111("versa.widget.zone.mobile.Show",[dijit._WidgetBase],{folderViews:[],documentViews:[],documentContentViews:[],textViews:[],constructor:function(args){this.zone=args.zone;},postCreate:function(){this.inherited("postCreate",arguments);this.folderStore=this.activeLibrary.getFolders().store;this.refStore=this.activeLibrary.getReferences().store;this.rootFolder=this.folderStore.fetch({query:{parent_id:null}}).results[0];this.loadingView=dijit.byId("loadingView");this.onLoad(this);},onCommand:function(cmd,args){switch(cmd){case versa.widget.zone.mobile.Show.COMMANDS.SHOW_FOLDER:this.showFolder(args.parent,args.folder);break;case versa.widget.zone.mobile.Show.COMMANDS.SHOW_DOCUMENT_PROPERTIES:this.showDocumentProperties(args.from,args.reference);break;case versa.widget.zone.mobile.Show.COMMANDS.SHOW_DOCUMENT_CONTENT:this.showDocumentContent(args.document,args.reference);break;case versa.widget.zone.mobile.Show.COMMANDS.SHOW_TEXT:this.showText(args.document,args.property,args.label);break;case versa.widget.zone.mobile.Show.COMMANDS.SHOW_ROOT:this.showRoot(args.from);break;case versa.widget.zone.mobile.Show.COMMANDS.SHOW_SEARCH:this.showSearch(args.from);break;case versa.widget.zone.mobile.Show.COMMANDS.PERFORM_SEARCH:this.performSearch(args.search);break;case versa.widget.zone.mobile.Show.COMMANDS.LOGOFF:this.logoff(args.from);break;}},logoff:function(from){var _112=true;if(_112){var msg="Continue to exit VersaFile?";if(!confirm(msg)){return;}}var prog=dojox.mobile.ProgressIndicator.getInstance();this.loadingView.domNode.appendChild(prog.domNode);prog.start();from.performTransition(this.loadingView.id,1,"fade");this.zone.logoff();window.location.reload(true);},showRoot:function(from){from.performTransition("folder-"+this.rootFolder.id,-1,"slidev");},showSearch:function(from){this.searchView.set("back",from.id);from.performTransition("searchView",1,"slidev");},performSearch:function(_113){this.searchResultsView.set("search",_113);this.searchView.performTransition("searchResultsView",1,"slide");},showFolder:function(_114,_115){if(!this.folderViews[_115.id]){this.folderViews[_115.id]=new versa.widget.folder.mobile.FolderView({id:"folder-"+_115.id,back:"folder-"+_114.id,library:this.activeLibrary,folder:_115,onCommand:dojo.hitch(this,this.onCommand),selected:true},dojo.create("div",{style:{height:"100%"}},dojo.body()));this.folderViews[_115.id].startup();}this.folderViews[_114.id].performTransition("folder-"+_115.id,1,"slide");},showText:function(_116,_117,_118){if(!this.textViews[_116.id+"-"+_117]){this.textViews[_116.id+"-"+_117]=new versa.widget.document.mobile.LargeTextView({id:"document-"+_116.id+"-"+_117,back:"document-"+_116.id,label:_118,library:this.activeLibrary,document:_116,property:_117,onCommand:dojo.hitch(this,this.onCommand),selected:true},dojo.create("div",{style:{height:"100%"}},dojo.body()));this.textViews[_116.id+"-"+_117].startup();}this.documentViews[_116.id].performTransition("document-"+_116.id+"-"+_117,1,"slide");},showDocumentProperties:function(from,_119){this.activeLibrary.getDocuments().refreshAsync({scope:this,identity:_119.document_id,onItem:dojo.hitch(this,function(_11a){if(!this.documentViews[_11a.id]){this.documentViews[_11a.id]=new versa.widget.document.mobile.DocumentPropertyView({id:"document-"+_11a.id,library:this.activeLibrary,reference:_119,document:_11a,onCommand:dojo.hitch(this,this.onCommand),selected:true},dojo.create("div",{style:{height:"100%"}},dojo.body()));this.documentViews[_11a.id].startup();}this.documentViews[_11a.id].set("back",from.id);from.performTransition("document-"+_11a.id,1,"slide");}),onError:this.__onDocumentLoadError});},showDocumentContent:function(_11b,_11c){if(_11c.binary_content_type.indexOf("image")>=0||_11c.binary_content_type.indexOf("text")>=0){if(!this.documentContentViews[_11c.document_id]){this.documentContentViews[_11c.document_id]=new versa.widget.document.mobile.DocumentContentView({id:"document-content-"+_11c.document_id,back:"document-"+_11c.document_id,zone:this.zone,library:this.activeLibrary,document:_11b,reference:_11c,onCommand:dojo.hitch(this,this.onCommand),selected:true},dojo.create("div",{style:{height:"100%"}},dojo.body()));this.documentContentViews[_11c.document_id].startup();}this.documentViews[_11c.document_id].performTransition("document-content-"+_11c.document_id,1,"slide");}else{var file=_11c.getCopyUrl(this.zone,this.activeLibrary);this.downloadUrl(file);}},downloadUrl:function(url){window.location.href=url;},startup:function(){this.inherited("startup",arguments);this.searchView=new versa.widget.search.mobile.SearchView({id:"searchView",back:"folder-"+this.rootFolder.id,onCommand:dojo.hitch(this,this.onCommand)},dojo.create("div",{},dojo.body()));this.searchView.startup();this.searchResultsView=new versa.widget.search.mobile.SearchResultsView({id:"searchResultsView",zone:this.zone,library:this.activeLibrary,back:"searchView",view_id:this.rootFolder.view_definition_id,onCommand:dojo.hitch(this,this.onCommand)},dojo.create("div",{style:{height:"100%",width:"100%"}},dojo.body()));this.searchResultsView.startup();this.folderViews[this.rootFolder.id]=new versa.widget.folder.mobile.FolderView({id:"folder-"+this.rootFolder.id,library:this.activeLibrary,folder:this.rootFolder,onCommand:dojo.hitch(this,this.onCommand),selected:true},dojo.create("div",{style:{height:"100%",width:"100%"}},dojo.body()));this.folderViews[this.rootFolder.id].startup();dojox.mobile.hideAddressBar();this.loadingView.performTransition(this.folderViews[this.rootFolder.id].id,1,"fade");}});o.COMMANDS={SHOW_FOLDER:0,SHOW_ROOT:1,SHOW_DOCUMENT_PROPERTIES:2,SHOW_DOCUMENT_CONTENT:3,SHOW_TEXT:4,SHOW_SEARCH:5,PERFORM_SEARCH:6,LOGOFF:7};return o;});},"dojox/mobile/EdgeToEdgeDataList":function(){define("dojox/mobile/EdgeToEdgeDataList",["dojo/_base/declare","./EdgeToEdgeList","./_DataListMixin"],function(_11d,_11e,_11f){return _11d("dojox.mobile.EdgeToEdgeDataList",[_11e,_11f],{});});},"dojox/mobile/uacss":function(){define("dojox/mobile/uacss",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/window","dojox/mobile/sniff"],function(dojo,lang,win,has){win.doc.documentElement.className+=lang.trim([has("bb")?"dj_bb":"",has("android")?"dj_android":"",has("iphone")?"dj_iphone":"",has("ipod")?"dj_ipod":"",has("ipad")?"dj_ipad":""].join(" ").replace(/ +/g," "));return dojo;});},"versa/api/DataType":function(){define("versa/api/DataType",["dojo/_base/declare"],function(_120){var o=_120("versa.api.DataType",[],{constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},defaultMaxLength:function(){var _121=null;switch(this.prefix){case "str":_121=255;break;case "txt":_121=4096;break;}return _121;},isBoolean:function(){return (this.prefix=="bln");},isDateTime:function(){return (this.prefix=="dtt");},isFloat:function(){return (this.prefix=="flt");},isInteger:function(){return (this.prefix=="int");},isString:function(){return (this.prefix=="str");},isText:function(){return (this.prefix=="txt");}});o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"prefix":{type:"string"}},prototype:new o()};return o;});},"versa/api/Zones":function(){define("versa/api/Zones",["dojo/_base/declare","versa/api/_Collection","versa/api/Zone"],function(_122){var o=_122("versa.api.Zones",[versa.api._Collection],{constructor:function(args){this.target=versa.api.Zones.TRGT;this.schema=versa.api.Zone.schema;this.cache=true;this._initialize();}});o.TRGT="/zones";return o;});},"versa/api/Search":function(){define("versa/api/Search",["dojo/_base/declare","versa/api/_Object"],function(_123){var o=_123("versa.api.Search",[versa.api._Object],{type:0,queryData:null,view_definition_id:null,_getAdvancedQuery:function(){return {type:this.type,query:dojo.toJson(this.queryData),view:this.view_definition_id};},_getFolderQuery:function(){return {type:this.type,query:this.queryData,view:this.view_definition_id};},_getSimpleQuery:function(){return {type:this.type,query:this.queryData,view:this.view_definition_id};},constructor:function(args){_123.safeMixin(this,((!args)?{}:args));},getQuery:function(){var _124={type:bfree.api.Search.types.NONE};switch(this.type){case bfree.api.Search.types.FOLDER:case bfree.api.Search.types.TRASH:_124=this._getFolderQuery();break;case bfree.api.Search.types.SIMPLE:_124=this._getSimpleQuery();break;case bfree.api.Search.types.ADVANCED:_124=this._getAdvancedQuery();break;case bfree.api.Search.types.TRASH:break;}return _124;}});o.types={"NONE":0,"FOLDER":1,"SIMPLE":2,"ADVANCED":3,"TRASH":4};return o;});},"versa/api/_Object":function(){define("versa/api/_Object",["dojo/_base/declare"],function(_125){return _125("versa.api._Object",[],{id:null,name:null,created_at:null,created_by:null,updated_at:null,updated_by:null,constructor:function(args){if((this.created_at!=null)&&(typeof this.created_at=="string")){this.created_at=dojo.date.stamp.fromISOString(this.created_at);}if((this.updated_at!=null)&&(typeof this.updated_at=="string")){this.updated_at=dojo.date.stamp.fromISOString(this.created_at);}},valueEquals:function(_126,_127){if(!this.hasOwnProperty(_126)){return false;}var _128=this[_126];if((_128==null)&&(_127==null)){return true;}if((typeof _128=="string")||(typeof _127=="string")){_128=(_128==null)?"":_128;_127=(_127==null)?"":_127;}return (_128==_127);},getId:function(){return (this.$ref?this.$ref:this.id);},isNew:function(){return ((this.id==undefined)||(this.id==null));},isValid:function(){return true;}});});},"versa/api/CellDefinition":function(){define("versa/api/CellDefinition",["dojo/_base/declare","versa/api/_Object","versa/api/Error"],function(_129){var o=_129("versa.api.CellDefinition",[versa.api._Object],{constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));}});o.clone=function(_12a){return new versa.api.CellDefinition({column_order:_12a.column_order,table_name:_12a.table_name,column_name:_12a.column_name,label:_12a.label,name:_12a.name,noresize:_12a.noresize,style:_12a.style,width:_12a.width,formatter:_12a.formatter,date_format:_12a.date_format});};o.compare=function(_12b,_12c){return _12b.column_order-_12c.column_order;};o.getDbName=function(_12d){return dojo.replace("{table_name}.{column_name}",_12d);};o.formats={"none":0,"icon":1,"size":2,"status":4,"datetime":8,"date":16,"time":32};o.formatStatus=function(data,_12e){var item=this.grid.getItem(_12e);var icon="none.16.png";try{if((item)&&(item.getState(versa.api.Document.states.CHECKED_OUT))){icon="cko.16.png";}}catch(e){}return dojo.replace("<img name=\"statusIcon\" src=\"/images/icons/states/{0}\" width=\"16\" height=\"16\" style=\"position:relative;top:1px;left:1px\"/>",[icon]);};o.formatIcon=function(data,_12f){if(!data){return "";}var item=this.grid.getItem(_12f);var _130=versa.api.Document.getIconUrl(data,16);var _131=dojo.create("div");var node=dojo.create("div",{style:{width:16,height:16,position:"relative"}},_131);dojo.create("img",{src:_130,width:16,height:16},node);if(item.isShare()){_130="/images/icons/states/shared.16.png";dojo.create("img",{src:_130,width:16,height:16,style:{position:"absolute",top:"2px",left:"2px"}},node);}return _131.innerHTML;};o.formatSize=function(data,_132){var _133=data;var _134=versa.api.Utilities.readablizeBytes({bytes:_133});return _134;};o.formatData=function(data,_135){return data||"";};o.formatBoolean=function(data,_136){var wdg=new dijit.form.CheckBox({scrollOnFocus:false,disabled:true,checked:data});return wdg;},o.schema={type:"object",properties:{"id":{type:"integer"},"view_definition_id":{type:"integer"},"table_name":{type:"string"},"column_name":{type:"string"},"name":{type:"string"},"label":{type:"string"},"formatter":{type:"integer","default":o.formats.none},"noresize":{type:"boolean","default":false},"width":{type:"string","default":"128px"},"style":{type:"string","default":""},"column_order":{type:"integer","default":1},"date_format":{type:"string","default":""}},prototype:new o()};return o;});},"versa/api/PropertyMapping":function(){define("versa/api/PropertyMapping",["dojo/_base/declare","versa/api/_Object","versa/api/Error","versa/api/Formatter"],function(_137){var o=_137("versa.api.PropertyMapping",[versa.api._Object],{constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));}});o.compare=function(_138,_139){return _138.sort_order-_139.sort_order;};o.formatValue=function(_13a,_13b){var _13c=null;if(_13a.isTypeDate()){_13c=versa.api.Formatter.formatDateTime(_13b);}else{_13c=_13b;}return _13c;};o.types={date:{fixed:0,floating:1}};o.schema={type:"object",properties:{"id":{type:"integer"},"document_type_id":{type:"integer"},"property_definition_id":{type:"integer"},"name":{type:"string","default":"Property"},"sort_order":{type:"integer","default":1},"is_required":{type:"boolean","default":false},"choice_list_id":{type:"integer","default":null},"default_value":{type:"string","default":null},"default_type":{type:"integer","default":0}}};return o;});},"versa/api/DocumentTypes":function(){define("versa/api/DocumentTypes",["dojo/_base/declare","versa/api/DocumentTypes","versa/api/_Collection","versa/api/DocumentType"],function(_13d){var o=_13d("versa.api.DocumentTypes",[versa.api._Collection],{library:null,_isUpdateable:function(_13e){return false;},_matchesQuery:function(item,_13f){if(dojo.isArray(item)||(item.hasOwnProperty("sort_order"))){return false;}var _140=_13f.query;var _141=_13f.queryOptions&&_13f.queryOptions.ignoreCase;for(var i in _140){var _142=_140[i];var _143=this.getValue(item,i);if((typeof _142=="string"&&(_142.match(/[\*\.]/)||_141))?!dojo.data.util.filter.patternToRegExp(_142,_141).test(_143):_143!=_142){return false;}}return true;},constructor:function(args){this.zone=args.zone;this.library=args.library;this.target=dojo.replace(versa.api.DocumentTypes.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.DocumentType.schema;this.cache=true;this._initialize();this.store.matchesQuery=dojo.hitch(this,this._matchesQuery);},getMetrics:function(args){var url=dojo.replace(versa.api.DocumentTypes.MT_TRGT,[args.zone.subdomain,args.library.id]);var _144=versa.api.XhrHelper.doGetAction({target:url});return _144;},getSystem:function(){var _145=[];this.forEach(function(item){if(item.is_system){_145.push(item);}},this);if(_145.length<1){throw new Error("No system-defined document types were found");}return _145;}});o.TRGT="/zones/{0}/libraries/{1}/document_types";o.MT_TRGT="/zones/{0}/libraries/{1}/document_types/dtmetrics.json";return o;});},"dojo/date/stamp":function(){define("dojo/date/stamp",["../_base/kernel","../_base/lang","../_base/array"],function(dojo,lang,_146){lang.getObject("date.stamp",true,dojo);dojo.date.stamp.fromISOString=function(_147,_148){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _149=dojo.date.stamp._isoRegExp.exec(_147),_14a=null;if(_149){_149.shift();if(_149[1]){_149[1]--;}if(_149[6]){_149[6]*=1000;}if(_148){_148=new Date(_148);_146.forEach(_146.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _148["get"+prop]();}),function(_14b,_14c){_149[_14c]=_149[_14c]||_14b;});}_14a=new Date(_149[0]||1970,_149[1]||0,_149[2]||1,_149[3]||0,_149[4]||0,_149[5]||0,_149[6]||0);if(_149[0]<100){_14a.setFullYear(_149[0]||1970);}var _14d=0,_14e=_149[7]&&_149[7].charAt(0);if(_14e!="Z"){_14d=((_149[8]||0)*60)+(Number(_149[9])||0);if(_14e!="-"){_14d*=-1;}}if(_14e){_14d-=_14a.getTimezoneOffset();}if(_14d){_14a.setTime(_14a.getTime()+_14d*60000);}}return _14a;};dojo.date.stamp.toISOString=function(_14f,_150){var _151=function(n){return (n<10)?"0"+n:n;};_150=_150||{};var _152=[],_153=_150.zulu?"getUTC":"get",date="";if(_150.selector!="time"){var year=_14f[_153+"FullYear"]();date=["0000".substr((year+"").length)+year,_151(_14f[_153+"Month"]()+1),_151(_14f[_153+"Date"]())].join("-");}_152.push(date);if(_150.selector!="date"){var time=[_151(_14f[_153+"Hours"]()),_151(_14f[_153+"Minutes"]()),_151(_14f[_153+"Seconds"]())].join(":");var _154=_14f[_153+"Milliseconds"]();if(_150.milliseconds){time+="."+(_154<100?"0":"")+_151(_154);}if(_150.zulu){time+="Z";}else{if(_150.selector!="time"){var _155=_14f.getTimezoneOffset();var _156=Math.abs(_155);time+=(_155>0?"-":"+")+_151(Math.floor(_156/60))+":"+_151(_156%60);}}_152.push(time);}return _152.join("T");};return dojo.date.stamp;});},"versa/api/Shares":function(){define("versa/api/Shares",["dojo/_base/declare","versa/api/_Collection","versa/api/Share"],function(_157){var o=_157("versa.api.Shares",[versa.api._Collection],{constructor:function(args){this.zone=args.zone;this.target=dojo.replace(versa.api.Shares.TRGT,[this.zone.subdomain]);this.schema=versa.api.Share.schema;this.cache=true;this._initialize();}});o.TRGT="/zones/{0}/shares";return o;});},"dojo/Stateful":function(){define("dojo/Stateful",["./_base/kernel","./_base/declare","./_base/lang","./_base/array"],function(dojo,_158,lang,_159){return dojo.declare("dojo.Stateful",null,{postscript:function(_15a){if(_15a){lang.mixin(this,_15a);}},get:function(name){return this[name];},set:function(name,_15b){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _15c=this[name];this[name]=_15b;if(this._watchCallbacks){this._watchCallbacks(name,_15c,_15b);}return this;},watch:function(name,_15d){var _15e=this._watchCallbacks;if(!_15e){var self=this;_15e=this._watchCallbacks=function(name,_15f,_160,_161){var _162=function(_163){if(_163){_163=_163.slice();for(var i=0,l=_163.length;i<l;i++){try{_163[i].call(self,name,_15f,_160);}catch(e){}}}};_162(_15e["_"+name]);if(!_161){_162(_15e["*"]);}};}if(!_15d&&typeof name==="function"){_15d=name;name="*";}else{name="_"+name;}var _164=_15e[name];if(typeof _164!=="object"){_164=_15e[name]=[];}_164.push(_15d);return {unwatch:function(){_164.splice(_159.indexOf(_164,_15d),1);}};}});});},"dojox/json/schema":function(){define("dojox/json/schema",["dojo/_base/kernel","dojox","dojo/_base/array"],function(dojo,_165){dojo.getObject("json.schema",true,_165);_165.json.schema.validate=function(_166,_167){return this._validate(_166,_167,false);};_165.json.schema.checkPropertyChange=function(_168,_169,_16a){return this._validate(_168,_169,_16a||"property");};_165.json.schema.mustBeValid=function(_16b){if(!_16b.valid){throw new TypeError(dojo.map(_16b.errors,function(_16c){return "for property "+_16c.property+": "+_16c.message;}).join(", "));}};_165.json.schema._validate=function(_16d,_16e,_16f){var _170=[];function _171(_172,_173,path,i){var l;path+=path?typeof i=="number"?"["+i+"]":typeof i=="undefined"?"":"."+i:i;function _174(_175){_170.push({property:path,message:_175});};if((typeof _173!="object"||_173 instanceof Array)&&(path||typeof _173!="function")){if(typeof _173=="function"){if(!(Object(_172) instanceof _173)){_174("is not an instance of the class/constructor "+_173.name);}}else{if(_173){_174("Invalid schema/property definition "+_173);}}return null;}if(_16f&&_173.readonly){_174("is a readonly field, it can not be changed");}if(_173["extends"]){_171(_172,_173["extends"],path,i);}function _176(type,_177){if(type){if(typeof type=="string"&&type!="any"&&(type=="null"?_177!==null:typeof _177!=type)&&!(_177 instanceof Array&&type=="array")&&!(type=="integer"&&_177%1===0)){return [{property:path,message:(typeof _177)+" value found, but a "+type+" is required"}];}if(type instanceof Array){var _178=[];for(var j=0;j<type.length;j++){if(!(_178=_176(type[j],_177)).length){break;}}if(_178.length){return _178;}}else{if(typeof type=="object"){var _179=_170;_170=[];_171(_177,type,path);var _17a=_170;_170=_179;return _17a;}}}return [];};if(_172===undefined){if(!_173.optional){_174("is missing and it is not optional");}}else{_170=_170.concat(_176(_173.type,_172));if(_173.disallow&&!_176(_173.disallow,_172).length){_174(" disallowed value was matched");}if(_172!==null){if(_172 instanceof Array){if(_173.items){if(_173.items instanceof Array){for(i=0,l=_172.length;i<l;i++){_170.concat(_171(_172[i],_173.items[i],path,i));}}else{for(i=0,l=_172.length;i<l;i++){_170.concat(_171(_172[i],_173.items,path,i));}}}if(_173.minItems&&_172.length<_173.minItems){_174("There must be a minimum of "+_173.minItems+" in the array");}if(_173.maxItems&&_172.length>_173.maxItems){_174("There must be a maximum of "+_173.maxItems+" in the array");}}else{if(_173.properties){_170.concat(_17b(_172,_173.properties,path,_173.additionalProperties));}}if(_173.pattern&&typeof _172=="string"&&!_172.match(_173.pattern)){_174("does not match the regex pattern "+_173.pattern);}if(_173.maxLength&&typeof _172=="string"&&_172.length>_173.maxLength){_174("may only be "+_173.maxLength+" characters long");}if(_173.minLength&&typeof _172=="string"&&_172.length<_173.minLength){_174("must be at least "+_173.minLength+" characters long");}if(typeof _173.minimum!==undefined&&typeof _172==typeof _173.minimum&&_173.minimum>_172){_174("must have a minimum value of "+_173.minimum);}if(typeof _173.maximum!==undefined&&typeof _172==typeof _173.maximum&&_173.maximum<_172){_174("must have a maximum value of "+_173.maximum);}if(_173["enum"]){var _17c=_173["enum"];l=_17c.length;var _17d;for(var j=0;j<l;j++){if(_17c[j]===_172){_17d=1;break;}}if(!_17d){_174("does not have a value in the enumeration "+_17c.join(", "));}}if(typeof _173.maxDecimal=="number"&&(_172.toString().match(new RegExp("\\.[0-9]{"+(_173.maxDecimal+1)+",}")))){_174("may only have "+_173.maxDecimal+" digits of decimal places");}}}return null;};function _17b(_17e,_17f,path,_180){if(typeof _17f=="object"){if(typeof _17e!="object"||_17e instanceof Array){_170.push({property:path,message:"an object is required"});}for(var i in _17f){if(_17f.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")){var _181=_17e[i];var _182=_17f[i];_171(_181,_182,path,i);}}}for(i in _17e){if(_17e.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&_17f&&!_17f[i]&&_180===false){_170.push({property:path,message:(typeof _181)+"The property "+i+" is not defined in the schema and the schema does not allow additional properties"});}var _183=_17f&&_17f[i]&&_17f[i].requires;if(_183&&!(_183 in _17e)){_170.push({property:path,message:"the presence of the property "+i+" requires that "+_183+" also be present"});}_181=_17e[i];if(_17f&&typeof _17f=="object"&&!(i in _17f)){_171(_181,_180,path,i);}if(!_16f&&_181&&_181.$schema){_170=_170.concat(_171(_181,_181.$schema,path,i));}}return _170;};if(_16e){_171(_16d,_16e,"",_16f||"");}if(!_16f&&_16d&&_16d.$schema){_171(_16d,_16d.$schema,"","");}return {valid:!_170.length,errors:_170};};return _165.json.schema;});},"versa/api/Zone":function(){define("versa/api/Zone",["dojo/_base/declare","versa/api/_Object","versa/api/_Configurable","versa/api/Groups","versa/api/Libraries","versa/api/Roles","versa/api/Users","versa/api/DocumentTypes","versa/api/PropertyDefinitions","versa/api/PropertyMappings","versa/api/ChoiceLists","versa/api/ViewDefinitions","versa/api/CellDefinitions","versa/api/XhrHelper","versa/api/Folders","versa/api/Shares","versa/api/Preferences"],function(_184){var o=_184("versa.api.Zone",[versa.api._Object,versa.api._Configurable],{subdomain:null,_groups:null,_libraries:null,_roles:null,_shares:null,_users:null,_documentTypes:new Array(),_propertyDefinitions:new Array(),_propertyMappings:new Array(),_choiceLists:new Array(),_choiceValues:new Array(),_cellDefinitions:new Array(),_viewDefinitions:new Array(),constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},getGroups:function(){if(!this._groups){this._groups=new versa.api.Groups({zone:this});}return this._groups;},getLibraries:function(){if(!this._libraries){this._libraries=new versa.api.Libraries({zone:this});}return this._libraries;},getMetrics:function(args){var url=dojo.replace(versa.api.Zone.MT_TRGT,[this.subdomain]);var _185=versa.api.XhrHelper.doGetAction({target:url});return _185;},getRoles:function(){if(!this._roles){this._roles=new versa.api.Roles({zone:this});}return this._roles;},getShares:function(){if(!this._shares){this._shares=new versa.api.Shares({zone:this});}return this._shares;},getUsers:function(){if(!this._users){this._users=new versa.api.Users({zone:this});}return this._users;},getPropertyDefinitions:function(_186){if(!this._propertyDefinitions[_186.id]){this._propertyDefinitions[_186.id]=new versa.api.PropertyDefinitions({zone:this,library:_186});}return this._propertyDefinitions[_186.id];},getDocumentTypes:function(_187){if(!this._documentTypes[_187.id]){this._documentTypes[_187.id]=new versa.api.DocumentTypes({zone:this,library:_187});}return this._documentTypes[_187.id];},getChoiceLists:function(_188){if(!this._choiceLists[_188.id]){this._choiceLists[_188.id]=new versa.api.ChoiceLists({zone:this,library:_188});}return this._choiceLists[_188.id];},getChoiceValues:function(_189){if(!this._choiceValues[_189.id]){this._choiceValues[_189.id]=new versa.api.ChoiceValues({zone:this,library:_189});}return this._choiceValues[_189.id];},getPropertyMappings:function(_18a){if(!this._propertyMappings[_18a.id]){this._propertyMappings[_18a.id]=new versa.api.PropertyMappings({zone:this,library:_18a});}return this._propertyMappings[_18a.id];},getCellDefinitions:function(_18b){if(!this._cellDefinitions[_18b.id]){this._cellDefinitions[_18b.id]=new versa.api.CellDefinitions({zone:this,library:_18b});}return this._cellDefinitions[_18b.id];},getViewDefinitions:function(_18c){if(!this._viewDefinitions[_18c.id]){this._viewDefinitions[_18c.id]=new versa.api.ViewDefinitions({zone:this,library:_18c,cellDefinitions:this.getCellDefinitions(_18c)});}return this._viewDefinitions[_18c.id];},isAlive:function(){var url=dojo.replace(versa.api.Zone.ISALIVE_URL,this);var _18d={};var _18e=versa.api.XhrHelper.doPostAction({target:url,postData:_18d});return true;},logon:function(_18f,_190){var url=dojo.replace(versa.api.Zone.LOGIN_URL,this);var _191={username:_18f,password:_190};var _192=versa.api.XhrHelper.doPostAction({target:url,postData:_191});return new versa.api.User(_192);},logoff:function(){var url=dojo.replace(versa.api.Zone.LOGOUT_URL,this);var _193={};var _194=versa.api.XhrHelper.doPostAction({target:url,postData:_193});return _194;},resetPassword:function(_195,_196){var url=dojo.replace(versa.api.Zone.RESET_URL,this);var _197={username:_195,email:_196};var _198=versa.api.XhrHelper.doPostAction({target:url,postData:_197});return _198;}});o.TrialStates={"EXPIRED":0,"NO_TRIAL":-1,"INFINITE":65535};o.LOGIN_URL="/zones/{subdomain}/logon.json";o.LOGOUT_URL="/zones/{subdomain}/logoff.json";o.ISALIVE_URL="/zones/{subdomain}/alive.json";o.MT_TRGT="/zones/{0}/metrics.json";o.RESET_URL="/zones/{subdomain}/reset.json";o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"subdomain":{type:"string"},"active_permissions":{type:"integer","default":0},"created_at":{type:"date",format:"date-time"},"updated_at":{type:"date",format:"date-time"}},prototype:new o()};return o;});},"dojox/data/ServiceStore":function(){define("dojox/data/ServiceStore",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array"],function(_199,lang,_19a){return _199("dojox.data.ServiceStore",lang.getObject("dojox.data.ClientFilter",0)||null,{service:null,constructor:function(_19b){this.byId=this.fetchItemByIdentity;this._index={};if(_19b){lang.mixin(this,_19b);}this.idAttribute=(_19b&&_19b.idAttribute)||(this.schema&&this.schema._idAttr);},schema:null,idAttribute:"id",labelAttribute:"label",syncMode:false,estimateCountFactor:1,getSchema:function(){return this.schema;},loadLazyValues:true,getValue:function(item,_19c,_19d){var _19e=item[_19c];return _19e||(_19c in item?_19e:item._loadObject?(dojox.rpc._sync=true)&&arguments.callee.call(this,dojox.data.ServiceStore.prototype.loadItem({item:item})||{},_19c,_19d):_19d);},getValues:function(item,_19f){var val=this.getValue(item,_19f);return val instanceof Array?val:val===undefined?[]:[val];},getAttributes:function(item){var res=[];for(var i in item){if(item.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")){res.push(i);}}return res;},hasAttribute:function(item,_1a0){return _1a0 in item;},containsValue:function(item,_1a1,_1a2){return _19a.indexOf(this.getValues(item,_1a1),_1a2)>-1;},isItem:function(item){return (typeof item=="object")&&item&&!(item instanceof Date);},isItemLoaded:function(item){return item&&!item._loadObject;},loadItem:function(args){var item;if(args.item._loadObject){args.item._loadObject(function(_1a3){item=_1a3;delete item._loadObject;var func=_1a3 instanceof Error?args.onError:args.onItem;if(func){func.call(args.scope,_1a3);}});}else{if(args.onItem){args.onItem.call(args.scope,args.item);}}return item;},_currentId:0,_processResults:function(_1a4,_1a5){if(_1a4&&typeof _1a4=="object"){var id=_1a4.__id;if(!id){if(this.idAttribute){id=_1a4[this.idAttribute];}else{id=this._currentId++;}if(id!==undefined){var _1a6=this._index[id];if(_1a6){for(var j in _1a6){delete _1a6[j];}_1a4=lang.mixin(_1a6,_1a4);}_1a4.__id=id;this._index[id]=_1a4;}}for(var i in _1a4){_1a4[i]=this._processResults(_1a4[i],_1a5).items;}var _1a7=_1a4.length;}return {totalCount:_1a5.request.count==_1a7?(_1a5.request.start||0)+_1a7*this.estimateCountFactor:_1a7,items:_1a4};},close:function(_1a8){return _1a8&&_1a8.abort&&_1a8.abort();},fetch:function(args){args=args||{};if("syncMode" in args?args.syncMode:this.syncMode){dojox.rpc._sync=true;}var self=this;var _1a9=args.scope||self;var _1aa=this.cachingFetch?this.cachingFetch(args):this._doQuery(args);_1aa.request=args;_1aa.addCallback(function(_1ab){if(args.clientFetch){_1ab=self.clientSideFetch({query:args.clientFetch,sort:args.sort,start:args.start,count:args.count},_1ab);}var _1ac=self._processResults(_1ab,_1aa);_1ab=args.results=_1ac.items;if(args.onBegin){args.onBegin.call(_1a9,_1ac.totalCount,args);}if(args.onItem){for(var i=0;i<_1ab.length;i++){args.onItem.call(_1a9,_1ab[i],args);}}if(args.onComplete){args.onComplete.call(_1a9,args.onItem?null:_1ab,args);}return _1ab;});_1aa.addErrback(args.onError&&function(err){return args.onError.call(_1a9,err,args);});args.abort=function(){_1aa.cancel();};args.store=this;return args;},_doQuery:function(args){var _1ad=typeof args.queryStr=="string"?args.queryStr:args.query;return this.service(_1ad);},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true,"dojo.data.api.Schema":this.schema};},getLabel:function(item){return this.getValue(item,this.labelAttribute);},getLabelAttributes:function(item){return [this.labelAttribute];},getIdentity:function(item){return item.__id;},getIdentityAttributes:function(item){return [this.idAttribute];},fetchItemByIdentity:function(args){var item=this._index[(args._prefix||"")+args.identity];if(item){if(item._loadObject){args.item=item;return this.loadItem(args);}else{if(args.onItem){args.onItem.call(args.scope,item);}}}else{return this.fetch({query:args.identity,onComplete:args.onItem,onError:args.onError,scope:args.scope}).results;}return item;}});});},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang",".."],function(_1ae,_1af,dom,_1b0,keys,lang,_1b1){var _1b2=_1af("dijit.form._TextBoxMixin",null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_1b3,_1b4,_1b5){var _1b6;if(_1b3!==undefined){_1b6=this.filter(_1b3);if(typeof _1b5!="string"){if(_1b6!==null&&((typeof _1b6!="number")||!isNaN(_1b6))){_1b5=this.filter(this.format(_1b6,this.constraints));}else{_1b5="";}}}if(_1b5!=null&&_1b5!=undefined&&((typeof _1b5)!="number"||!isNaN(_1b5))&&this.textbox.value!=_1b5){this.textbox.value=_1b5;this._set("displayedValue",this.get("displayedValue"));}if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_1b5);}this.inherited(arguments,[_1b6,_1b4]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_1b7){if(_1b7===null||_1b7===undefined){_1b7="";}else{if(typeof _1b7!="string"){_1b7=String(_1b7);}}this.textbox.value=_1b7;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_1b7);}},format:function(_1b8){return ((_1b8==null||_1b8==undefined)?"":(_1b8.toString?_1b8.toString():_1b8));},parse:function(_1b9){return _1b9;},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(){if(this.textDir=="auto"){this.applyTextDir(this.focusNode,this.focusNode.value);}this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var _1ba=function(e){var _1bb=e.charOrCode||e.keyCode||229;if(e.type=="keydown"){switch(_1bb){case keys.SHIFT:case keys.ALT:case keys.CTRL:case keys.META:case keys.CAPS_LOCK:return;default:if(_1bb>=65&&_1bb<=90){return;}}}if(e.type=="keypress"&&typeof _1bb!="string"){return;}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return;}}else{this.__skipInputEvent=true;}var faux=lang.mixin({},e,{charOrCode:_1bb,wasConsumed:false,preventDefault:function(){faux.wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});if(this.onInput(faux)===false){_1b0.stop(faux);}if(faux.wasConsumed){return;}setTimeout(lang.hitch(this,"_onInput",faux),0);};_1ae.forEach(["onkeydown","onkeypress","onpaste","oncut","oninput"],function(_1bc){this.connect(this.textbox,_1bc,_1ba);},this);},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=lang.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);}},_isTextSelected:function(){return this.textbox.selectionStart==this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);if(this._isTextSelected()){_1b2.selectInputText(this.textbox);}});}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);},_setTextDirAttr:function(_1bd){if(!this._created||this.textDir!=_1bd){this._set("textDir",_1bd);this.applyTextDir(this.focusNode,this.focusNode.value);}}});_1b2._setSelectionRange=_1b1._setSelectionRange=function(_1be,_1bf,stop){if(_1be.setSelectionRange){_1be.setSelectionRange(_1bf,stop);}};_1b2.selectInputText=_1b1.selectInputText=function(_1c0,_1c1,stop){_1c0=dom.byId(_1c0);if(isNaN(_1c1)){_1c1=0;}if(isNaN(stop)){stop=_1c0.value?_1c0.value.length:0;}try{_1c0.focus();_1b2._setSelectionRange(_1c0,_1c1,stop);}catch(e){}};return _1b2;});},"versa/api/Acl":function(){define("versa/api/Acl",["dojo/_base/declare"],function(_1c2){var o=_1c2("versa.api.Acl",[],{id:null,inherited:false,acl_entries:[],constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},getAdministrator:function(){for(var i=0;i<this.acl_entries.length;i++){var _1c3=this.acl_entries[i];if((_1c3.grantee_type.toLowerCase()=="group")&&(_1c3.grantee.name.toLowerCase()=="administrators")){return this.acl_entries[i];}}},getEveryone:function(zone){var _1c4=null;dojo.some(this.acl_entries,function(_1c5,idx){var _1c6=(_1c5.grantee_type.toLowerCase()=="group")?zone.getGroups().fetchById({id:_1c5.grantee_id}):zone.getUsers().fetchById({id:_1c5.grantee_id});if(_1c6.isInstanceOf(versa.api.Group)&&_1c6.is_everyone){_1c4=_1c5;}return (_1c4!=null);},this);return _1c4;},hasAccess:function(zone,_1c7,_1c8){var _1c9=Number.NaN;var _1ca=Number.NaN;var _1cb=Number.NaN;dojo.forEach(this.acl_entries,function(_1cc,idx){var role=zone.getRoles().fetchById({id:_1cc.role_id});var _1cd=(_1cc.grantee_type.toLowerCase()=="group")?zone.getGroups().fetchById({id:_1cc.grantee_id}):zone.getUsers().fetchById({id:_1cc.grantee_id});if((_1cd.isInstanceOf(versa.api.User))&&(_1cc.grantee_id==_1c7.id)){_1c9=role.permissions;}else{if((_1cd.isInstanceOf(versa.api.Group))&&(_1cc.grantee_id==_1c8.id)){_1ca=role.permissions;}else{if((_1cd.isInstanceOf(versa.api.Group))&&(_1cd.is_everyone)){_1cb=role.permissions;}}}},this);if(!isNaN(_1c9)){return (_1c9>0);}if(!isNaN(_1ca)){return (_1ca>0);}if(!isNaN(_1cb)){return (_1cb>0);}return false;}});o.schema={type:"object",properties:{"id":{type:"integer"},"inherit_state":{type:"integer"},"inherited":{type:"boolean","default":false}},prototype:new o()};return o;});},"dojox/mobile/Heading":function(){define("dojox/mobile/Heading",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dijit/registry","dijit/_Contained","dijit/_Container","dijit/_WidgetBase","./View"],function(_1ce,_1cf,_1d0,lang,win,_1d1,_1d2,_1d3,_1d4,_1d5,_1d6,_1d7,View){var dm=lang.getObject("dojox.mobile",true);return _1d0("dojox.mobile.Heading",[_1d7,_1d6,_1d5],{back:"",href:"",moveTo:"",transition:"slide",label:"",iconBase:"",backProp:{className:"mblArrowButton"},tag:"H1",buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||win.doc.createElement(this.tag);this.domNode.className="mblHeading";if(!this.label){_1ce.forEach(this.domNode.childNodes,function(n){if(n.nodeType==3){var v=lang.trim(n.nodeValue);if(v){this.label=v;this.labelNode=_1d2.create("SPAN",{innerHTML:v},n,"replace");}}},this);}if(!this.labelNode){this.labelNode=_1d2.create("SPAN",null,this.domNode);}this.labelNode.className="mblHeadingSpanTitle";this.labelDivNode=_1d2.create("DIV",{className:"mblHeadingDivTitle",innerHTML:this.labelNode.innerHTML},this.domNode);},startup:function(){if(this._started){return;}var _1d8=this.getParent&&this.getParent();if(!_1d8||!_1d8.resize){var _1d9=this;setTimeout(function(){_1d9.resize();},0);}this.inherited(arguments);},resize:function(){if(this._btn){this._btn.style.width=this._body.offsetWidth+this._head.offsetWidth+"px";}if(this.labelNode){var _1da,_1db;var _1dc=this.containerNode.childNodes;for(var i=_1dc.length-1;i>=0;i--){var c=_1dc[i];if(c.nodeType===1){if(!_1db&&_1d1.contains(c,"mblToolBarButton")&&_1d3.get(c,"float")==="right"){_1db=c;}if(!_1da&&(_1d1.contains(c,"mblToolBarButton")&&_1d3.get(c,"float")==="left"||c===this._btn)){_1da=c;}}}if(!this.labelNodeLen&&this.label){this.labelNode.style.display="inline";this.labelNodeLen=this.labelNode.offsetWidth;this.labelNode.style.display="";}var bw=this.domNode.offsetWidth;var rw=_1db?bw-_1db.offsetLeft+5:0;var lw=_1da?_1da.offsetLeft+_1da.offsetWidth+5:0;var tw=this.labelNodeLen||0;_1d1[bw-Math.max(rw,lw)*2>tw?"add":"remove"](this.domNode,"mblHeadingCenterTitle");}_1ce.forEach(this.getChildren(),function(_1dd){if(_1dd.resize){_1dd.resize();}});},_setBackAttr:function(back){if(!back){_1d2.destroy(this._btn);this._btn=null;this.back="";}else{if(!this._btn){var btn=_1d2.create("DIV",this.backProp,this.domNode,"first");var head=_1d2.create("DIV",{className:"mblArrowButtonHead"},btn);var body=_1d2.create("DIV",{className:"mblArrowButtonBody mblArrowButtonText"},btn);this._body=body;this._head=head;this._btn=btn;this.backBtnNode=btn;this.connect(body,"onclick","onClick");}this.back=back;this._body.innerHTML=this._cv?this._cv(this.back):this.back;}this.resize();},_setLabelAttr:function(_1de){this.label=_1de;this.labelNode.innerHTML=this.labelDivNode.innerHTML=this._cv?this._cv(_1de):_1de;},findCurrentView:function(){var w=this;while(true){w=w.getParent();if(!w){return null;}if(w instanceof View){break;}}return w;},onClick:function(e){var h1=this.domNode;_1d1.add(h1,"mblArrowButtonSelected");setTimeout(function(){_1d1.remove(h1,"mblArrowButtonSelected");},1000);if(this.back&&!this.moveTo&&!this.href&&history){history.back();return;}var view=this.findCurrentView();if(view){view.clickedPosX=e.clientX;view.clickedPosY=e.clientY;}this.goTo(this.moveTo,this.href);},goTo:function(_1df,href){var view=this.findCurrentView();if(!view){return;}if(href){view.performTransition(null,-1,this.transition,this,function(){location.href=href;});}else{if(dm.app&&dm.app.STAGE_CONTROLLER_ACTIVE){_1cf.publish("/dojox/mobile/app/goback");}else{var node=_1d4.byId(view.convertToId(_1df));if(node){var _1e0=node.getParent();while(view){var _1e1=view.getParent();if(_1e0===_1e1){break;}view=_1e1;}}if(view){view.performTransition(_1df,-1,this.transition);}}}}});});},"dojox/mobile/TransitionEvent":function(){define("dojox/mobile/TransitionEvent",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/on","./transition"],function(_1e2,_1e3,lang,on,_1e4){return _1e2("dojox.mobile.TransitionEvent",null,{constructor:function(_1e5,_1e6,_1e7){this.transitionOptions=_1e6;this.target=_1e5;this.triggerEvent=_1e7||null;},dispatch:function(){var opts={bubbles:true,cancelable:true,detail:this.transitionOptions,triggerEvent:this.triggerEvent};var evt=on.emit(this.target,"startTransition",opts);if(evt){_1e3.when(_1e4,lang.hitch(this,function(_1e8){_1e3.when(_1e8.call(this,evt),lang.hitch(this,function(_1e9){this.endTransition(_1e9);}));}));}},endTransition:function(_1ea){on.emit(this.target,"endTransition",{detail:_1ea.transitionOptions});}});});},"dijit/main":function(){define("dijit/main",["dojo/_base/kernel"],function(dojo){return dojo.dijit;});},"versa/api/DataTypes":function(){define("versa/api/DataTypes",["dojo/_base/declare","versa/api/DataType","versa/api/_Collection"],function(_1eb){var o=_1eb("versa.api.DataTypes",[versa.api._Collection],{constructor:function(args){this.zone=null;this.target=versa.api.DataTypes.TRGT;this.schema=versa.api.DataType.schema;this.cache=true;this._initialize();}});o.types={"VOID":0,"BOOLEAN":1,"INTEGER":2,"FLOAT":3,"DATETIME":4,"STRING":5,"TEXT":6};o.TRGT="/data_types";return o;});},"versa/api/DocumentType":function(){define("versa/api/DocumentType",["dojo/_base/declare","versa/api/_Object","versa/api/XhrHelper","versa/api/PropertyMapping"],function(_1ec){var o=_1ec("versa.api.DocumentType",[versa.api._Object],{constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},getMetrics:function(args){var url=dojo.replace(versa.api.DocumentType.MT_TRGT,[args.zone.subdomain,args.library.id,this.id]);var _1ed=versa.api.XhrHelper.doGetAction({target:url});return true;},hasProperty:function(id){var has=dojo.some(this.property_mappings,function(_1ee,idx){return (_1ee.property_definition_id==id);},this);return has;},isValid:function(){var _1ef=true;if(String.isEmpty(this.name.trim())){_1ef=false;}return _1ef;}});o.MT_TRGT="/zones/{0}/libraries/{1}/document_types/{2}/dtmetrics.json";o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"is_system":{type:"boolean","default":false},"property_mappings":{type:"array","default":[],items:{type:"object",properties:{"property_definition_id":{type:"integer"},"choice_list_id":{type:"integer"},"default_value":{type:"string"},"is_required":{type:"boolean"},"sort_order":{type:"integer"},prototype:new versa.api.PropertyMapping()}}},"created_at":{type:"date",format:"date-time"},"created_by":{type:"string"},"description":{type:"string","default":""},"updated_at":{type:"date",format:"date-time"},"updated_by":{type:"string"}},prototype:new o()};return o;});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/sniff","dojo/_base/unload","dojo/_base/window"],function(on,_1f0,keys,_1f1,has,_1f2,win){var _1f3=null;if(has("ie")){(function(){var _1f4=function(evt){_1f3=evt.srcElement;};win.doc.attachEvent("onkeydown",_1f4);_1f2.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_1f4);});})();}else{win.doc.addEventListener("keydown",function(evt){_1f3=evt.target;},true);}var _1f5=function(node,_1f6){if(/input|button/i.test(node.nodeName)){return on(node,"click",_1f6);}else{function _1f7(e){return (e.keyCode==keys.ENTER||e.keyCode==keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};var _1f8=[on(node,"keypress",function(e){if(_1f7(e)){_1f3=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_1f7(e)&&e.target==_1f3){_1f3=null;_1f6.call(this,e);}}),on(node,"click",function(e){_1f6.call(this,e);})];return {remove:function(){_1f0.forEach(_1f8,function(h){h.remove();});}};}};return _1f1("dijit._OnDijitClickMixin",null,{connect:function(obj,_1f9,_1fa){return this.inherited(arguments,[obj,_1f9=="ondijitclick"?_1f5:_1f9,_1fa]);}});});},"dojox/mobile/ScrollableView":function(){define("dojox/mobile/ScrollableView",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dijit/registry","./View","./_ScrollableMixin"],function(_1fb,_1fc,_1fd,_1fe,_1ff,View,_200){return _1fc("dojox.mobile.ScrollableView",[View,_200],{scrollableParams:null,keepScrollPos:false,constructor:function(){this.scrollableParams={noResize:true};},buildRendering:function(){this.inherited(arguments);_1fd.add(this.domNode,"mblScrollableView");this.domNode.style.overflow="hidden";this.domNode.style.top="0px";this.containerNode=_1fe.create("DIV",{className:"mblScrollableViewContainer"},this.domNode);this.containerNode.style.position="absolute";this.containerNode.style.top="0px";if(this.scrollDir==="v"){this.containerNode.style.width="100%";}this.reparent();this.findAppBars();},resize:function(){this.inherited(arguments);_1fb.forEach(this.getChildren(),function(_201){if(_201.resize){_201.resize();}});},isTopLevel:function(e){var _202=this.getParent&&this.getParent();return (!_202||!_202.resize);},addChild:function(_203,_204){var c=_203.domNode;var _205=this.checkFixedBar(c,true);if(_205){this.domNode.appendChild(c);if(_205==="top"){this.fixedHeaderHeight=c.offsetHeight;this.isLocalHeader=true;}else{if(_205==="bottom"){this.fixedFooterHeight=c.offsetHeight;this.isLocalFooter=true;c.style.bottom="0px";}}this.resize();if(this._started&&!_203._started){_203.startup();}}else{this.inherited(arguments);}},reparent:function(){var i,idx,len,c;for(i=0,idx=0,len=this.domNode.childNodes.length;i<len;i++){c=this.domNode.childNodes[idx];if(c===this.containerNode||this.checkFixedBar(c,true)){idx++;continue;}this.containerNode.appendChild(this.domNode.removeChild(c));}},onAfterTransitionIn:function(_206,dir,_207,_208,_209){this.flashScrollBar();},getChildren:function(){var _20a=this.inherited(arguments);if(this.fixedHeader&&this.fixedHeader.parentNode===this.domNode){_20a.push(_1ff.byNode(this.fixedHeader));}if(this.fixedFooter&&this.fixedFooter.parentNode===this.domNode){_20a.push(_1ff.byNode(this.fixedFooter));}return _20a;}});});},"dojox/rpc/JsonRest":function(){define("dojox/rpc/JsonRest",["dojo","dojox","dojox/json/ref","dojox/rpc/Rest"],function(dojo,_20b){var _20c=[];var Rest=_20b.rpc.Rest;var jr;function _20d(_20e,_20f,_210,_211){var _212=_20f.ioArgs&&_20f.ioArgs.xhr&&_20f.ioArgs.xhr.getResponseHeader("Last-Modified");if(_212&&Rest._timeStamps){Rest._timeStamps[_211]=_212;}var _213=_20e._schema&&_20e._schema.hrefProperty;if(_213){_20b.json.ref.refAttribute=_213;}_210=_210&&_20b.json.ref.resolveJson(_210,{defaultId:_211,index:Rest._index,timeStamps:_212&&Rest._timeStamps,time:_212,idPrefix:_20e.servicePath.replace(/[^\/]*$/,""),idAttribute:jr.getIdAttribute(_20e),schemas:jr.schemas,loader:jr._loader,idAsRef:_20e.idAsRef,assignAbsoluteIds:true});_20b.json.ref.refAttribute="$ref";return _210;};jr=_20b.rpc.JsonRest={serviceClass:_20b.rpc.Rest,conflictDateHeader:"If-Unmodified-Since",commit:function(_214){_214=_214||{};var _215=[];var _216={};var _217=[];for(var i=0;i<_20c.length;i++){var _218=_20c[i];var _219=_218.object;var old=_218.old;var _21a=false;if(!(_214.service&&(_219||old)&&(_219||old).__id.indexOf(_214.service.servicePath))&&_218.save){delete _219.__isDirty;if(_219){if(old){var _21b;if((_21b=_219.__id.match(/(.*)#.*/))){_219=Rest._index[_21b[1]];}if(!(_219.__id in _216)){_216[_219.__id]=_219;if(_214.incrementalUpdates&&!_21b){var _21c=(typeof _214.incrementalUpdates=="function"?_214.incrementalUpdates:function(){_21c={};for(var j in _219){if(_219.hasOwnProperty(j)){if(_219[j]!==old[j]){_21c[j]=_219[j];}}else{if(old.hasOwnProperty(j)){return null;}}}return _21c;})(_219,old);}if(_21c){_215.push({method:"post",target:_219,content:_21c});}else{_215.push({method:"put",target:_219,content:_219});}}}else{var _21d=jr.getServiceAndId(_219.__id).service;var _21e=jr.getIdAttribute(_21d);if((_21e in _219)&&!_214.alwaysPostNewItems){_215.push({method:"put",target:_219,content:_219});}else{_215.push({method:"post",target:{__id:_21d.servicePath},content:_219});}}}else{if(old){_215.push({method:"delete",target:old});}}_217.push(_218);_20c.splice(i--,1);}}dojo.connect(_214,"onError",function(){if(_214.revertOnError!==false){var _21f=_20c;_20c=_217;var _220=0;jr.revert();_20c=_21f;}else{_20c=dirtyObject.concat(_217);}});jr.sendToServer(_215,_214);return _215;},sendToServer:function(_221,_222){var _223;var _224=dojo.xhr;var left=_221.length;var i,_225;var _226;var _227=this.conflictDateHeader;dojo.xhr=function(_228,args){args.headers=args.headers||{};args.headers["Transaction"]=_221.length-1==i?"commit":"open";if(_227&&_226){args.headers[_227]=_226;}if(_225){args.headers["Content-ID"]="<"+_225+">";}return _224.apply(dojo,arguments);};for(i=0;i<_221.length;i++){var _229=_221[i];_20b.rpc.JsonRest._contentId=_229.content&&_229.content.__id;var _22a=_229.method=="post";_226=_229.method=="put"&&Rest._timeStamps[_229.content.__id];if(_226){Rest._timeStamps[_229.content.__id]=(new Date())+"";}_225=_22a&&_20b.rpc.JsonRest._contentId;var _22b=jr.getServiceAndId(_229.target.__id);var _22c=_22b.service;var dfd=_229.deferred=_22c[_229.method](_22b.id.replace(/#/,""),_20b.json.ref.toJson(_229.content,false,_22c.servicePath,true));(function(_22d,dfd,_22e){dfd.addCallback(function(_22f){try{var _230=dfd.ioArgs.xhr&&dfd.ioArgs.xhr.getResponseHeader("Location");if(_230){var _231=_230.match(/(^\w+:\/\/)/)&&_230.indexOf(_22e.servicePath);_230=_231>0?_230.substring(_231):(_22e.servicePath+_230).replace(/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,"$2$3");_22d.__id=_230;Rest._index[_230]=_22d;}_22f=_20d(_22e,dfd,_22f,_22d&&_22d.__id);}catch(e){}if(!(--left)){if(_222.onComplete){_222.onComplete.call(_222.scope,_221);}}return _22f;});})(_229.content,dfd,_22c);dfd.addErrback(function(_232){left=-1;_222.onError.call(_222.scope,_232);});}dojo.xhr=_224;},getDirtyObjects:function(){return _20c;},revert:function(_233){for(var i=_20c.length;i>0;){i--;var _234=_20c[i];var _235=_234.object;var old=_234.old;var _236=_20b.data._getStoreForItem(_235||old);if(!(_233&&(_235||old)&&(_235||old).__id.indexOf(_233.servicePath))){if(_235&&old){for(var j in old){if(old.hasOwnProperty(j)&&_235[j]!==old[j]){if(_236){_236.onSet(_235,j,_235[j],old[j]);}_235[j]=old[j];}}for(j in _235){if(!old.hasOwnProperty(j)){if(_236){_236.onSet(_235,j,_235[j]);}delete _235[j];}}}else{if(!old){if(_236){_236.onDelete(_235);}}else{if(_236){_236.onNew(old);}}}delete (_235||old).__isDirty;_20c.splice(i,1);}}},changing:function(_237,_238){if(!_237.__id){return;}_237.__isDirty=true;for(var i=0;i<_20c.length;i++){var _239=_20c[i];if(_237==_239.object){if(_238){_239.object=false;if(!this._saveNotNeeded){_239.save=true;}}return;}}var old=_237 instanceof Array?[]:{};for(i in _237){if(_237.hasOwnProperty(i)){old[i]=_237[i];}}_20c.push({object:!_238&&_237,old:old,save:!this._saveNotNeeded});},deleteObject:function(_23a){this.changing(_23a,true);},getConstructor:function(_23b,_23c){if(typeof _23b=="string"){var _23d=_23b;_23b=new _20b.rpc.Rest(_23b,true);this.registerService(_23b,_23d,_23c);}if(_23b._constructor){return _23b._constructor;}_23b._constructor=function(data){var self=this;var args=arguments;var _23e;var _23f;function _240(_241){if(_241){_240(_241["extends"]);_23e=_241.properties;for(var i in _23e){var _242=_23e[i];if(_242&&(typeof _242=="object")&&("default" in _242)){self[i]=_242["default"];}}}if(_241&&_241.prototype&&_241.prototype.initialize){_23f=true;_241.prototype.initialize.apply(self,args);}};_240(_23b._schema);if(!_23f&&data&&typeof data=="object"){dojo.mixin(self,data);}var _243=jr.getIdAttribute(_23b);Rest._index[this.__id=this.__clientId=_23b.servicePath+(this[_243]||Math.random().toString(16).substring(2,14)+"@"+((_20b.rpc.Client&&_20b.rpc.Client.clientId)||"client"))]=this;if(_20b.json.schema&&_23e){_20b.json.schema.mustBeValid(_20b.json.schema.validate(this,_23b._schema));}_20c.push({object:this,save:true});};return dojo.mixin(_23b._constructor,_23b._schema,{load:_23b});},fetch:function(_244){var _245=jr.getServiceAndId(_244);return this.byId(_245.service,_245.id);},getIdAttribute:function(_246){var _247=_246._schema;var _248;if(_247){if(!(_248=_247._idAttr)){for(var i in _247.properties){if(_247.properties[i].identity||(_247.properties[i].link=="self")){_247._idAttr=_248=i;}}}}return _248||"id";},getServiceAndId:function(_249){var _24a="";for(var _24b in jr.services){if((_249.substring(0,_24b.length)==_24b)&&(_24b.length>=_24a.length)){_24a=_24b;}}if(_24a){return {service:jr.services[_24a],id:_249.substring(_24a.length)};}var _24c=_249.match(/^(.*\/)([^\/]*)$/);return {service:new jr.serviceClass(_24c[1],true),id:_24c[2]};},services:{},schemas:{},registerService:function(_24d,_24e,_24f){_24e=_24d.servicePath=_24e||_24d.servicePath;_24d._schema=jr.schemas[_24e]=_24f||_24d._schema||{};jr.services[_24e]=_24d;},byId:function(_250,id){var _251,_252=Rest._index[(_250.servicePath||"")+id];if(_252&&!_252._loadObject){_251=new dojo.Deferred();_251.callback(_252);return _251;}return this.query(_250,id);},query:function(_253,id,args){var _254=_253(id,args);_254.addCallback(function(_255){if(_255.nodeType&&_255.cloneNode){return _255;}return _20d(_253,_254,_255,typeof id!="string"||(args&&(args.start||args.count))?undefined:id);});return _254;},_loader:function(_256){var _257=jr.getServiceAndId(this.__id);var self=this;jr.query(_257.service,_257.id).addBoth(function(_258){if(_258==self){delete _258.$ref;delete _258._loadObject;}else{self._loadObject=function(_259){_259(_258);};}_256(_258);});},isDirty:function(item,_25a){if(!item){if(_25a){return dojo.some(_20c,function(_25b){return _20b.data._getStoreForItem(_25b.object||_25b.old)==_25a;});}return !!_20c.length;}return item.__isDirty;}};return _20b.rpc.JsonRest;});},"dojo/data/ItemFileWriteStore":function(){define("dojo/data/ItemFileWriteStore",["../_base/lang","../_base/declare","../_base/array","../_base/json","../_base/window","./ItemFileReadStore","../date/stamp"],function(lang,_25c,_25d,_25e,_25f,_260,_261){return _25c("dojo.data.ItemFileWriteStore",_260,{constructor:function(_262){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return _261.toISOString(obj,{zulu:true});};}if(_262&&(_262.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_263){if(!_263){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"];},newItem:function(_264,_265){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _264!="object"&&typeof _264!="undefined"){throw new Error("newItem() was passed something other than an object");}var _266=null;var _267=this._getIdentifierAttribute();if(_267===Number){_266=this._arrayOfAllItems.length;}else{_266=_264[_267];if(typeof _266==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(lang.isArray(_266)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_266]==="undefined");}this._assert(typeof this._pending._newItems[_266]==="undefined");this._assert(typeof this._pending._deletedItems[_266]==="undefined");var _268={};_268[this._storeRefPropName]=this;_268[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_266]=_268;_268[_267]=[_266];}this._arrayOfAllItems.push(_268);var _269=null;if(_265&&_265.parent&&_265.attribute){_269={item:_265.parent,attribute:_265.attribute,oldValue:undefined};var _26a=this.getValues(_265.parent,_265.attribute);if(_26a&&_26a.length>0){var _26b=_26a.slice(0,_26a.length);if(_26a.length===1){_269.oldValue=_26a[0];}else{_269.oldValue=_26a.slice(0,_26a.length);}_26b.push(_268);this._setValueOrValues(_265.parent,_265.attribute,_26b,false);_269.newValue=this.getValues(_265.parent,_265.attribute);}else{this._setValueOrValues(_265.parent,_265.attribute,_268,false);_269.newValue=_268;}}else{_268[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_268);}this._pending._newItems[_266]=_268;for(var key in _264){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _26c=_264[key];if(!lang.isArray(_26c)){_26c=[_26c];}_268[key]=_26c;if(this.referenceIntegrity){for(var i=0;i<_26c.length;i++){var val=_26c[i];if(this.isItem(val)){this._addReferenceToMap(val,_268,key);}}}}this.onNew(_268,_269);return _268;},_removeArrayElement:function(_26d,_26e){var _26f=_25d.indexOf(_26d,_26e);if(_26f!=-1){_26d.splice(_26f,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _270=item[this._itemNumPropName];var _271=this.getIdentity(item);if(this.referenceIntegrity){var _272=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=lang.clone(item[this._reverseRefMap]);}_25d.forEach(_272,function(_273){_25d.forEach(this.getValues(item,_273),function(_274){if(this.isItem(_274)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_274),attr:_273});this._removeReferenceFromMap(_274,item,_273);}},this);},this);var _275=item[this._reverseRefMap];if(_275){for(var _276 in _275){var _277=null;if(this._itemsByIdentity){_277=this._itemsByIdentity[_276];}else{_277=this._arrayOfAllItems[_276];}if(_277){for(var _278 in _275[_276]){var _279=this.getValues(_277,_278)||[];var _27a=_25d.filter(_279,function(_27b){return !(this.isItem(_27b)&&this.getIdentity(_27b)==_271);},this);this._removeReferenceFromMap(item,_277,_278);if(_27a.length<_279.length){this._setValueOrValues(_277,_278,_27a,true);}}}}}}this._arrayOfAllItems[_270]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_271];}this._pending._deletedItems[_271]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_27c,_27d){return this._setValueOrValues(item,_27c,_27d,true);},setValues:function(item,_27e,_27f){return this._setValueOrValues(item,_27e,_27f,true);},unsetAttribute:function(item,_280){return this._setValueOrValues(item,_280,[],true);},_setValueOrValues:function(item,_281,_282,_283){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(lang.isString(_281));this._assert(typeof _282!=="undefined");var _284=this._getIdentifierAttribute();if(_281==_284){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _285=this._getValueOrValues(item,_281);var _286=this.getIdentity(item);if(!this._pending._modifiedItems[_286]){var _287={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_287[key]=item[key];}else{if(key===this._reverseRefMap){_287[key]=lang.clone(item[key]);}else{_287[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_286]=_287;}var _288=false;if(lang.isArray(_282)&&_282.length===0){_288=delete item[_281];_282=undefined;if(this.referenceIntegrity&&_285){var _289=_285;if(!lang.isArray(_289)){_289=[_289];}for(var i=0;i<_289.length;i++){var _28a=_289[i];if(this.isItem(_28a)){this._removeReferenceFromMap(_28a,item,_281);}}}}else{var _28b;if(lang.isArray(_282)){_28b=_282.slice(0,_282.length);}else{_28b=[_282];}if(this.referenceIntegrity){if(_285){var _289=_285;if(!lang.isArray(_289)){_289=[_289];}var map={};_25d.forEach(_289,function(_28c){if(this.isItem(_28c)){var id=this.getIdentity(_28c);map[id.toString()]=true;}},this);_25d.forEach(_28b,function(_28d){if(this.isItem(_28d)){var id=this.getIdentity(_28d);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_28d,item,_281);}}},this);for(var rId in map){var _28e;if(this._itemsByIdentity){_28e=this._itemsByIdentity[rId];}else{_28e=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_28e,item,_281);}}else{for(var i=0;i<_28b.length;i++){var _28a=_28b[i];if(this.isItem(_28a)){this._addReferenceToMap(_28a,item,_281);}}}}item[_281]=_28b;_288=true;}if(_283){this.onSet(item,_281,_285,_282);}return _288;},_addReferenceToMap:function(_28f,_290,_291){var _292=this.getIdentity(_290);var _293=_28f[this._reverseRefMap];if(!_293){_293=_28f[this._reverseRefMap]={};}var _294=_293[_292];if(!_294){_294=_293[_292]={};}_294[_291]=true;},_removeReferenceFromMap:function(_295,_296,_297){var _298=this.getIdentity(_296);var _299=_295[this._reverseRefMap];var _29a;if(_299){for(_29a in _299){if(_29a==_298){delete _299[_29a][_297];if(this._isEmpty(_299[_29a])){delete _299[_29a];}}}if(this._isEmpty(_299)){delete _295[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){}}},_getValueOrValues:function(item,_29b){var _29c=undefined;if(this.hasAttribute(item,_29b)){var _29d=this.getValues(item,_29b);if(_29d.length==1){_29c=_29d[0];}else{_29c=_29d;}}return _29c;},_flatten:function(_29e){if(this.isItem(_29e)){return {_reference:this.getIdentity(_29e)};}else{if(typeof _29e==="object"){for(var type in this._datatypeMap){var _29f=this._datatypeMap[type];if(lang.isObject(_29f)&&!lang.isFunction(_29f)){if(_29e instanceof _29f.type){if(!_29f.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_29f.serialize(_29e)};}}else{if(_29e instanceof _29f){return {_type:type,_value:_29e.toString()};}}}}return _29e;}},_getNewFileContentString:function(){var _2a0={};var _2a1=this._getIdentifierAttribute();if(_2a1!==Number){_2a0.identifier=_2a1;}if(this._labelAttr){_2a0.label=this._labelAttr;}_2a0.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _2a2={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _2a3=this.getValues(item,key);if(_2a3.length==1){_2a2[key]=this._flatten(_2a3[0]);}else{var _2a4=[];for(var j=0;j<_2a3.length;++j){_2a4.push(this._flatten(_2a3[j]));_2a2[key]=_2a4;}}}}_2a0.items.push(_2a2);}}var _2a5=true;return _25e.toJson(_2a0,_2a5);},_isEmpty:function(_2a6){var _2a7=true;if(lang.isObject(_2a6)){var i;for(i in _2a6){_2a7=false;break;}}else{if(lang.isArray(_2a6)){if(_2a6.length>0){_2a7=false;}}}return _2a7;},save:function(_2a8){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _2a9=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_2a8&&_2a8.onComplete){var _2aa=_2a8.scope||_25f.global;_2a8.onComplete.call(_2aa);}};var _2ab=function(err){self._saveInProgress=false;if(_2a8&&_2a8.onError){var _2ac=_2a8.scope||_25f.global;_2a8.onError.call(_2ac,err);}};if(this._saveEverything){var _2ad=this._getNewFileContentString();this._saveEverything(_2a9,_2ab,_2ad);}if(this._saveCustom){this._saveCustom(_2a9,_2ab);}if(!this._saveEverything&&!this._saveCustom){_2a9();}},revert:function(){this._assert(!this._saveInProgress);var _2ae;for(_2ae in this._pending._modifiedItems){var _2af=this._pending._modifiedItems[_2ae];var _2b0=null;if(this._itemsByIdentity){_2b0=this._itemsByIdentity[_2ae];}else{_2b0=this._arrayOfAllItems[_2ae];}_2af[this._storeRefPropName]=this;for(var key in _2b0){delete _2b0[key];}lang.mixin(_2b0,_2af);}var _2b1;for(_2ae in this._pending._deletedItems){_2b1=this._pending._deletedItems[_2ae];_2b1[this._storeRefPropName]=this;var _2b2=_2b1[this._itemNumPropName];if(_2b1["backup_"+this._reverseRefMap]){_2b1[this._reverseRefMap]=_2b1["backup_"+this._reverseRefMap];delete _2b1["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_2b2]=_2b1;if(this._itemsByIdentity){this._itemsByIdentity[_2ae]=_2b1;}if(_2b1[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_2b1);}}for(_2ae in this._pending._deletedItems){_2b1=this._pending._deletedItems[_2ae];if(_2b1["backupRefs_"+this._reverseRefMap]){_25d.forEach(_2b1["backupRefs_"+this._reverseRefMap],function(_2b3){var _2b4;if(this._itemsByIdentity){_2b4=this._itemsByIdentity[_2b3.id];}else{_2b4=this._arrayOfAllItems[_2b3.id];}this._addReferenceToMap(_2b4,_2b1,_2b3.attr);},this);delete _2b1["backupRefs_"+this._reverseRefMap];}}for(_2ae in this._pending._newItems){var _2b5=this._pending._newItems[_2ae];_2b5[this._storeRefPropName]=null;this._arrayOfAllItems[_2b5[this._itemNumPropName]]=null;if(_2b5[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_2b5);}if(this._itemsByIdentity){delete this._itemsByIdentity[_2ae];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _2b6=this.getIdentity(item);return new Boolean(this._pending._newItems[_2b6]||this._pending._modifiedItems[_2b6]||this._pending._deletedItems[_2b6]).valueOf();}else{return !this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems);}},onSet:function(item,_2b7,_2b8,_2b9){},onNew:function(_2ba,_2bb){},onDelete:function(_2bc){},close:function(_2bd){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}});});},"versa/api/Application":function(){define("versa/api/Application",["dojo/_base/declare","versa/api/DataTypes","versa/api/Operators"],function(_2be){var o=_2be("versa.api.Application",[],{});o._data_types=null;o._operators=null;o.getDataTypes=function(){if(!versa.api.Application._data_types){versa.api.Application._data_types=new versa.api.DataTypes();versa.api.Application._data_types.fetch();}return versa.api.Application._data_types;};o.getOperators=function(){if(!versa.api.Application._operators){versa.api.Application._operators=new versa.api.Operators();versa.api.Application._operators.fetch();}return versa.api.Application._operators;};return o;});},"versa/api/PropertyMappings":function(){define("versa/api/PropertyMappings",["dojo/_base/declare","versa/api/_Collection","versa/api/Error","versa/api/PropertyMapping"],function(_2bf){var o=_2bf("versa.api.PropertyMappings",[versa.api._Collection],{constructor:function(args){this.zone=args.zone;this.library=args.library;this.target=dojo.replace(versa.api.PropertyMappings.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.PropertyMapping.schema;this.cache=true;this._initialize();}});o.getDefault=function(_2c0,_2c1){var _2c2=_2c1.fetchById({id:_2c0.property_definition_id});if(_2c2.isTypeDate()&&_2c0.default_type==versa.api.PropertyMapping.types.date.floating){var date=new Date();date.setDate(date.getDate()+parseInt(_2c0.default_value));return date;}else{if(_2c0.default_value){if(_2c2.isTypeInteger()){return parseInt(_2c0.default_value);}else{if(_2c2.isTypeFloat()){return parseFloat(_2c0.default_value);}}return _2c0.default_value;}}return null;};o.TRGT="/zones/{0}/libraries/{1}/property_mappings";return o;});},"dojox/mobile/ViewController":function(){define("dojox/mobile/ViewController",["dojo/_base/kernel","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/on","dojo/ready","dijit/registry","./ProgressIndicator","./TransitionEvent"],function(dojo,_2c3,_2c4,_2c5,lang,win,dom,_2c6,_2c7,on,_2c8,_2c9,_2ca,_2cb){var dm=lang.getObject("dojox.mobile",true);var _2cc=_2c5("dojox.mobile.ViewController",null,{constructor:function(){this.viewMap={};this.currentView=null;this.defaultView=null;_2c8(lang.hitch(this,function(){on(win.body(),"startTransition",lang.hitch(this,"onStartTransition"));}));},findCurrentView:function(_2cd,src){if(_2cd){var w=_2c9.byId(_2cd);if(w&&w.getShowingView){return w.getShowingView();}}if(dm.currentView){return dm.currentView;}w=src;while(true){w=w.getParent();if(!w){return null;}if(_2c6.contains(w.domNode,"mblView")){break;}}return w;},onStartTransition:function(evt){evt.preventDefault();if(!evt.detail||(evt.detail&&!evt.detail.moveTo&&!evt.detail.href&&!evt.detail.url&&!evt.detail.scene)){return;}var w=this.findCurrentView(evt.detail.moveTo,(evt.target&&evt.target.id)?_2c9.byId(evt.target.id):_2c9.byId(evt.target));if(!w||(evt.detail&&evt.detail.moveTo&&w===_2c9.byId(evt.detail.moveTo))){return;}if(evt.detail.href){var t=_2c9.byId(evt.target.id).hrefTarget;if(t){dm.openWindow(evt.detail.href,t);}else{w.performTransition(null,evt.detail.transitionDir,evt.detail.transition,evt.target,function(){location.href=evt.detail.href;});}return;}else{if(evt.detail.scene){_2c4.publish("/dojox/mobile/app/pushScene",[evt.detail.scene]);return;}}var _2ce=evt.detail.moveTo;if(evt.detail.url){var id;if(dm._viewMap&&dm._viewMap[evt.detail.url]){id=dm._viewMap[evt.detail.url];}else{var text=this._text;if(!text){if(_2c9.byId(evt.target.id).sync){dojo.xhrGet({url:evt.detail.url,sync:true,load:function(_2cf){text=lang.trim(_2cf);}});}else{var s="dojo/_base/xhr";require([s],lang.hitch(this,function(xhr){var prog=_2ca.getInstance();win.body().appendChild(prog.domNode);prog.start();var obj=xhr.get({url:evt.detail.url,handleAs:"text"});obj.addCallback(lang.hitch(this,function(_2d0,_2d1){prog.stop();if(_2d0){this._text=_2d0;new _2cb(evt.target,{transition:evt.detail.transition,transitionDir:evt.detail.transitionDir,moveTo:_2ce,href:evt.detail.href,url:evt.detail.url,scene:evt.detail.scene},evt.detail).dispatch();}}));obj.addErrback(function(_2d2){prog.stop();});}));return;}}this._text=null;id=this._parse(text,_2c9.byId(evt.target.id).urlTarget);if(!dm._viewMap){dm._viewMap=[];}dm._viewMap[evt.detail.url]=id;}_2ce=id;w=this.findCurrentView(_2ce,_2c9.byId(evt.target.id))||w;}w.performTransition(_2ce,evt.detail.transitionDir,evt.detail.transition,null,null);},_parse:function(text,id){var _2d3,view,i,j,len;var _2d4=this.findCurrentView();var _2d5=_2c9.byId(id)&&_2c9.byId(id).containerNode||dom.byId(id)||_2d4&&_2d4.domNode.parentNode||win.body();var _2d6=null;for(j=_2d5.childNodes.length-1;j>=0;j--){var c=_2d5.childNodes[j];if(c.nodeType===1){if(c.getAttribute("fixed")==="bottom"){_2d6=c;}break;}}if(text.charAt(0)==="<"){_2d3=_2c7.create("DIV",{innerHTML:text});for(i=0;i<_2d3.childNodes.length;i++){var n=_2d3.childNodes[i];if(n.nodeType===1){view=n;break;}}if(!view){return;}view.style.visibility="hidden";_2d5.insertBefore(_2d3,_2d6);var ws=dojo.parser.parse(_2d3);_2c3.forEach(ws,function(w){if(w&&!w._started&&w.startup){w.startup();}});for(i=0,len=_2d3.childNodes.length;i<len;i++){_2d5.insertBefore(_2d3.firstChild,_2d6);}_2d5.removeChild(_2d3);_2c9.byNode(view)._visible=true;}else{if(text.charAt(0)==="{"){_2d3=_2c7.create("DIV");_2d5.insertBefore(_2d3,_2d6);this._ws=[];view=this._instantiate(eval("("+text+")"),_2d3);for(i=0;i<this._ws.length;i++){var w=this._ws[i];w.startup&&!w._started&&(!w.getParent||!w.getParent())&&w.startup();}this._ws=null;}}view.style.display="none";view.style.visibility="visible";return dojo.hash?"#"+view.id:view.id;},_instantiate:function(obj,node,_2d7){var _2d8;for(var key in obj){if(key.charAt(0)=="@"){continue;}var cls=lang.getObject(key);if(!cls){continue;}var _2d9={};var _2da=cls.prototype;var objs=lang.isArray(obj[key])?obj[key]:[obj[key]];for(var i=0;i<objs.length;i++){for(var prop in objs[i]){if(prop.charAt(0)=="@"){var val=objs[i][prop];prop=prop.substring(1);if(typeof _2da[prop]=="string"){_2d9[prop]=val;}else{if(typeof _2da[prop]=="number"){_2d9[prop]=val-0;}else{if(typeof _2da[prop]=="boolean"){_2d9[prop]=(val!="false");}else{if(typeof _2da[prop]=="object"){_2d9[prop]=eval("("+val+")");}}}}}}_2d8=new cls(_2d9,node);if(node){_2d8._visible=true;this._ws.push(_2d8);}if(_2d7&&_2d7.addChild){_2d7.addChild(_2d8);}this._instantiate(objs[i],null,_2d8);}}return _2d8&&_2d8.domNode;}});new _2cc();return _2cc;});},"versa/api/CellDefinitions":function(){define("versa/api/CellDefinitions",["dojo/_base/declare","versa/api/CellDefinition","versa/api/_Collection","versa/api/Error"],function(_2db){var o=_2db("versa.api.CellDefinitions",[versa.api._Collection],{constructor:function(args){this.zone=args.zone;this.library=args.library;this.target=dojo.replace(versa.api.CellDefinitions.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.CellDefinition.schema;this.cache=true;this._initialize();},isValidItem:function(args){var _2dc=this.inherited(arguments);var item=args.item;if(!_2dc){return;}if((!item.width)||(item.width.length<1)){throw new Error("Cell Definition 'Width' property is empty or invalid");}return true;}});o.getDefaultWidth=function(_2dd){var w=128;switch(_2dd){case versa.api.DataTypes.types.VOID:w=18;break;case versa.api.DataTypes.types.BOOLEAN:w=64;break;case versa.api.DataTypes.types.INTEGER:w=64;break;case versa.api.DataTypes.types.FLOAT:w=64;break;case versa.api.DataTypes.types.DATETIME:w=128;break;case versa.api.DataTypes.types.STRING:w=128;break;case versa.api.DataTypes.types.TEXT:w=128;break;}return w;};o.TRGT="/zones/{0}/libraries/{1}/cell_definitions";return o;});},"versa/api/Operator":function(){define("versa/api/Operator",["dojo/_base/declare","dojox/json/ref","versa/api/Error"],function(_2de){var o=_2de("versa.api.Operator",[],{id:null,name:null,value:null,constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));}});o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"value":{type:"string"},"no_rhs":{type:"boolean"}},prototype:new o()};return o;});},"versa/api/Users":function(){define("versa/api/Users",["dojo/_base/declare","versa/api/_Collection","versa/api/User"],function(_2df){var o=_2df("versa.api.Users",[versa.api._Collection],{zone:null,constructor:function(args){this.zone=args.zone;this.target=dojo.replace(versa.api.Users.TRGT,this.zone);this.schema=versa.api.User.schema;this.cache=true;this._initialize();},getAdmin:function(){var _2e0=null;this.forEach(function(item){if(item.is_admin){_2e0=item;}},this);return _2e0;},reset:function(_2e1,_2e2){versa.api.XhrHelper.doPostAction({target:dojo.replace(versa.api.Users.RESET_TRGT,this.zone),postData:{f:_2e1,newPassword:_2e2}});}});o.generatePassword=function(args){var len=args.length;var _2e3="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";var _2e4="";for(var i=0;i<len;i++){_2e4+=_2e3.charAt(Math.floor(Math.random()*(_2e3.length)));}return _2e4;};o.TRGT="/zones/{subdomain}/users";o.RESET_TRGT="/zones/{subdomain}/users/reset";return o;});},"versa/widget/mobile/Footing":function(){require(["dojo/_base/declare","dojox/mobile/TabBar","dojox/mobile/TabBarButton"],function(_2e5){_2e5("versa.widget.mobile.Footing",[dijit._WidgetBase,dojox.mobile.TabBar],{barType:"segmentedControl",center:true,fixed:"bottom",showRoot:true,showSearch:true,reference:null,syncWithViews:true,constructor:function(args){this.inherited("constructor",arguments);},onResize:function(){this.inherited("onResize",arguments);},postCreate:function(args){this.inherited("postCreate",arguments);if(this.showRoot){this.footerRootButton=new dojox.mobile.TabBarButton({label:"Root",from:this.from,onCommand:this.onCommand,onClick:function(){this.select();setTimeout("var caller=dijit.byId('"+this.id+"');"+"caller.onCommand(versa.widget.zone.mobile.Show.COMMANDS.SHOW_ROOT, {from: caller.from});"+"caller.select(true);",100);}},dojo.create("div"));this.addChild(this.footerRootButton);}if(this.reference){this.footerViewButton=new dojox.mobile.TabBarButton({label:"View",onCommand:this.onCommand,reference:this.reference,onClick:function(){this.select();setTimeout("var caller=dijit.byId('"+this.id+"');"+"caller.onCommand(versa.widget.zone.mobile.Show.COMMANDS.SHOW_DOCUMENT_CONTENT, {reference: caller.reference});"+"caller.select(true);",100);}},dojo.create("div"));this.addChild(this.footerViewButton);}if(this.showSearch){this.footerSearchButton=new dojox.mobile.TabBarButton({label:"Search",from:this.from,onCommand:this.onCommand,onClick:function(){this.select();setTimeout("var caller=dijit.byId('"+this.id+"');"+"caller.onCommand(versa.widget.zone.mobile.Show.COMMANDS.SHOW_SEARCH, {from: caller.from});"+"caller.select(true);",100);}},dojo.create("div"));this.addChild(this.footerSearchButton);}}});});},"dojo/cache":function(){define("dojo/cache",["./_base/kernel","./text"],function(dojo,text){return dojo.cache;});},"versa/api/PermissionSet":function(){define("versa/api/PermissionSet",["dojo/_base/declare"],function(_2e6){var o=_2e6("versa.api.PermissionSet",[],{_values:null,constructor:function(args){var seed=(args)?args:false;this._values=new Array();for(var p in versa.api.PermissionIndices){var idx=versa.api.PermissionIndices[p];this._values[idx]=seed;}},andSet:function(_2e7){var _2e8=new versa.api.PermissionSet(true);for(var p in versa.api.PermissionIndices){var idx=versa.api.PermissionIndices[p];_2e8._values[idx]=(this._values[idx]&&_2e7._values[idx]);}return _2e8;},orSet:function(_2e9){var _2ea=new versa.api.PermissionSet();for(var p in versa.api.PermissionIndices){var idx=versa.api.PermissionIndices[p];_2ea._values[idx]=(this._values[idx]||_2e9._values[idx]);}return _2ea;},getValue:function(_2eb){return this._values[_2eb];},setValue:function(_2ec,_2ed){this._values[_2ec]=_2ed;}});versa.api.PermissionIndices={"CREATE":0,"VIEW":1,"COPY":2,"EDIT":3,"MOVE":4,"CKO":5,"CKI":6,"CANCEL_CKO":7,"VERSION":8,"DELETE":9,"SECURE":10,"RESTORE":11,"DESTROY":12};return o;});},"versa/api/ChoiceList":function(){define("versa/api/ChoiceList",["dojo/_base/declare","versa/api/_Object"],function(_2ee){var o=_2ee("versa.api.ChoiceList",[versa.api._Object],{constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},isValid:function(){var _2ef=true;if(String.isEmpty(this.name.trim())){_2ef=false;}if((!this.data_type_id)||(this.data_type_id<1)){_2ef=false;}return _2ef;}});o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":"Property"},"data_type_id":{type:"integer"},"choice_values":{type:"array","default":[],items:{type:"object",properties:{"sort_order":{type:"integer"},"name":{type:"string"},"value":{type:"string"}}}},"created_at":{type:"string",format:"date-time","default":dojo.date.stamp.toISOString(new Date(),{zulu:true})},"created_by":{type:"string","default":""},"updated_at":{type:"string",format:"date-time","default":dojo.date.stamp.toISOString(new Date(),{zulu:true})},"updated_by":{type:"string","default":""}},prototype:new o()};return o;});},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"dojo/text":function(){define("dojo/text",["./_base/kernel","require","./has","./_base/xhr"],function(dojo,_2f0,has,xhr){var _2f1;if(1){_2f1=function(url,sync,load){xhr("GET",{url:url,sync:!!sync,load:load});};}else{if(_2f0.getText){_2f1=_2f0.getText;}else{}}var _2f2={},_2f3=function(text){if(text){text=text.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _2f4=text.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_2f4){text=_2f4[1];}}else{text="";}return text;},_2f5={},_2f6={},_2f7={dynamic:true,normalize:function(id,_2f8){var _2f9=id.split("!"),url=_2f9[0];return (/^\./.test(url)?_2f8(url):url)+(_2f9[1]?"!"+_2f9[1]:"");},load:function(id,_2fa,load){var _2fb=id.split("!"),_2fc=_2fb.length>1,_2fd=_2fb[0],url=_2fa.toUrl(_2fb[0]),text=_2f5,_2fe=function(text){load(_2fc?_2f3(text):text);};if(_2fd in _2f2){text=_2f2[_2fd];}else{if(url in _2fa.cache){text=_2fa.cache[url];}else{if(url in _2f2){text=_2f2[url];}}}if(text===_2f5){if(_2f6[url]){_2f6[url].push(_2fe);}else{var _2ff=_2f6[url]=[_2fe];_2f1(url,!_2fa.async,function(text){_2f2[_2fd]=_2f2[url]=text;for(var i=0;i<_2ff.length;){_2ff[i++](text);}delete _2f6[url];});}}else{_2fe(text);}}};dojo.cache=function(_300,url,_301){var key;if(typeof _300=="string"){if(/\//.test(_300)){key=_300;_301=url;}else{key=_2f0.toUrl(_300.replace(/\./g,"/")+(url?("/"+url):""));}}else{key=_300+"";_301=url;}var val=(_301!=undefined&&typeof _301!="string")?_301.value:_301,_302=_301&&_301.sanitize;if(typeof val=="string"){_2f2[key]=val;return _302?_2f3(val):val;}else{if(val===null){delete _2f2[key];return null;}else{if(!(key in _2f2)){_2f1(key,true,function(text){_2f2[key]=text;});}return _302?_2f3(_2f2[key]):_2f2[key];}}};return _2f7;});},"versa/api/Error":function(){define("versa/api/Error",["dojo/_base/declare"],function(_303){return _303("versa.api.Error",[],{status:400,message:"",innerMessage:"",err:null,name:null,lineNumber:-1,fileName:null,stack:null,constructor:function(_304,err){this.message=_304;this.err=err;if(this.err){if(this.err.hasOwnProperty("status")){this.status=this.err.status;}if(this.err.hasOwnProperty("responseText")){this.innerMessage=this.err.responseText;}else{if(this.err.hasOwnProperty("message")){this.innerMessage=this.err.message;}else{if(this.err.hasOwnProperty("description")){this.innerMessage=this.err.description;}}}}},getContent:function(_305){var msg=this.message;if((_305)&&(this.innerMessage)){msg+=":<br>"+this.innerMessage;}return msg;},getMessage:function(_306){var msg=this.message;if((_306)&&(this.innerMessage)){msg+=":\n"+this.innerMessage;}return msg;}});});},"versa/api/Utilities":function(){define("versa/api/Utilities",["dojo/_base/declare"],function(_307){var o=_307("versa.api.Utilities",[],{});o.uniqueIdBase=(new Date()).getTime();o.randomNumber=function(args){var l=args.lowerBound;var u=args.upperBound;return (Math.floor(Math.random()*(u-l))+l);};o.readablizeBytes=function(args){var _308="";var _309=args.bytes;if((_309==null)||(_309==Number.NaN)){return "???";}if(_309<1){return "0 bytes";}var s=["bytes","KB","MB","GB","TB","PB"];var e=Math.floor(Math.log(_309)/Math.log(1024));if(e>0){_308=(_309/Math.pow(1024,Math.floor(e))).toFixed(2)+" "+s[e];}else{_308=(_309/Math.pow(1024,Math.floor(e))).toFixed(0)+" "+s[e];}return _308;};o.readabilizeSeconds=function(args){var s=args.seconds;var d=Number(s);var h=Math.floor(d/3600);var m=Math.floor(d%3600/60);var s=Math.floor(d%3600%60);return ((h>0?h+":":"")+(m>0?(h>0&&m<10?"0":"")+m+":":"0:")+(s<10?"0":"")+s);};o.generateUniqueId=function(args){return versa.api.Utilities.uniqueIdBase++;};o.isArray=function(arr){return arr.constructor==Array;};o.generateUniqueName=function(args){var _30a=args.names;var _30b=args.base_name;var _30c=(args.appendix)?args.appendix:"({index})";var _30d=_30b;var i=0;while(++i){var idx=dojo.indexOf(_30a,_30d);if(idx<0){break;}_30d=dojo.replace("{baseName}"+_30c,{baseName:_30b,index:i});}return _30d;};o.getFileExtension=function(args){var _30e=args.file_name;var pos=_30e.lastIndexOf(".");if(pos<1){return "";}return _30e.substring(pos);};o.getFileName=function(args){var _30f=args.file_name;var pos=_30f.lastIndexOf(".");if(pos<1){return _30f;}return _30f.substring(0,pos);};o.saveUrl=function(args){var url=args.url;var _310=args.window_name;var _311=dojo.string.substitute("width=10,height=10,top=-20,left=-20,toolbar=0,resizable=1,location=0,directories=0,status=0,menubar=0",[]);window.location.href=url;};o.getBox=function(args){var _312=dojo.window.getBox();var _313=_312.w;var _314=_312.h;var winW=_313*args.scale;var winH=_314*args.scale;var winT=(_314/2)-(winH/2);var winL=(_313/2)-(winW/2);return {w:winW,h:winH,t:winT,l:winL};};o.getFormatStore=function(){var _315=[{id:versa.api.DataTypes.types.BOOLEAN+":"+versa.api.CellDefinition.formats.none,format_id:versa.api.CellDefinition.formats.none,data_type_id:versa.api.DataTypes.types.BOOLEAN,name:"None"},{id:versa.api.DataTypes.types.DATETIME+":"+versa.api.CellDefinition.formats.none,format_id:versa.api.CellDefinition.formats.none,data_type_id:versa.api.DataTypes.types.DATETIME,name:"None"},{id:versa.api.DataTypes.types.DATETIME+":"+versa.api.CellDefinition.formats.datetime,format_id:versa.api.CellDefinition.formats.datetime,data_type_id:versa.api.DataTypes.types.DATETIME,name:"Date"},{id:versa.api.DataTypes.types.FLOAT+":"+versa.api.CellDefinition.formats.none,format_id:versa.api.CellDefinition.formats.none,data_type_id:versa.api.DataTypes.types.FLOAT,name:"None"},{id:versa.api.DataTypes.types.INTEGER+":"+versa.api.CellDefinition.formats.none,format_id:versa.api.CellDefinition.formats.none,data_type_id:versa.api.DataTypes.types.INTEGER,name:"None"},{id:versa.api.DataTypes.types.INTEGER+":"+versa.api.CellDefinition.formats.size,format_id:versa.api.CellDefinition.formats.size,data_type_id:versa.api.DataTypes.types.INTEGER,name:"File Size"},{id:versa.api.DataTypes.types.STRING+":"+versa.api.CellDefinition.formats.none,format_id:versa.api.CellDefinition.formats.none,data_type_id:versa.api.DataTypes.types.STRING,name:"None"},{id:versa.api.DataTypes.types.TEXT+":"+versa.api.CellDefinition.formats.none,format_id:versa.api.CellDefinition.formats.none,data_type_id:versa.api.DataTypes.types.TEXT,name:"None"}];return new versa.api.ItemFileWriteStore({data:{identifier:"id",label:"name",items:_315}});};o.viewUrl=function(args){var box=args.windowBox;var url=args.url;var _316=args.window_name;var _317=dojo.string.substitute("width=${0},height=${1},top=${2},left=${3},toolbar=0,resizable=1,location=0,directories=0,status=0,menubar=0,scrollbars=1",[box.w,box.h,box.t,box.l]);if(!dojo.isIE){var win=window.open(url,_316,_317);win.focus();}else{var win=window.open(url,"_blank",_317);win.focus();}};o.iePdfPluginInstalled=function(){if(window.ActiveXObject){var _318=null;try{_318=new ActiveXObject("AcroPDF.PDF");}catch(e){}if(!_318){try{_318=new ActiveXObject("PDF.PdfCtrl");}catch(e){}}if(_318){return true;}}return false;};o.formatDate=function(date){var _319=(date.getUTCMonth()+1).toString();var _31a=date.getUTCDate().toString();var _31b=date.getUTCHours().toString();_319=_319.length==1?"0"+_319:_319;_31a=_31a.length==1?"0"+_31a:_31a;_31b=_31b.length==1?"0"+_31b:_31b;return date.getUTCFullYear()+"-"+_319+"-"+_31a+"T"+_31b+":00:00Z";};o.validateEmail=function(str){var _31c=str.lastIndexOf("@");if(_31c<1){return false;}if(_31c==str.length-1){return false;}if(_31c>64){return false;}if(str.length-_31c>255){return false;}var _31d=str.lastIndexOf(".");if(_31d>_31c+1&&_31d<str.length-1){return true;}if(str.charAt(_31c+1)=="["&&str.charAt(str.length-1)=="]"){return true;}return false;};return o;});},"versa/widget/folder/mobile/FolderView":function(){require(["dojo/_base/declare","dijit/_WidgetBase","dojox/mobile/Heading","dojox/mobile/ScrollableView","dojox/mobile/EdgeToEdgeDataList","dojox/mobile/ToolBarButton","versa/api/Folders","versa/api/Documents","versa/api/Zones","dojo/data/ItemFileWriteStore"],function(_31e){_31e("versa.widget.folder.mobile.FolderView",[dijit._WidgetBase,dojox.mobile.ScrollableView],{folder:null,library:null,folders:null,references:null,folderStore:null,refStore:null,etedlMain:null,header:null,footer:null,constructor:function(args){},postCreate:function(){this.inherited("postCreate",arguments);this.folders=this.library.getFolders();this.references=this.library.getReferences();this.folderStore=this.folders.store;this.refStore=this.references.store;this.folderStore.clearCache();var _31f=this.folderStore.fetch({query:{parent_id:this.folder.id}}).results;var _320=this.refStore.fetch({query:{type:1,query:this.folder.id,view:this.folder.view_definition_id}}).results;_31f.sort(versa.api.Folder.sort);var _321=[];dojo.forEach(_31f,function(_322){if(!(_322.isSearch()||_322.isTrash()||_322.isShareRoot())){_321.push({label:_322.name,item:_322,parent:this.folder,onCommand:this.onCommand,icon:"../../images/icons/32/folder.png",clickable:true,onClick:function(){this.select(true);setTimeout("var caller=dijit.byId('"+this.id+"');"+"caller.onCommand(versa.widget.zone.mobile.Show.COMMANDS.SHOW_FOLDER, {parent: caller.parent, folder:caller.item});",3);}});}},this);dojo.forEach(_320,function(_323){_321.push({label:_323.name,item:_323,from:this,onCommand:this.onCommand,icon:versa.api.Document.getIconUrl(_323.binary_content_type,32),clickable:true,onClick:function(){this.select(true);setTimeout("var caller=dijit.byId('"+this.id+"');"+"caller.onCommand(versa.widget.zone.mobile.Show.COMMANDS.SHOW_DOCUMENT_PROPERTIES, {from: caller.from, reference:caller.item});",3);}});},this);var _324={items:_321};var _325=new dojo.data.ItemFileWriteStore({data:_324});this.header=new versa.widget.mobile.Heading({label:this.folder.name,from:this,moveTo:this.back,onCommand:this.onCommand});this.footer=new versa.widget.mobile.Footing({showRoot:!this.folder.isRoot(),onCommand:this.onCommand,from:this});this.etedlMain=new dojox.mobile.EdgeToEdgeDataList({store:_325,iconBase:"../../images/mimetypes/48/default.png"});this.addChild(this.header);this.addChild(this.footer);this.addChild(this.etedlMain);},onBeforeTransitionIn:function(){this.findAppBars();this.resize();},onBeforeTransitionOut:function(){this.findAppBars();this.resize();},startup:function(){this.inherited("startup",arguments);this.etedlMain.startup();}});});},"dojox/mobile/ListItem":function(){define("dojox/mobile/ListItem",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/has","./common","./_ItemBase","./TransitionEvent"],function(_326,_327,_328,lang,_329,_32a,has,_32b,_32c,_32d){return _328("dojox.mobile.ListItem",_32c,{rightText:"",rightIcon:"",rightIcon2:"",anchorLabel:false,noArrow:false,selected:false,checked:false,arrowClass:"mblDomButtonArrow",checkClass:"mblDomButtonCheck",variableHeight:false,rightIconTitle:"",rightIcon2Title:"",btnClass:"",btnClass2:"",tag:"li",postMixInProperties:function(){if(this.btnClass){this.rightIcon=this.btnClass;}this._setBtnClassAttr=this._setRightIconAttr;this._setBtnClass2Attr=this._setRightIcon2Attr;},buildRendering:function(){this.domNode=this.srcNodeRef||_32a.create(this.tag);this.inherited(arguments);this.domNode.className="mblListItem"+(this.selected?" mblItemSelected":"");var box=this.box=_32a.create("DIV");box.className="mblListItemTextBox";if(this.anchorLabel){box.style.cursor="pointer";}var r=this.srcNodeRef;if(r&&!this.label){this.label="";for(var i=0,len=r.childNodes.length;i<len;i++){var n=r.firstChild;if(n.nodeType===3&&lang.trim(n.nodeValue)!==""){n.nodeValue=this._cv?this._cv(n.nodeValue):n.nodeValue;this.labelNode=_32a.create("SPAN",{className:"mblListItemLabel"});this.labelNode.appendChild(n);n=this.labelNode;}box.appendChild(n);}}if(!this.labelNode){this.labelNode=_32a.create("SPAN",{className:"mblListItemLabel"},box);}if(this.anchorLabel){box.style.display="inline";}var a=this.anchorNode=_32a.create("A");a.className="mblListItemAnchor";this.domNode.appendChild(a);a.appendChild(box);},startup:function(){if(this._started){return;}this.inheritParams();var _32e=this.getParent();if(this.moveTo||this.href||this.url||this.clickable||(_32e&&_32e.select)){this._onClickHandle=this.connect(this.anchorNode,"onclick","onClick");}this.setArrow();if(_329.contains(this.domNode,"mblVariableHeight")){this.variableHeight=true;}if(this.variableHeight){_329.add(this.domNode,"mblVariableHeight");setTimeout(lang.hitch(this,"layoutVariableHeight"));}this.set("icon",this.icon);if(!this.checked&&this.checkClass.indexOf(",")!==-1){this.set("checked",this.checked);}this.inherited(arguments);},resize:function(){if(this.variableHeight){this.layoutVariableHeight();}},onClick:function(e){var a=e.currentTarget;var li=a.parentNode;if(_329.contains(li,"mblItemSelected")){return;}if(this.anchorLabel){for(var p=e.target;p.tagName!==this.tag.toUpperCase();p=p.parentNode){if(p.className=="mblListItemTextBox"){_329.add(p,"mblListItemTextBoxSelected");setTimeout(function(){_329.remove(p,"mblListItemTextBoxSelected");},has("android")?300:1000);this.onAnchorLabelClicked(e);return;}}}var _32f=this.getParent();if(_32f.select){if(_32f.select==="single"){if(!this.checked){this.set("checked",true);}}else{if(_32f.select==="multiple"){this.set("checked",!this.checked);}}}this.select();if(this.href&&this.hrefTarget){_32b.openWindow(this.href,this.hrefTarget);return;}var _330;if(this.moveTo||this.href||this.url||this.scene){_330={moveTo:this.moveTo,href:this.href,url:this.url,scene:this.scene,transition:this.transition,transitionDir:this.transitionDir};}else{if(this.transitionOptions){_330=this.transitionOptions;}}if(_330){this.setTransitionPos(e);return new _32d(this.domNode,_330,e).dispatch();}},select:function(){var _331=this.getParent();if(_331.stateful){_331.deselectAll();}else{var _332=this;setTimeout(function(){_332.deselect();},has("android")?300:1000);}_329.add(this.domNode,"mblItemSelected");},deselect:function(){_329.remove(this.domNode,"mblItemSelected");},onAnchorLabelClicked:function(e){},layoutVariableHeight:function(){var h=this.anchorNode.offsetHeight;if(h===this.anchorNodeHeight){return;}this.anchorNodeHeight=h;_326.forEach([this.rightTextNode,this.rightIcon2Node,this.rightIconNode,this.iconNode],function(n){if(n){var t=Math.round((h-n.offsetHeight)/2);n.style.marginTop=t+"px";}});},setArrow:function(){if(this.checked){return;}var c="";var _333=this.getParent();if(this.moveTo||this.href||this.url||this.clickable){if(!this.noArrow&&!(_333&&_333.stateful)){c=this.arrowClass;}}if(c){this._setRightIconAttr(c);}},_setIconAttr:function(icon){if(!this.getParent()){return;}this.icon=icon;var a=this.anchorNode;if(!this.iconNode){if(icon){var ref=this.rightIconNode||this.rightIcon2Node||this.rightTextNode||this.box;this.iconNode=_32a.create("DIV",{className:"mblListItemIcon"},ref,"before");}}else{_32a.empty(this.iconNode);}if(icon&&icon!=="none"){_32b.createIcon(icon,this.iconPos,null,this.alt,this.iconNode);if(this.iconPos){_329.add(this.iconNode.firstChild,"mblListItemSpriteIcon");}_329.remove(a,"mblListItemAnchorNoIcon");}else{_329.add(a,"mblListItemAnchorNoIcon");}},_setCheckedAttr:function(_334){var _335=this.getParent();if(_335&&_335.select==="single"&&_334){_326.forEach(_335.getChildren(),function(_336){_336.set("checked",false);});}this._setRightIconAttr(this.checkClass);var _337=this.rightIconNode.childNodes;if(_337.length===1){this.rightIconNode.style.display=_334?"":"none";}else{_337[0].style.display=_334?"":"none";_337[1].style.display=!_334?"":"none";}_329.toggle(this.domNode,"mblListItemChecked",_334);if(_335&&this.checked!==_334){_335.onCheckStateChanged(this,_334);}this.checked=_334;},_setRightTextAttr:function(text){if(!this.rightTextNode){this.rightTextNode=_32a.create("DIV",{className:"mblListItemRightText"},this.box,"before");}this.rightText=text;this.rightTextNode.innerHTML=this._cv?this._cv(text):text;},_setRightIconAttr:function(icon){if(!this.rightIconNode){var ref=this.rightIcon2Node||this.rightTextNode||this.box;this.rightIconNode=_32a.create("DIV",{className:"mblListItemRightIcon"},ref,"before");}else{_32a.empty(this.rightIconNode);}this.rightIcon=icon;var arr=(icon||"").split(/,/);if(arr.length===1){_32b.createIcon(icon,null,null,this.rightIconTitle,this.rightIconNode);}else{_32b.createIcon(arr[0],null,null,this.rightIconTitle,this.rightIconNode);_32b.createIcon(arr[1],null,null,this.rightIconTitle,this.rightIconNode);}},_setRightIcon2Attr:function(icon){if(!this.rightIcon2Node){var ref=this.rightTextNode||this.box;this.rightIcon2Node=_32a.create("DIV",{className:"mblListItemRightIcon2"},ref,"before");}else{_32a.empty(this.rightIcon2Node);}this.rightIcon2=icon;_32b.createIcon(icon,null,null,this.rightIcon2Title,this.rightIcon2Node);},_setLabelAttr:function(text){this.label=text;this.labelNode.innerHTML=this._cv?this._cv(text):text;}});});},"dojo/cldr/nls/gregorian":function(){define("dojo/cldr/nls/gregorian",{root:{"months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, y-M-d","dateFormatItem-MMMEd":"E MMM d","eraNarrow":["BCE","CE"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"y MMMM d","months-format-wide":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, y MMMM dd","dateFormatItem-Md":"M-d","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","field-era":"Era","dateFormatItem-yM":"y-M","months-standAlone-wide":["1","2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateFormatItem-yQ":"y Q","dateTimeFormats-appendItem-Era":"{0} {1}","field-hour":"Hour","months-format-abbr":["1","2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","dateFormatItem-H":"HH","months-standAlone-abbr":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-M":"L","days-standAlone-wide":["1","2","3","4","5","6","7"],"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"eraAbbr":["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":["1","2","3","4","5","6","7"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"field-day-relative+-1":"Yesterday","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"E, M-d","dateTimeFormat-full":"{1} {0}","field-day":"Day","days-format-wide":["1","2","3","4","5","6","7"],"field-zone":"Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":["1","2","3","4","5","6","7"],"eraNames":["BCE","CE"],"days-format-narrow":["1","2","3","4","5","6","7"],"days-standAlone-narrow":["1","2","3","4","5","6","7"],"dateFormatItem-MMM":"LLL","field-month":"Month","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormat-short":"yyyy-MM-dd","field-second":"Second","dateFormatItem-yMMMEd":"EEE, y MMM d","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dateFormat-medium":"y MMM d","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"},"ar":true,"ca":true,"cs":true,"da":true,"de":true,"el":true,"en":true,"en-au":true,"en-ca":true,"en-gb":true,"es":true,"fi":true,"fr":true,"fr-ch":true,"he":true,"hu":true,"it":true,"ja":true,"ko":true,"nb":true,"nl":true,"pl":true,"pt":true,"pt-pt":true,"ro":true,"ru":true,"sk":true,"sl":true,"sv":true,"th":true,"tr":true,"zh":true,"zh-hant":true,"zh-hk":true,"zh-tw":true});},"versa/widget/zone/mobile/LogonView":function(){define("versa/widget/zone/mobile/LogonView",["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/form/Form","versa/api/User","dojox/mobile/Button","dojox/mobile/ScrollableView","dojox/mobile/ContentPane","versa/widget/mobile/TextBox","dojox/mobile/Heading"],function(_338){var o=_338("versa.widget.zone.mobile.LogonView",[dijit._WidgetBase,dojox.mobile.ScrollableView],{_btnReset:null,_btnSubmit:null,_frmLogon:null,_txtEmail:null,_txtPassword:null,_txtResetName:null,_txtUserName:null,user:null,zone:null,_onResetClick:function(e){var a1=dojo.fadeOut({node:this.logonNode,duration:500,onEnd:dojo.hitch(this,function(){dojo.toggleClass(this.logonNode,"versaHide",true);dojo.toggleClass(this.resetNode,"versaHide",false);var _339=this._txtUsername.get("value");this._txtResetName.set("value",_339);})});var a2=dojo.fadeIn({node:this.resetNode,duration:500,onEnd:dojo.hitch(this,function(){this._btnReset.set("disabled",true);this._txtResetName.blur();this._txtResetName.validate();this._txtEmail.blur();this._txtEmail.validate();this._txtResetName.focus();this._btnReset.set("disabled",false);})});dojo.fx.chain([a1,a2]).play();},_onReturnClick:function(e){var a1=dojo.fadeOut({node:this.resetNode,duration:500,onEnd:dojo.hitch(this,function(){dojo.toggleClass(this.logonNode,"versaHide",false);dojo.toggleClass(this.resetNode,"versaHide",true);})});var a2=dojo.fadeIn({node:this.logonNode,duration:500,onEnd:dojo.hitch(this,function(){this._txtPassword.reset();this._txtUsername.setFocus();})});dojo.fx.chain([a1,a2]).play();},_onResetSubmit:function(e){try{if(this._frmReset.validate()){var _33a=this._txtResetName.get("value");var _33b=this._txtEmail.get("value");this.zone.resetPassword(_33a,_33b);this.onReset(_33a);this._txtUsername.set("value",_33a);}}catch(e){this.onResetError(e);this._txtResetName.reset();this._txtEmail.reset();this._txtResetName.setFocus();}finally{e.preventDefault();}},_onLogonSubmit:function(e){try{if(this._frmLogon.isValid()){var _33c=this._txtUsername.get("value");var _33d=this._txtPassword.get("value");var user=this.zone.logon(_33c,_33d);this.onLogon(user);}else{this._txtUsername.validate();}}catch(e){this.onError(e);this._txtPassword.reset();this._txtUsername.setFocus(true);}finally{e.preventDefault();}},constructor:function(args){},onError:function(e){},onLogon:function(user){},onReset:function(_33e){},onResetError:function(e){},postCreate:function(){this.inherited("postCreate",arguments);this.cpContent=new dojox.mobile.ContentPane({content:dojo.cache("versa.widget.zone.mobile","template/Logon.html","<div style=\"width: 100%; border-bottom: 4px solid #FFD100;height: 50px; position: relative;\">\n    <img src=\"/images/versafile-32-tm.png\" alt=\"VersaFile\" style=\"position: absolute; bottom: 5px; left: 5px;\"/>\n</div>\n<div align=\"center\" style=\"width: 100%; border-top: 4px solid #75787B;\">\n    <div id=\"logonFormNode\" style=\"margin-top: 50px;\">\n\n        <div>\n            <div>Username</div>\n            <input id=\"userNameNode\"/>\n        </div>\n\n        <div>\n            <div>Password</div>\n            <input id=\"passwordNode\"/>\n        </div>\n\n        <table id=\"statusNode\">\n            <tr>\n                <td style=\"vertical-align:top;\">\n                    <img id=\"statusImgNode\" src=\"/images/icons/16/blank.png\" width=\"16\" height=\"16\" style=\"float:right;margin-right:8px\"/>\n                </td>\n                <td>\n                    <span id=\"statusMsgNode\"></span>\n                </td>\n            </tr>\n        </table>\n\n        <div>\n            <button id=\"logonButtonNode\" type=\"submit\"></button>\n        </div>\n\n    </div>\n</div>\n")});this.addChild(this.cpContent);this._frmLogon=new dijit.form.Form({onSubmit:dojo.hitch(this,this._onLogonSubmit)},"logonFormNode");this._txtUsername=new versa.widget.mobile.TextBox({name:"txtUsername",required:true,missingMessage:"Username is required",value:(this.user==null)?null:this.user.name,disabled:(this.user!=null),style:"width:160px"},"userNameNode");this._txtPassword=new versa.widget.mobile.TextBox({name:"txtPassword",required:false,type:"password",style:"width:160px"},"passwordNode");this._btnSubmit=new dojox.mobile.Button({iconClass:"buttonIcon bfreeIconLock",label:"Log in",type:"submit"},"logonButtonNode");this._txtUsername.focus();},startup:function(){this.inherited("startup",arguments);}});o.STS_CODES={"ERR":0,"OK":1};o.ERR_MESSAGE="Error: <b>{message}</b>";o.OK_MESSAGE="Success: <b>Logged in as user '{name}'.</b>";return o;});},"dojo/uacss":function(){define("dojo/uacss",["./dom-geometry","./_base/lang","./ready","./_base/sniff","./_base/window"],function(_33f,lang,_340,has,_341){var html=_341.doc.documentElement,ie=has("ie"),_342=has("opera"),maj=Math.floor,ff=has("ff"),_343=_33f.boxModel.replace(/-/,""),_344={"dj_ie":ie,"dj_ie6":maj(ie)==6,"dj_ie7":maj(ie)==7,"dj_ie8":maj(ie)==8,"dj_ie9":maj(ie)==9,"dj_quirks":has("quirks"),"dj_iequirks":ie&&has("quirks"),"dj_opera":_342,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_gecko":has("mozilla"),"dj_ff3":maj(ff)==3};_344["dj_"+_343]=true;var _345="";for(var clz in _344){if(_344[clz]){_345+=clz+" ";}}html.className=lang.trim(html.className+" "+_345);_340(90,function(){if(!_33f.isBodyLtr()){var _346="dj_rtl dijitRtl "+_345.replace(/ /g,"-rtl ");html.className=lang.trim(html.className+" "+_346+"dj_rtl dijitRtl "+_345.replace(/ /g,"-rtl "));}});return has;});},"dojox/mobile/_DataListMixin":function(){define("dojox/mobile/_DataListMixin",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dijit/registry","./ListItem"],function(_347,_348,_349,lang,_34a,_34b){return _349("dojox.mobile._DataListMixin",null,{store:null,query:null,queryOptions:null,buildRendering:function(){this.inherited(arguments);if(!this.store){return;}var _34c=this.store;this.store=null;this.setStore(_34c,this.query,this.queryOptions);},setStore:function(_34d,_34e,_34f){if(_34d===this.store){return;}this.store=_34d;this.query=_34e;this.queryOptions=_34f;if(_34d&&_34d.getFeatures()["dojo.data.api.Notification"]){_347.forEach(this._conn||[],_348.disconnect);this._conn=[_348.connect(_34d,"onSet",this,"onSet"),_348.connect(_34d,"onNew",this,"onNew"),_348.connect(_34d,"onDelete",this,"onDelete")];}this.refresh();},refresh:function(){if(!this.store){return;}this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:lang.hitch(this,"onComplete"),onError:lang.hitch(this,"onError")});},createListItem:function(item){var attr={};var arr=this.store.getLabelAttributes(item);var _350=arr?arr[0]:null;_347.forEach(this.store.getAttributes(item),function(name){if(name===_350){attr["label"]=this.store.getLabel(item);}else{attr[name]=this.store.getValue(item,name);}},this);var w=new _34b(attr);item._widgetId=w.id;return w;},generateList:function(_351,_352){_347.forEach(this.getChildren(),function(_353){_353.destroyRecursive();});_347.forEach(_351,function(item,_354){this.addChild(this.createListItem(item));},this);},onComplete:function(_355,_356){this.generateList(_355,_356);},onError:function(_357,_358){},onSet:function(item,_359,_35a,_35b){},onNew:function(_35c,_35d){this.addChild(this.createListItem(_35c));},onDelete:function(_35e){_34a.byId(_35e._widgetId).destroyRecursive();}});});},"dojo/string":function(){define("dojo/string",["./_base/kernel","./_base/lang"],function(dojo,lang){lang.getObject("string",true,dojo);dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_35f,map,_360,_361){_361=_361||dojo.global;_360=_360?lang.hitch(_361,_360):function(v){return v;};return _35f.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_362,key,_363){var _364=lang.getObject(key,false,map);if(_363){_364=lang.getObject(_363,false,_361).call(_361,_364,key);}return _360(_364,key).toString();});};dojo.string.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return dojo.string;});},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/sniff","./_FormWidgetMixin"],function(_365,_366,keys,has,_367){return _365("dijit.form._FormValueMixin",_367,{readOnly:false,_setReadOnlyAttr:function(_368){_366.set(this.focusNode,"readOnly",_368);this.focusNode.setAttribute("aria-readonly",_368);this._set("readOnly",_368);},postCreate:function(){this.inherited(arguments);if(has("ie")){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_369,_36a){this._handleOnChange(_369,_36a);},_handleOnChange:function(_36b,_36c){this._set("value",_36b);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){var te;if(has("ie")<9||(has("ie")&&has("quirks"))){e.preventDefault();te=document.createEventObject();te.keyCode=keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}}}});});},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/_base/sniff","dojo/_base/window","dojo/window","../a11y"],function(_36d,_36e,_36f,_370,lang,_371,has,win,_372,a11y){return _36e("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousedown","_onMouseDown");},_setDisabledAttr:function(_373){this._set("disabled",_373);_36f.set(this.focusNode,"disabled",_373);if(this.valueNode){_36f.set(this.valueNode,"disabled",_373);}this.focusNode.setAttribute("aria-disabled",_373);if(_373){this._set("hovering",false);this._set("active",false);var _374="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_36d.forEach(lang.isArray(_374)?_374:[_374],function(_375){var node=this[_375];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(e){if(this.scrollOnFocus){_372.scrollIntoView(this.domNode);}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_370.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_376,_377){if(this._lastValueReported==undefined&&(_377===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_376;}this._pendingOnChange=this._pendingOnChange||(typeof _376!=typeof this._lastValueReported)||(this.compare(_376,this._lastValueReported)!=0);if((this.intermediateChanges||_377||_377===undefined)&&this._pendingOnChange){this._lastValueReported=_376;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(lang.hitch(this,function(){this._onChangeHandle=null;this.onChange(_376);}),0);}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported);}this.inherited(arguments);},_onMouseDown:function(e){if((!this.focused||!has("ie"))&&!e.ctrlKey&&_371.isLeft(e)&&this.isFocusable()){var _378=this.connect(win.body(),"onmouseup",function(){if(this.isFocusable()){this.focus();}this.disconnect(_378);});}}});});},"dojo/date":function(){define("dojo/date",["./_base/kernel","./_base/lang"],function(dojo,lang){lang.getObject("date",true,dojo);dojo.date.getDaysInMonth=function(_379){var _37a=_379.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_37a==1&&dojo.date.isLeapYear(_379)){return 29;}return days[_37a];};dojo.date.isLeapYear=function(_37b){var year=_37b.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_37c){var str=_37c.toString();var tz="";var _37d;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_37d=str.match(pat))){tz=_37d[1];}else{str=_37c.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_37d=str.match(pat))){tz=_37d[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_37e,_37f,_380){_37e=new Date(+_37e);_37f=new Date(+(_37f||new Date()));if(_380=="date"){_37e.setHours(0,0,0,0);_37f.setHours(0,0,0,0);}else{if(_380=="time"){_37e.setFullYear(0,0,0);_37f.setFullYear(0,0,0);}}if(_37e>_37f){return 1;}if(_37e<_37f){return -1;}return 0;};dojo.date.add=function(date,_381,_382){var sum=new Date(+date);var _383=false;var _384="Date";switch(_381){case "day":break;case "weekday":var days,_385;var mod=_382%5;if(!mod){days=(_382>0)?5:-5;_385=(_382>0)?((_382-5)/5):((_382+5)/5);}else{days=mod;_385=parseInt(_382/5);}var strt=date.getDay();var adj=0;if(strt==6&&_382>0){adj=1;}else{if(strt==0&&_382<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_382>0)?2:-2;}_382=(7*_385)+days+adj;break;case "year":_384="FullYear";_383=true;break;case "week":_382*=7;break;case "quarter":_382*=3;case "month":_383=true;_384="Month";break;default:_384="UTC"+_381.charAt(0).toUpperCase()+_381.substring(1)+"s";}if(_384){sum["set"+_384](sum["get"+_384]()+_382);}if(_383&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_386,_387,_388){_387=_387||new Date();_388=_388||"day";var _389=_387.getFullYear()-_386.getFullYear();var _38a=1;switch(_388){case "quarter":var m1=_386.getMonth();var m2=_387.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_389*4);_38a=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(_386,_387,"day"));var _38b=parseInt(dojo.date.difference(_386,_387,"week"));var mod=days%7;if(mod==0){days=_38b*5;}else{var adj=0;var aDay=_386.getDay();var bDay=_387.getDay();_38b=parseInt(days/7);mod=days%7;var _38c=new Date(_386);_38c.setDate(_38c.getDate()+(_38b*7));var _38d=_38c.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_38d+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_38d+mod)<0:adj=2;}}}days+=adj;days-=(_38b*2);}_38a=days;break;case "year":_38a=_389;break;case "month":_38a=(_387.getMonth()-_386.getMonth())+(_389*12);break;case "week":_38a=parseInt(dojo.date.difference(_386,_387,"day")/7);break;case "day":_38a/=24;case "hour":_38a/=60;case "minute":_38a/=60;case "second":_38a/=1000;case "millisecond":_38a*=_387.getTime()-_386.getTime();}return Math.round(_38a);};return dojo.date;});},"versa/api/Groups":function(){define("versa/api/Groups",["dojo/_base/declare","versa/api/_Collection","versa/api/Group"],function(_38e){var o=_38e("versa.api.Groups",[versa.api._Collection],{zone:null,_matchesQuery:function(item,_38f){if(dojo.isArray(item)||(item.hasOwnProperty("user_id"))){return false;}var _390=_38f.query;var _391=_38f.queryOptions&&_38f.queryOptions.ignoreCase;for(var i in _390){var _392=_390[i];var _393=this.getValue(item,i);if((typeof _392=="string"&&(_392.match(/[\*\.]/)||_391))?!dojo.data.util.filter.patternToRegExp(_392,_391).test(_393):_393!=_392){return false;}}return true;},constructor:function(args){this.zone=args.zone;this.target=dojo.replace(versa.api.Groups.TRGT,this.zone);this.schema=versa.api.Group.schema;this.cache=true;this._initialize();this.store.matchesQuery=dojo.hitch(this,this._matchesQuery);},getAdmin:function(){var _394=null;this.forEach(function(item){if(item.is_admin){_394=item;}},this);return _394;},getEveryone:function(){var _395=null;this.forEach(function(item){if(item.is_everyone){_395=item;}},this);return _395;}});o.TRGT="/zones/{subdomain}/groups";return o;});},"dijit/layout/_ContentPaneResizeMixin":function(){define("dijit/layout/_ContentPaneResizeMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/_base/lang","dojo/query","dojo/_base/sniff","dojo/_base/window","../registry","./utils","../_Contained"],function(_396,_397,_398,_399,_39a,lang,_39b,has,win,_39c,_39d,_39e){return _397("dijit.layout._ContentPaneResizeMixin",null,{doLayout:true,isLayoutContainer:true,startup:function(){if(this._started){return;}var _39f=this.getParent();this._childOfLayoutWidget=_39f&&_39f.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);if(this._isShown()){this._onShow();}if(!this._childOfLayoutWidget){this.connect(has("ie")?this.domNode:win.global,"onresize",function(){this._needLayout=!this._childOfLayoutWidget;this.resize();});}},_checkIfSingleChild:function(){var _3a0=_39b("> *",this.containerNode).filter(function(node){return node.tagName!=="SCRIPT";}),_3a1=_3a0.filter(function(node){return _398.has(node,"data-dojo-type")||_398.has(node,"dojoType")||_398.has(node,"widgetId");}),_3a2=_396.filter(_3a1.map(_39c.byNode),function(_3a3){return _3a3&&_3a3.domNode&&_3a3.resize;});if(_3a0.length==_3a1.length&&_3a2.length==1){this._singleChild=_3a2[0];}else{delete this._singleChild;}_399.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},resize:function(_3a4,_3a5){if(!this._wasShown&&this.open!==false){this._onShow();}this._resizeCalled=true;this._scheduleLayout(_3a4,_3a5);},_scheduleLayout:function(_3a6,_3a7){if(this._isShown()){this._layout(_3a6,_3a7);}else{this._needLayout=true;this._changeSize=_3a6;this._resultSize=_3a7;}},_layout:function(_3a8,_3a9){if(_3a8){_39a.setMarginBox(this.domNode,_3a8);}var cn=this.containerNode;if(cn===this.domNode){var mb=_3a9||{};lang.mixin(mb,_3a8||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_39a.getMarginBox(cn),mb);}this._contentBox=_39d.marginBox2contentBox(cn,mb);}else{this._contentBox=_39a.getContentBox(cn);}this._layoutChildren();delete this._needLayout;},_layoutChildren:function(){if(this.doLayout){this._checkIfSingleChild();}if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||_39a.getContentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{_396.forEach(this.getChildren(),function(_3aa){if(_3aa.resize){_3aa.resize();}});}},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var node=this.domNode,_3ab=this.domNode.parentNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!_399.contains(node,"dijitHidden")&&_3ab&&_3ab.style&&(_3ab.style.display!="none");}}},_onShow:function(){if(this._needLayout){this._layout(this._changeSize,this._resultSize);}this.inherited(arguments);this._wasShown=true;}});});},"versa/api/ChoiceLists":function(){define("versa/api/ChoiceLists",["dojo/_base/declare","versa/api/ChoiceList","versa/api/_Collection","versa/api/Error","versa/api/DataTypes"],function(_3ac){var o=_3ac("versa.api.ChoiceLists",[versa.api._Collection],{_matchesQuery:function(item,_3ad){if(dojo.isArray(item)||(item.hasOwnProperty("sort_order"))){return false;}var _3ae=_3ad.query;var _3af=_3ad.queryOptions&&_3ad.queryOptions.ignoreCase;for(var i in _3ae){var _3b0=_3ae[i];var _3b1=this.getValue(item,i);if((typeof _3b0=="string"&&(_3b0.match(/[\*\.]/)||_3af))?!dojo.data.util.filter.patternToRegExp(_3b0,_3af).test(_3b1):_3b1!=_3b0){return false;}}return true;},constructor:function(args){this.zone=args.zone;this.library=args.library;this.target=dojo.replace(versa.api.ChoiceLists.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.ChoiceList.schema;this.cache=true;this._initialize();this.store.matchesQuery=dojo.hitch(this,this._matchesQuery);},isValidItem:function(args){var _3b2=this.inherited(arguments);var item=args.item;var _3b3=args.choice_values;if(!_3b2){return;}if(item.name.length<1){throw new Error("Choice List 'Name' is empty or invalid");}if((!_3b3)||(_3b3.length<1)){throw new Error("Choice List '"+item.name+"' does not contain any values");}return true;}});o.TRGT="/zones/{0}/libraries/{1}/choice_lists";return o;});},"versa/widget/mobile/Heading":function(){require(["dojo/_base/declare","dojox/mobile/Heading"],function(_3b4){_3b4("versa.widget.mobile.Heading",[dijit._WidgetBase,dojox.mobile.Heading],{fixed:"top",logoffButton:null,constructor:function(args){if(args.moveTo){this.back="Back";}this.inherited("constructor",arguments);},findCurrentView:function(){var w=this;while(true){w=w.getParent();if(!w){return null;}if(w.isInstanceOf(dojox.mobile.View)){break;}}return w;},postCreate:function(args){this.set("label",this.label.display_limit(12));this.inherited("postCreate",arguments);this.logoffButton=new dojox.mobile.ToolBarButton({label:"Logoff",from:this.from,onClick:dojo.hitch(this,function(){this.onCommand(versa.widget.zone.mobile.Show.COMMANDS.LOGOFF,{from:this.from});}),style:"float: right;"});this.addChild(this.logoffButton);},_setMoveToAttr:function(_3b5){this.moveTo=_3b5;if(this.moveTo){this.set("back","Back");}else{this.set("back",null);}}});});},"versa/widget/document/mobile/LargeTextView":function(){require(["dojo/_base/declare","dijit/_WidgetBase","dojox/mobile/Heading","dojox/mobile/ScrollableView","dojox/mobile/EdgeToEdgeDataList","dojox/mobile/ToolBarButton","dojox/mobile/ContentPane","versa/api/Folders","versa/api/Documents","versa/api/Zones","dojo/data/ItemFileWriteStore","dojo/date/locale"],function(_3b6){_3b6("versa.widget.document.mobile.LargeTextView",[dijit._WidgetBase,dojox.mobile.ScrollableView],{document:null,library:null,property:null,header:null,footer:null,cpContent:null,constructor:function(args){},postCreate:function(){this.inherited("postCreate",arguments);this.header=new versa.widget.mobile.Heading({label:this.label,from:this,back:this.back,onCommand:this.onCommand});this.footer=new versa.widget.mobile.Footing({onCommand:this.onCommand,from:this});this.cpContent=new dojox.mobile.ContentPane({content:this.document[this.property]});this.addChild(this.header);this.addChild(this.footer);this.addChild(this.cpContent);},onBeforeTransitionIn:function(){this.findAppBars();this.resize();},onBeforeTransitionOut:function(){this.findAppBars();this.resize();},startup:function(){this.inherited("startup",arguments);}});});},"versa/api/SharedItem":function(){define("versa/api/SharedItem",["dojo/_base/declare","versa/api/_Object","versa/api/Utilities"],function(_3b7){var o=_3b7("versa.api.SharedItem",[versa.api._Object],{zone:null,constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},copyLocal:function(args){var zone=args.zone;var _3b8=args.share;var form=args.form;var url=dojo.replace(versa.api.SharedItem.CP_TRGT,[zone.subdomain,_3b8.fingerprint,this.getId()]);form.set("action",url);form.set("target","_self");form.set("method","post");form.submit();},view:function(args){var zone=args.zone;var _3b9=args.share;var form=args.form;var url=dojo.replace(versa.api.SharedItem.VW_TRGT,[zone.subdomain,_3b9.fingerprint,this.getId()]);versa.api.Utilities.viewUrl({windowBox:args.windowBox,url:url,window_name:"versa_viewer"});}});o.VW_TRGT="/zones/{0}/shares/{1}/download/?item_id={2}&disposition=inline";o.CP_TRGT="/zones/{0}/shares/{1}/download/?item_id={2}&disposition=attachment";o.schema={type:"object",properties:{"id":{type:"integer"}},prototype:new o()};return o;});},"dojo/cldr/supplemental":function(){define("dojo/cldr/supplemental",["../_base/kernel","../_base/lang","../i18n"],function(dojo,lang){lang.getObject("cldr.supplemental",true,dojo);dojo.cldr.supplemental.getFirstDayOfWeek=function(_3ba){var _3bb={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0};var _3bc=dojo.cldr.supplemental._region(_3ba);var dow=_3bb[_3bc];return (dow===undefined)?1:dow;};dojo.cldr.supplemental._region=function(_3bd){_3bd=dojo.i18n.normalizeLocale(_3bd);var tags=_3bd.split("-");var _3be=tags[1];if(!_3be){_3be={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_3be.length==4){_3be=tags[2];}}return _3be;};dojo.cldr.supplemental.getWeekend=function(_3bf){var _3c0={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5};var _3c1={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6};var _3c2=dojo.cldr.supplemental._region(_3bf);var _3c3=_3c0[_3c2];var end=_3c1[_3c2];if(_3c3===undefined){_3c3=6;}if(end===undefined){end=0;}return {start:_3c3,end:end};};return dojo.cldr.supplemental;});},"versa/api/Library":function(){define("versa/api/Library",["dojo/_base/declare","versa/api/_Object","versa/api/_Securable","versa/api/ChoiceLists","versa/api/Documents","versa/api/DocumentTypes","versa/api/Folders","versa/api/PropertyDefinitions","versa/api/References","versa/api/ViewMappings"],function(_3c4){var o=_3c4("versa.api.Library",[versa.api._Object,versa.api._Securable],{zone:null,_choiceLists:null,_documents:null,_documentTypes:null,_folders:null,_propertyDefinitions:null,_references:null,_viewDefinitions:null,_viewMappings:null,_cellDefinitions:null,description:null,constructor:function(args){_3c4.safeMixin(this,((!args)?{}:args));this.securable_type=versa.api._Securable.types.Library;},createShare:function(args){var _3c5=args.shareRoot;var _3c6={parent:_3c5,attribute:"children"};var _3c7=this.getFolders().store.newItem({name:args.name,folder_type:versa.api.Folder.FolderTypes.SHARE,parent_id:_3c5.getId(),password:args.password,expiry:args.expiry,seed_id:(args.seed)?args.seed.getId():null,children:[]},_3c6);this.getFolders().store.changing(_3c7);return _3c7;},empty_trash:function(args){var zone=args.zone;var url=dojo.replace(versa.api.Library.EMPTYTRASH_TRGT,[zone.subdomain,this.getId()]);var _3c8=versa.api.XhrHelper.doPutAction({target:url,putData:{}});return true;},getChoiceLists:function(){if(!this._choiceLists){this._choiceLists=new versa.api.ChoiceLists({zone:this.zone,library:this});}return this._choiceLists;},getDocuments:function(){if(!this._documents){this._documents=new versa.api.Documents({zone:this.zone,library:this});}return this._documents;},getDocumentTypes:function(){if(!this._documentTypes){this._documentTypes=new versa.api.DocumentTypes({zone:this.zone,library:this});}return this._documentTypes;},getFolders:function(){if(!this._folders){this._folders=new versa.api.Folders({zone:this.zone,library:this});}return this._folders;},getPropertyDefinitions:function(){if(!this._propertyDefinitions){this._propertyDefinitions=new versa.api.PropertyDefinitions({zone:this.zone,library:this});}return this._propertyDefinitions;},getPropertyMappings:function(){if(!this._propertyMappings){this._propertyMappings=new versa.api.PropertyMappings({zone:this.zone,library:this});}return this._propertyMappings;},getReferences:function(){if(!this._references){this._references=new versa.api.References({zone:this.zone,library:this});}return this._references;},getViewDefinitions:function(){if(!this._viewDefinitions){this._viewDefinitions=new versa.api.ViewDefinitions({zone:this.zone,library:this});}return this._viewDefinitions;},getViewMappings:function(){if(!this._viewMappings){this._viewMappings=new versa.api.ViewMappings({zone:this.zone,library:this});}return this._viewMappings;},getCellDefinitions:function(){if(!this._cellDefinitions){this._cellDefinitions=new versa.api.CellDefinitions({zone:this.zone,library:this});}return this._cellDefinitions;}});o.EMPTYTRASH_TRGT="/zones/{0}/libraries/{1}/empty_trash.json";o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"description":{type:"string"},"created_at":{type:"date",format:"date-time"},"created_by":{type:"string"},"updated_at":{type:"date",format:"date-time"},"updated_by":{type:"string"}},prototype:new o()};return o;});},"versa/api/SharedItems":function(){define("versa/api/SharedItems",["dojo/_base/declare","versa/api/_Collection","versa/api/SharedItem"],function(_3c9){var o=_3c9("versa.api.SharedItems",[versa.api._Collection],{zone:null,share:null,constructor:function(args){this.zone=args.zone;this.share=args.share;this.target=dojo.replace(versa.api.SharedItems.TRGT,[this.zone.subdomain,this.share.fingerprint]);this.schema=versa.api.SharedItem.schema;this.cache=true;this._initialize();}});o.TRGT="/zones/{0}/shares/{1}/shared_items";return o;});},"dojox/data/JsonRestStore":function(){define("dojox/data/JsonRestStore",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojox/rpc/Rest","dojox/rpc/JsonRest","dojox/json/schema","dojox/data/ServiceStore"],function(lang,_3ca,_3cb,_3cc,_3cd,_3ce,_3cf){var _3d0=_3ca("dojox.data.JsonRestStore",_3cf,{constructor:function(_3d1){_3cb.connect(_3cc._index,"onUpdate",this,function(obj,_3d2,_3d3,_3d4){var _3d5=this.service.servicePath;if(!obj.__id){}else{if(obj.__id.substring(0,_3d5.length)==_3d5){this.onSet(obj,_3d2,_3d3,_3d4);}}});this.idAttribute=this.idAttribute||"id";if(typeof _3d1.target=="string"){_3d1.target=_3d1.target.match(/\/$/)||this.allowNoTrailingSlash?_3d1.target:(_3d1.target+"/");if(!this.service){this.service=_3cd.services[_3d1.target]||_3cc(_3d1.target,true);}}_3cd.registerService(this.service,_3d1.target,this.schema);this.schema=this.service._schema=this.schema||this.service._schema||{};this.service._store=this;this.service.idAsRef=this.idAsRef;this.schema._idAttr=this.idAttribute;var _3d6=_3cd.getConstructor(this.service);var self=this;this._constructor=function(data){_3d6.call(this,data);self.onNew(this);};this._constructor.prototype=_3d6.prototype;this._index=_3cc._index;},loadReferencedSchema:true,idAsRef:false,referenceIntegrity:true,target:"",allowNoTrailingSlash:false,newItem:function(data,_3d7){data=new this._constructor(data);if(_3d7){var _3d8=this.getValue(_3d7.parent,_3d7.attribute,[]);_3d8=_3d8.concat([data]);data.__parent=_3d8;this.setValue(_3d7.parent,_3d7.attribute,_3d8);}return data;},deleteItem:function(item){var _3d9=[];var _3da=_3db._getStoreForItem(item)||this;if(this.referenceIntegrity){_3cd._saveNotNeeded=true;var _3dc=_3cc._index;var _3dd=function(_3de){var _3df;_3d9.push(_3de);_3de.__checked=1;for(var i in _3de){if(i.substring(0,2)!="__"){var _3e0=_3de[i];if(_3e0==item){if(_3de!=_3dc){if(_3de instanceof Array){(_3df=_3df||[]).push(i);}else{(_3db._getStoreForItem(_3de)||_3da).unsetAttribute(_3de,i);}}}else{if((typeof _3e0=="object")&&_3e0){if(!_3e0.__checked){_3dd(_3e0);}if(typeof _3e0.__checked=="object"&&_3de!=_3dc){(_3db._getStoreForItem(_3de)||_3da).setValue(_3de,i,_3e0.__checked);}}}}}if(_3df){i=_3df.length;_3de=_3de.__checked=_3de.concat();while(i--){_3de.splice(_3df[i],1);}return _3de;}return null;};_3dd(_3dc);_3cd._saveNotNeeded=false;var i=0;while(_3d9[i]){delete _3d9[i++].__checked;}}_3cd.deleteObject(item);_3da.onDelete(item);},changing:function(item,_3e1){_3cd.changing(item,_3e1);},cancelChanging:function(_3e2){if(!_3e2.__id){return;}dirtyObjects=_3e3=_3cd.getDirtyObjects();for(var i=0;i<dirtyObjects.length;i++){var _3e3=dirtyObjects[i];if(_3e2==_3e3.object){dirtyObjects.splice(i,1);return;}}},setValue:function(item,_3e4,_3e5){var old=item[_3e4];var _3e6=item.__id?_3db._getStoreForItem(item):this;if(_3ce&&_3e6.schema&&_3e6.schema.properties){_3ce.mustBeValid(_3ce.checkPropertyChange(_3e5,_3e6.schema.properties[_3e4]));}if(_3e4==_3e6.idAttribute){throw new Error("Can not change the identity attribute for an item");}_3e6.changing(item);item[_3e4]=_3e5;if(_3e5&&!_3e5.__parent){_3e5.__parent=item;}_3e6.onSet(item,_3e4,old,_3e5);},setValues:function(item,_3e7,_3e8){if(!lang.isArray(_3e8)){throw new Error("setValues expects to be passed an Array object as its value");}this.setValue(item,_3e7,_3e8);},unsetAttribute:function(item,_3e9){this.changing(item);var old=item[_3e9];delete item[_3e9];this.onSet(item,_3e9,old,undefined);},save:function(_3ea){if(!(_3ea&&_3ea.global)){(_3ea=_3ea||{}).service=this.service;}if("syncMode" in _3ea?_3ea.syncMode:this.syncMode){rpcConfig._sync=true;}var _3eb=_3cd.commit(_3ea);this.serverVersion=this._updates&&this._updates.length;return _3eb;},revert:function(_3ec){_3cd.revert(_3ec&&_3ec.global&&this.service);},isDirty:function(item){return _3cd.isDirty(item,this);},isItem:function(item,_3ed){return item&&item.__id&&(_3ed||this.service==_3cd.getServiceAndId(item.__id).service);},_doQuery:function(args){var _3ee=typeof args.queryStr=="string"?args.queryStr:args.query;var _3ef=_3cd.query(this.service,_3ee,args);var self=this;if(this.loadReferencedSchema){_3ef.addCallback(function(_3f0){var _3f1=_3ef.ioArgs&&_3ef.ioArgs.xhr&&_3ef.ioArgs.xhr.getResponseHeader("Content-Type");var _3f2=_3f1&&_3f1.match(/definedby\s*=\s*([^;]*)/);if(_3f1&&!_3f2){_3f2=_3ef.ioArgs.xhr.getResponseHeader("Link");_3f2=_3f2&&_3f2.match(/<([^>]*)>;\s*rel="?definedby"?/);}_3f2=_3f2&&_3f2[1];if(_3f2){var _3f3=_3cd.getServiceAndId((self.target+_3f2).replace(/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,"$2$3"));var _3f4=_3cd.byId(_3f3.service,_3f3.id);_3f4.addCallbacks(function(_3f5){lang.mixin(self.schema,_3f5);return _3f0;},function(_3f6){return _3f0;});return _3f4;}return undefined;});}return _3ef;},_processResults:function(_3f7,_3f8){var _3f9=_3f7.length;return {totalCount:_3f8.fullLength||(_3f8.request.count==_3f9?(_3f8.request.start||0)+_3f9*2:_3f9),items:_3f7};},getConstructor:function(){return this._constructor;},getIdentity:function(item){var id=item.__clientId||item.__id;if(!id){return id;}var _3fa=this.service.servicePath.replace(/[^\/]*$/,"");return id.substring(0,_3fa.length)!=_3fa?id:id.substring(_3fa.length);},fetchItemByIdentity:function(args){var id=args.identity;var _3fb=this;if(id.toString().match(/^(\w*:)?\//)){var _3fc=_3cd.getServiceAndId(id);_3fb=_3fc.service._store;args.identity=_3fc.id;}args._prefix=_3fb.service.servicePath.replace(/[^\/]*$/,"");return _3fb.inherited(arguments);},onSet:function(){},onNew:function(){},onDelete:function(){},getFeatures:function(){var _3fd=this.inherited(arguments);_3fd["dojo.data.api.Write"]=true;_3fd["dojo.data.api.Notification"]=true;return _3fd;},getParent:function(item){return item&&item.__parent;}});_3d0.getStore=function(_3fe,_3ff){if(typeof _3fe.target=="string"){_3fe.target=_3fe.target.match(/\/$/)||_3fe.allowNoTrailingSlash?_3fe.target:(_3fe.target+"/");var _400=(_3cd.services[_3fe.target]||{})._store;if(_400){return _400;}}return new (_3ff||_3d0)(_3fe);};var _3db=lang.getObject("dojox.data",true);_3db._getStoreForItem=function(item){if(item.__id){var _401=_3cd.getServiceAndId(item.__id);if(_401&&_401.service._store){return _401.service._store;}else{var _402=item.__id.toString().match(/.*\//)[0];return new _3d0({target:_402});}}return null;};var _403=lang.getObject("dojox.json.ref",true);_403._useRefs=true;return _3d0;});},"versa/widget/document/mobile/DocumentContentView":function(){require(["dojo/_base/declare","dijit/_WidgetBase","dojox/mobile/Heading","dojox/mobile/ScrollableView","dojox/mobile/EdgeToEdgeDataList","dojox/mobile/ToolBarButton","dojox/mobile/ContentPane","versa/api/Folders","versa/api/Documents","versa/api/Zones","dojo/data/ItemFileWriteStore","dojo/date/locale"],function(_404){_404("versa.widget.document.mobile.DocumentContentView",[dijit._WidgetBase,dojox.mobile.ScrollableView],{reference:null,zone:null,library:null,header:null,footer:null,cpContent:null,constructor:function(args){},postCreate:function(){this.inherited("postCreate",arguments);this.header=new versa.widget.mobile.Heading({label:this.reference.name,from:this,moveTo:this.back,onCommand:this.onCommand});this.footer=new versa.widget.mobile.Footing({onCommand:this.onCommand,from:this});if(this.reference.binary_content_type.indexOf("image")>=0){this.cpContent=new dojox.mobile.ContentPane({content:dojo.replace("<div style=\"text-align: center;vertical-align: middle;width: 100%; height: 100%;\">"+"<img src=\"{0}\" style=\"max-width: 100%; max-height: 100%;\"/>"+"</div>",[this.reference.getViewUrl(this.zone,this.library)])});}else{if(this.reference.binary_content_type.indexOf("text")>=0){this.cpContent=new dojox.mobile.ContentPane({content:""});dojo.xhrGet({url:this.reference.getViewUrl(this.zone,this.library),handleAs:"text",load:dojo.hitch(this,function(data){data=data.replace(/\n/g,"<br/>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");this.cpContent.domNode.innerHTML=data;})});}}this.addChild(this.header);this.addChild(this.footer);this.addChild(this.cpContent);},onBeforeTransitionIn:function(){this.findAppBars();this.resize();},onBeforeTransitionOut:function(){this.findAppBars();this.resize();},startup:function(){this.inherited("startup",arguments);}});});},"dijit/_base/manager":function(){define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","../registry",".."],function(_405,_406,_407,_408){_405.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(name){_408[name]=_407[name];});_408.defaultDuration=_406["defaultDuration"]||200;return _408;});},"versa/widget/search/mobile/TextBox":function(){define("versa/widget/search/mobile/TextBox",["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojox/mobile/Button","dijit/form/Form","versa/api/Search","versa/widget/mobile/TextBox"],function(_409){return _409("versa.widget.search.mobile.TextBox",[dijit._WidgetBase,dijit._TemplatedMixin],{header:null,templateString:dojo.cache("versa.widget.search.mobile","template/TextBox.html","<div>\n\n<div style=\"width: inherit;padding: 10px; text-align: center;\">\n    <table cellpadding=\"0\" cellspacing=\"0\" style=\"width: 300px;margin-left: auto; margin-right: auto; height: 35px;\" class=\"searchTextBox\">\n        <tr>\n            <td style=\"\">\n                <div dojoAttachPoint=\"formNode\">\n                    <input dojoAttachPoint=\"textboxNode,focusNode\"/>\n                </div>\n            </td>\n            <td style=\"width:1px\"><button dojoAttachPoint=\"submitButtonNode\"></button></td>\n        </tr>\n    </table>\n</div>\n\n</div>"),operators:null,library:null,_form:null,activeQuery:null,txtSearch:null,constructor:function(args){},onSearch:function(_40a){},postCreate:function(){this.inherited("postCreate",arguments);this._form=new dijit.form.Form({onSubmit:dojo.hitch(this,this._onSubmit),onReset:dojo.hitch(this,this.reset)},this.formNode);this.btnSearch=new dojox.mobile.Button({baseClass:"imageButton commandIcon32 bfreeIconSearch32",label:"",showLabel:false,type:"submit",onClick:dojo.hitch(this,this._onClick)},this.submitButtonNode);this.txtSearch=new versa.widget.mobile.TextBox({intermediateChanges:true,placeHolder:"Search documents...",style:"border:0;font-size:20px;width:100%;background:transparent;"},this.textboxNode);},_onSubmit:function(e){this.submit();},_onClick:function(){this.submit();},reset:function(){this.txtSearch.set("value","");},submit:function(){},startup:function(){this.inherited("startup",arguments);}});});},"versa/api/ViewMapping":function(){define("versa/api/ViewMapping",["dojo/_base/declare","versa/api/_Object","versa/api/Error"],function(_40b){var o=_40b("versa.api.ViewMapping",[versa.api._Object],{constructor:function(args){if(args){dojo.safeMixin(this,args);}}});o.compare=function(_40c,_40d){return _40c.sort_order-_40d.sort_order;};o.schema={type:"object",properties:{"library_id":{type:"integer"},"folder_id":{type:"integer"},"user_id":{type:"integer"},"view_id":{type:"integer"}}};return o;});},"dojox/mobile/common":function(){define("dojox/mobile/common",["dojo/_base/kernel","dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/ready","dijit/registry","./sniff","./uacss"],function(dojo,_40e,_40f,_410,lang,win,_411,_412,_413,_414,_415,has,_416){var dm=lang.getObject("dojox.mobile",true);dm.getScreenSize=function(){return {h:win.global.innerHeight||win.doc.documentElement.clientHeight,w:win.global.innerWidth||win.doc.documentElement.clientWidth};};dm.updateOrient=function(){var dim=dm.getScreenSize();_411.replace(win.doc.documentElement,dim.h>dim.w?"dj_portrait":"dj_landscape",dim.h>dim.w?"dj_landscape":"dj_portrait");};dm.updateOrient();dm.tabletSize=500;dm.detectScreenSize=function(_417){var dim=dm.getScreenSize();var sz=Math.min(dim.w,dim.h);var from,to;if(sz>=dm.tabletSize&&(_417||(!this._sz||this._sz<dm.tabletSize))){from="phone";to="tablet";}else{if(sz<dm.tabletSize&&(_417||(!this._sz||this._sz>=dm.tabletSize))){from="tablet";to="phone";}}if(to){_411.replace(win.doc.documentElement,"dj_"+to,"dj_"+from);_410.publish("/dojox/mobile/screenSize/"+to,[dim]);}this._sz=sz;};dm.detectScreenSize();dm.setupIcon=function(_418,_419){if(_418&&_419){var arr=_40e.map(_419.split(/[ ,]/),function(item){return item-0;});var t=arr[0];var r=arr[1]+arr[2];var b=arr[0]+arr[3];var l=arr[1];_413.set(_418,{clip:"rect("+t+"px "+r+"px "+b+"px "+l+"px)",top:(_418.parentNode?_413.get(_418,"top"):0)-t+"px",left:-l+"px"});}};dm.hideAddressBarWait=typeof (_40f["mblHideAddressBarWait"])==="number"?_40f["mblHideAddressBarWait"]:1500;dm.hide_1=function(_41a){scrollTo(0,1);var h=dm.getScreenSize().h+"px";if(has("android")){if(_41a){win.body().style.minHeight=h;}dm.resizeAll();}else{if(_41a||dm._h===h&&h!==win.body().style.minHeight){win.body().style.minHeight=h;dm.resizeAll();}}dm._h=h;};dm.hide_fs=function(){var t=win.body().style.minHeight;win.body().style.minHeight=(dm.getScreenSize().h*2)+"px";scrollTo(0,1);setTimeout(function(){dm.hide_1(1);dm._hiding=false;},1000);};dm.hideAddressBar=function(evt){if(dm.disableHideAddressBar||dm._hiding){return;}dm._hiding=true;dm._h=0;win.body().style.minHeight=(dm.getScreenSize().h*2)+"px";setTimeout(dm.hide_1,0);setTimeout(dm.hide_1,200);setTimeout(dm.hide_1,800);setTimeout(dm.hide_fs,dm.hideAddressBarWait);};dm.resizeAll=function(evt,root){if(dm.disableResizeAll){return;}_410.publish("/dojox/mobile/resizeAll",[evt,root]);dm.updateOrient();dm.detectScreenSize();var _41b=function(w){var _41c=w.getParent&&w.getParent();return !!((!_41c||!_41c.resize)&&w.resize);};var _41d=function(w){_40e.forEach(w.getChildren(),function(_41e){if(_41b(_41e)){_41e.resize();}_41d(_41e);});};if(root){if(root.resize){root.resize();}_41d(root);}else{_40e.forEach(_40e.filter(_415.toArray(),_41b),function(w){w.resize();});}};dm.openWindow=function(url,_41f){win.global.open(url,_41f||"_blank");};dm.createDomButton=function(_420,_421,_422){if(!dm._domButtons){if(has("webkit")){var _423=function(_424,dic){var i,j;if(!_424){var dic={};var ss=dojo.doc.styleSheets;for(i=0;i<ss.length;i++){ss[i]&&_423(ss[i],dic);}return dic;}var _425=_424.cssRules||[];for(i=0;i<_425.length;i++){var rule=_425[i];if(rule.href&&rule.styleSheet){_423(rule.styleSheet,dic);}else{if(rule.selectorText){var sels=rule.selectorText.split(/,/);for(j=0;j<sels.length;j++){var sel=sels[j];var n=sel.split(/>/).length-1;if(sel.match(/(mblDomButton\w+)/)){var cls=RegExp.$1;if(!dic[cls]||n>dic[cls]){dic[cls]=n;}}}}}}};dm._domButtons=_423();}else{dm._domButtons={};}}var s=_420.className;var node=_422||_420;if(s.match(/(mblDomButton\w+)/)&&s.indexOf("/")===-1){var _426=RegExp.$1;var nDiv=4;if(s.match(/(mblDomButton\w+_(\d+))/)){nDiv=RegExp.$2-0;}else{if(dm._domButtons[_426]!==undefined){nDiv=dm._domButtons[_426];}}var _427=null;if(has("bb")&&_40f["mblBBBoxShadowWorkaround"]!==false){_427={style:"-webkit-box-shadow:none"};}for(var i=0,p=node;i<nDiv;i++){p=p.firstChild||_412.create("DIV",_427,p);}if(_422){setTimeout(function(){_411.remove(_420,_426);},0);_411.add(_422,_426);}}else{if(s.indexOf(".")!==-1){_412.create("IMG",{src:s},node);}else{return null;}}_411.add(node,"mblDomButton");if(_40f["mblAndroidWorkaround"]!==false&&has("android")>=2.2){_413.set(node,"webkitTransform","translate3d(0,0,0)");}!!_421&&_413.set(node,_421);return node;};dm.createIcon=function(icon,_428,node,_429,_42a){if(icon&&icon.indexOf("mblDomButton")===0){if(node&&node.className.match(/(mblDomButton\w+)/)){_411.remove(node,RegExp.$1);}else{node=_412.create("DIV");}node.title=_429;_411.add(node,icon);dm.createDomButton(node);}else{if(icon&&icon!=="none"){if(!node||node.nodeName!=="IMG"){node=_412.create("IMG",{alt:_429});}node.src=(icon||"").replace("${theme}",dm.currentTheme);dm.setupIcon(node,_428);if(_42a&&_428){var arr=_428.split(/[ ,]/);_413.set(_42a,{width:arr[2]+"px",height:arr[3]+"px"});}}}if(_42a){_42a.appendChild(node);}return node;};dm._iw=_40f["mblIosWorkaround"]!==false&&has("iphone");if(dm._iw){dm._iwBgCover=_412.create("div");}if(_40f.parseOnLoad){_414(90,function(){var _42b=win.body().getElementsByTagName("*");var i,len,s;len=_42b.length;for(i=0;i<len;i++){s=_42b[i].getAttribute("dojoType");if(s){if(_42b[i].parentNode.getAttribute("lazy")=="true"){_42b[i].setAttribute("__dojoType",s);_42b[i].removeAttribute("dojoType");}}}});}_414(function(){dm.detectScreenSize(true);if(_40f["mblApplyPageStyles"]!==false){_411.add(win.doc.documentElement,"mobile");}if(has("chrome")){_411.add(win.doc.documentElement,"dj_chrome");}if(_40f["mblAndroidWorkaround"]!==false&&has("android")>=2.2){if(_40f["mblAndroidWorkaroundButtonStyle"]!==false){_412.create("style",{innerHTML:"BUTTON,INPUT[type='button'],INPUT[type='submit'],INPUT[type='reset'],INPUT[type='file']::-webkit-file-upload-button{-webkit-appearance:none;}"},win.doc.head,"first");}if(has("android")<3){_413.set(win.doc.documentElement,"webkitTransform","translate3d(0,0,0)");_410.connect(null,"onfocus",null,function(e){_413.set(win.doc.documentElement,"webkitTransform","");});_410.connect(null,"onblur",null,function(e){_413.set(win.doc.documentElement,"webkitTransform","translate3d(0,0,0)");});}else{if(_40f["mblAndroid3Workaround"]!==false){_413.set(win.doc.documentElement,{webkitBackfaceVisibility:"hidden",webkitPerspective:8000});}}}var f=dm.resizeAll;if(_40f["mblHideAddressBar"]!==false&&navigator.appVersion.indexOf("Mobile")!=-1||_40f["mblForceHideAddressBar"]===true){dm.hideAddressBar();if(_40f["mblAlwaysHideAddressBar"]===true){f=dm.hideAddressBar;}}var _42c=dm.getScreenSize();_410.connect(null,"onresize",null,function(e){var _42d=dm.getScreenSize();if(_42d.w==_42c.w&&Math.abs(_42d.h-_42c.h)>=100){_f(e);}_42c=_42d;});_410.connect(null,(win.global.onorientationchange!==undefined&&!has("android"))?"onorientationchange":"onresize",null,f);var _42e=win.body().getElementsByTagName("*");var i,len=_42e.length,s;for(i=0;i<len;i++){s=_42e[i].getAttribute("__dojoType");if(s){_42e[i].setAttribute("dojoType",s);_42e[i].removeAttribute("__dojoType");}}if(dojo.hash){var _42f=function(root){if(!root){return [];}var arr=_415.findWidgets(root);var _430=arr;for(var i=0;i<_430.length;i++){arr=arr.concat(_42f(_430[i].containerNode));}return arr;};_410.subscribe("/dojo/hashchange",null,function(_431){var view=dm.currentView;if(!view){return;}var _432=dm._params;if(!_432){var _433=_431?_431:dm._defaultView.id;var _434=_42f(view.domNode);var dir=1,_435="slide";for(i=0;i<_434.length;i++){var w=_434[i];if("#"+_433==w.moveTo){_435=w.transition;dir=(w instanceof dm.Heading)?-1:1;break;}}_432=[_433,dir,_435];}view.performTransition.apply(view,_432);dm._params=null;});}win.body().style.visibility="visible";});_415.getEnclosingWidget=function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){return _415.byId(id);}node=node._parentNode||node.parentNode;}return null;};return dm;});},"dojox/rpc/Rest":function(){define("dojox/rpc/Rest",["dojo","dojox"],function(dojo,_436){dojo.getObject("rpc.Rest",true,_436);if(_436.rpc&&_436.rpc.transportRegistry){_436.rpc.transportRegistry.register("REST",function(str){return str=="REST";},{getExecutor:function(func,_437,svc){return new _436.rpc.Rest(_437.name,(_437.contentType||svc._smd.contentType||"").match(/json|javascript/),null,function(id,args){var _438=svc._getRequest(_437,[id]);_438.url=_438.target+(_438.data?"?"+_438.data:"");if(args&&(args.start>=0||args.count>=0)){_438.headers=_438.headers||{};_438.headers.Range="items="+(args.start||"0")+"-"+(("count" in args&&args.count!=Infinity)?(args.count+(args.start||0)-1):"");}return _438;});}});}var drr;function _439(_43a,_43b,_43c,id){_43a.addCallback(function(_43d){if(_43a.ioArgs.xhr&&_43c){_43c=_43a.ioArgs.xhr.getResponseHeader("Content-Range");_43a.fullLength=_43c&&(_43c=_43c.match(/\/(.*)/))&&parseInt(_43c[1]);}return _43d;});return _43a;};drr=_436.rpc.Rest=function(path,_43e,_43f,_440){var _441;_441=function(id,args){return drr._get(_441,id,args);};_441.isJson=_43e;_441._schema=_43f;_441.cache={serialize:_43e?((_436.json&&_436.json.ref)||dojo).toJson:function(_442){return _442;}};_441._getRequest=_440||function(id,args){if(dojo.isObject(id)){id=dojo.objectToQuery(id);id=id?"?"+id:"";}if(args&&args.sort&&!args.queryStr){id+=(id?"&":"?")+"sort(";for(var i=0;i<args.sort.length;i++){var sort=args.sort[i];id+=(i>0?",":"")+(sort.descending?"-":"+")+encodeURIComponent(sort.attribute);}id+=")";}var _443={url:path+(id==null?"":id),handleAs:_43e?"json":"text",contentType:_43e?"application/json":"text/plain",sync:_436.rpc._sync,headers:{Accept:_43e?"application/json,application/javascript":"*/*"}};if(args&&(args.start>=0||args.count>=0)){_443.headers.Range="items="+(args.start||"0")+"-"+(("count" in args&&args.count!=Infinity)?(args.count+(args.start||0)-1):"");}_436.rpc._sync=false;return _443;};function _444(name){_441[name]=function(id,_445){return drr._change(name,_441,id,_445);};};_444("put");_444("post");_444("delete");_441.servicePath=path;return _441;};drr._index={};drr._timeStamps={};drr._change=function(_446,_447,id,_448){var _449=_447._getRequest(id);_449[_446+"Data"]=_448;return _439(dojo.xhr(_446.toUpperCase(),_449,true),_447);};drr._get=function(_44a,id,args){args=args||{};return _439(dojo.xhrGet(_44a._getRequest(id,args)),_44a,(args.start>=0||args.count>=0),id);};return _436.rpc.Rest;});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./registry"],function(_44b,_44c,_44d,_44e,_44f,_450,dom,_451,_452,_453,_454,_455,_456,lang,on,_457,_458,_459,win,_45a){if(!_456.isAsync){_457(0,function(){var _45b=["dijit/_base/manager"];_44b(_45b);});}var _45c={};function _45d(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _45e(attr){return function(val){_451[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _450("dijit._WidgetBase",_458,{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_45e("lang"),dir:"",_setDirAttr:_45e("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{},_blankGif:_44e.blankGif||_44b.toUrl("dojo/resources/blank.gif"),postscript:function(_45f,_460){this.create(_45f,_460);},create:function(_461,_462){this.srcNodeRef=dom.byId(_462);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_461){this.params=_461;lang.mixin(this,_461);}this.postMixInProperties();if(!this.id){this.id=_45a.getUniqueId(this.declaredClass.replace(/\./g,"_"));}_45a.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _463=this.srcNodeRef;if(_463&&_463.parentNode&&this.domNode!==_463){_463.parentNode.replaceChild(this.domNode,_463);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _464=ctor.prototype;for(var _465 in _464){if(_465 in this.attributeMap){continue;}var _466="_set"+_465.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_466 in _464){list.push(_465);}}}_44c.forEach(list,function(attr){if(this.params&&attr in this.params){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(var _467 in this.params){this.set(_467,this[_467]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||_453.create("div");}if(this.baseClass){var _468=this.baseClass.split(" ");if(!this.isLeftToRight()){_468=_468.concat(_44c.map(_468,function(name){return name+"Rtl";}));}_452.add(this.domNode,_468);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_44c.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_469){this._beingDestroyed=true;this.destroyDescendants(_469);this.destroy(_469);},destroy:function(_46a){this._beingDestroyed=true;this.uninitialize();var c;while(c=this._connects.pop()){c.remove();}var w;while(w=this._supportingWidgets.pop()){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}}this.destroyRendering(_46a);_45a.remove(this.id);this._destroyed=true;},destroyRendering:function(_46b){if(this.bgIframe){this.bgIframe.destroy(_46b);delete this.bgIframe;}if(this.domNode){if(_46b){_451.remove(this.domNode,"widgetId");}else{_453.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_46b){_453.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_46c){_44c.forEach(this.getChildren(),function(_46d){if(_46d.destroyRecursive){_46d.destroyRecursive(_46c);}});},uninitialize:function(){return false;},_setStyleAttr:function(_46e){var _46f=this.domNode;if(lang.isObject(_46e)){_455.set(_46f,_46e);}else{if(_46f.style.cssText){_46f.style.cssText+="; "+_46e;}else{_46f.style.cssText=_46e;}}this._set("style",_46e);},_attrToDom:function(attr,_470,_471){_471=arguments.length>=3?_471:this.attributeMap[attr];_44c.forEach(lang.isArray(_471)?_471:[_471],function(_472){var _473=this[_472.node||_472||"domNode"];var type=_472.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_470)){_470=lang.hitch(this,_470);}var _474=_472.attribute?_472.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);_451.set(_473,_474,_470);break;case "innerText":_473.innerHTML="";_473.appendChild(win.doc.createTextNode(_470));break;case "innerHTML":_473.innerHTML=_470;break;case "class":_452.replace(_473,_470,this[attr]);break;}},this);},get:function(name){var _475=this._getAttrNames(name);return this[_475.g]?this[_475.g]():this[name];},set:function(name,_476){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _477=this._getAttrNames(name),_478=this[_477.s];if(lang.isFunction(_478)){var _479=_478.apply(this,Array.prototype.slice.call(arguments,1));}else{var _47a=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[_47a].tagName,_47b=_45c[tag]||(_45c[tag]=_45d(this[_47a])),map=name in this.attributeMap?this.attributeMap[name]:_477.s in this?this[_477.s]:((_477.l in _47b&&typeof _476!="function")||/^aria-|^data-|^role$/.test(name))?_47a:null;if(map!=null){this._attrToDom(name,_476,map);}this._set(name,_476);}return _479||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_47c){var _47d=this[name];this[name]=_47c;if(this._watchCallbacks&&this._created&&_47c!==_47d){this._watchCallbacks(name,_47d,_47c);}},on:function(type,func){return _44d.after(this,this._onMap(type),func,true);},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_45a.findWidgets(this.containerNode):[];},getParent:function(){return _45a.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_47e,_47f){var _480=_44f.connect(obj,_47e,this,_47f);this._connects.push(_480);return _480;},disconnect:function(_481){var i=_44c.indexOf(this._connects,_481);if(i!=-1){_481.remove();this._connects.splice(i,1);}},subscribe:function(t,_482){var _483=_459.subscribe(t,lang.hitch(this,_482));this._connects.push(_483);return _483;},unsubscribe:function(_484){this.disconnect(_484);},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_454.isBodyLtr();},isFocusable:function(){return this.focus&&(_455.get(this.domNode,"display")!="none");},placeAt:function(_485,_486){if(_485.declaredClass&&_485.addChild){_485.addChild(this,_486);}else{_453.place(this.domNode,_485,_486);}return this;},getTextDir:function(text,_487){return _487;},applyTextDir:function(){}});});},"dijit/form/Form":function(){define("dijit/form/Form",["dojo/_base/declare","dojo/dom-attr","dojo/_base/event","dojo/_base/kernel","dojo/_base/sniff","../_Widget","../_TemplatedMixin","./_FormMixin","../layout/_ContentPaneResizeMixin"],function(_488,_489,_48a,_48b,has,_48c,_48d,_48e,_48f){return _488("dijit.form.Form",[_48c,_48d,_48e,_48f],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form data-dojo-attach-point='containerNode' data-dojo-attach-event='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(_490){this.encType=_490;_489.set(this.domNode,"encType",_490);if(has("ie")){this.domNode.encoding=_490;}},reset:function(e){var faux={returnValue:true,preventDefault:function(){this.returnValue=false;},stopPropagation:function(){},currentTarget:e?e.target:this.domNode,target:e?e.target:this.domNode};if(!(this.onReset(faux)===false)&&faux.returnValue){this.inherited(arguments,[]);}},onReset:function(){return true;},_onReset:function(e){this.reset(e);_48a.stop(e);return false;},_onSubmit:function(e){var fp=this.constructor.prototype;if(this.execute!=fp.execute||this.onExecute!=fp.onExecute){_48b.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0");this.onExecute();this.execute(this.getValues());}if(this.onSubmit(e)===false){_48a.stop(e);}},onSubmit:function(){return this.isValid();},submit:function(){if(!(this.onSubmit()===false)){this.containerNode.submit();}}});});},"versa/api/PropertyDefinitions":function(){define("versa/api/PropertyDefinitions",["dojo/_base/declare","versa/api/_Collection","versa/api/PropertyDefinition"],function(_491){var o=_491("versa.api.PropertyDefinitions",[versa.api._Collection],{library:null,constructor:function(args){this.zone=args.zone;this.library=args.library;this.target=dojo.replace(versa.api.PropertyDefinitions.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.PropertyDefinition.schema;this.cache=true;this._initialize();},fetchByDbName:function(_492){var _493=null;function _494(_495,_496){dojo.some(_495,function(item){if(item.getDbName()==_492){_493=item;return false;}},this);};this.store.fetch({query:{},queryOptions:{cache:true},onComplete:_494});return _493;},getNameProperty:function(){var _497=null;this.forEach(function(item){if(item.is_name){_497=item;}},this);return _497;}});o.TRGT="/zones/{0}/libraries/{1}/property_definitions";return o;});},"dojox/mobile/_ItemBase":function(){define("dojox/mobile/_ItemBase",["dojo/_base/kernel","dojo/_base/config","dojo/_base/declare","dijit/registry","dijit/_Contained","dijit/_Container","dijit/_WidgetBase","./TransitionEvent","./View"],function(_498,_499,_49a,_49b,_49c,_49d,_49e,_49f,View){return _49a("dojox.mobile._ItemBase",[_49e,_49d,_49c],{icon:"",iconPos:"",alt:"",href:"",hrefTarget:"",moveTo:"",scene:"",clickable:false,url:"",urlTarget:"",transition:"",transitionDir:1,transitionOptions:null,callback:null,sync:true,label:"",toggle:false,_duration:800,inheritParams:function(){var _4a0=this.getParent();if(_4a0){if(!this.transition){this.transition=_4a0.transition;}if(this.icon&&_4a0.iconBase&&_4a0.iconBase.charAt(_4a0.iconBase.length-1)==="/"){this.icon=_4a0.iconBase+this.icon;}if(!this.icon){this.icon=_4a0.iconBase;}if(!this.iconPos){this.iconPos=_4a0.iconPos;}}},select:function(){},deselect:function(){},defaultClickAction:function(e){if(this.toggle){if(this.selected){this.deselect();}else{this.select();}}else{if(!this.selected){this.select();if(!this.selectOne){var _4a1=this;setTimeout(function(){_4a1.deselect();},this._duration);}var _4a2;if(this.moveTo||this.href||this.url||this.scene){_4a2={moveTo:this.moveTo,href:this.href,url:this.url,scene:this.scene,transition:this.transition,transitionDir:this.transitionDir};}else{if(this.transitionOptions){_4a2=this.transitionOptions;}}if(_4a2){return new _49f(this.domNode,_4a2,e).dispatch();}}}},getParent:function(){var ref=this.srcNodeRef||this.domNode;return ref&&ref.parentNode?_49b.getEnclosingWidget(ref.parentNode):null;},setTransitionPos:function(e){var w=this;while(true){w=w.getParent();if(!w||w instanceof View){break;}}if(w){w.clickedPosX=e.clientX;w.clickedPosY=e.clientY;}},transitionTo:function(_4a3,href,url,_4a4){if(_499.isDebug){var _4a5=arguments.callee._ach||(arguments.callee._ach={}),_4a6=(arguments.callee.caller||"unknown caller").toString();if(!_4a5[_4a6]){_498.deprecated(this.declaredClass+"::transitionTo() is deprecated."+_4a6,"","2.0");_4a5[_4a6]=true;}}new _49f(this.domNode,{moveTo:_4a3,href:href,url:url,scene:_4a4,transition:this.transition,transitionDir:this.transitionDir}).dispatch();}});});},"versa/api/Versions":function(){define("versa/api/Versions",["dojo/_base/declare","versa/api/_Collection","versa/api/Version"],function(_4a7){var o=_4a7("versa.api.Versions",[versa.api._Collection],{zone:null,library:null,document:null,constructor:function(args){this.zone=args.zone;this.library=args.library;this.document=args.document;this.target=dojo.replace(versa.api.Versions.TRGT,[this.zone.subdomain,this.library.id,this.document.getId()]);this.schema=versa.api.Version.schema;this.cache=true;this._initialize();}});o.TRGT="/zones/{0}/libraries/{1}/documents/{2}/versions";return o;});},"versa/api/User":function(){define("versa/api/User",["dojo/_base/declare","dojo/date/stamp","versa/api/_Object"],function(_4a8){var o=_4a8("versa.api.User",[versa.api._Object],{email:null,first_name:null,last_name:null,group:null,reset_password:null,constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},getAvatarUrl:function(args){return dojo.replace(versa.api.User.AVT_TRGT,[args.zone.subdomain,this.id]);},getFullName:function(){var _4a9=(this.last_name==null)?"":this.last_name;if((this.first_name!=null)&&(this.first_name!="")){_4a9+=(_4a9=="")?this.first_name:", "+this.first_name;}return (_4a9.length<1)?this.name:_4a9;},isValid:function(){var _4aa=true;if(String.isEmpty(this.name)){_4aa=false;}if(this.name.length<4){_4aa=false;}if(this.name.indexOf(" ")>=0){_4aa=false;}if(!versa.api.Utilities.validateEmail(this.email)){_4aa=false;}if(this.password){if(String.isEmpty(this.password)||(this.password.length<8)){_4aa=false;}}if(String.isEmpty(this.email)){_4aa=false;}return _4aa;}});o.AVT_TRGT="/zones/{0}/users/{1}/avatar";o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"email":{type:"string","default":""},"first_name":{type:"string","default":""},"last_name":{type:"string","default":""},"password":{type:"string","default":""},"active_group":{type:"integer","default":0},"created_at":{type:"string",format:"date-time","default":dojo.date.stamp.toISOString(new Date(),{zulu:true})},"created_by":{type:"string","default":""},"updated_at":{type:"string",format:"date-time","default":dojo.date.stamp.toISOString(new Date(),{zulu:true})},"updated_by":{type:"string","default":""}},prototype:new o()};return o;});},"dojo/regexp":function(){define("dojo/regexp",["./_base/kernel","./_base/lang"],function(dojo,lang){lang.getObject("regexp",true,dojo);dojo.regexp.escapeString=function(str,_4ab){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_4ab&&_4ab.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(arr,re,_4ac){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return dojo.regexp.group(b.join("|"),_4ac);};dojo.regexp.group=function(_4ad,_4ae){return "("+(_4ae?"?:":"")+_4ad+")";};return dojo.regexp;});},"versa/api/_Securable":function(){define("versa/api/_Securable",["dojo/_base/declare","versa/api/XhrHelper"],function(_4af){var o=_4af("versa.api._Securable",[],{securable_type:null,active_permissions:0,constructor:function(args){},hasRights:function(_4b0){return ((this.active_permissions&_4b0)==_4b0);},hasRole:function(role){return this.hasRights(role.permissions);},getAcl:function(zone){var url=dojo.replace(versa.api._Securable.GETACL_URL,[zone.subdomain,this.id,this.securable_type]);var _4b1=null;var _4b2=versa.api.XhrHelper.doGetAction({target:url,getData:_4b1});return new versa.api.Acl(_4b2);},setAcl:function(zone,acl){var url=dojo.replace(versa.api._Securable.SETACL_URL,[zone.subdomain,this.id,this.securable_type]);var data=acl;return versa.api.XhrHelper.doPutAction({target:url,putData:data});}});o.types={"Library":"Library","Folder":"Folder","Document":"Document","Reference":"Reference"};o.permissions={"NONE":0,"VIEW":1,"READ_METADATA":2,"WRITE_METADATA":4,"VERSION":8,"CREATE_DOCUMENTS":16,"CREATE_FOLDERS":32,"CREATE_VIEWS":64,"DELETE_ITEMS":128,"READ_ACL":256,"WRITE_ACL":512,"ADMIN":134217727};o.GETACL_URL="/zones/{0}/acls/{1}.json?securable_type={2}";o.SETACL_URL="/zones/{0}/acls/{1}.json?securable_type={2}";return o;});},"dojox/mobile/EdgeToEdgeList":function(){define("dojox/mobile/EdgeToEdgeList",["dojo/_base/declare","./RoundRectList"],function(_4b3,_4b4){return _4b3("dojox.mobile.EdgeToEdgeList",_4b4,{buildRendering:function(){this.inherited(arguments);this.domNode.className="mblEdgeToEdgeList";}});});},"versa/widget/search/mobile/SearchView":function(){require(["dojo/_base/declare","dijit/_WidgetBase","dojox/mobile/Heading","dojox/mobile/ScrollableView","dojox/mobile/EdgeToEdgeDataList","dojox/mobile/ToolBarButton","dojox/mobile/ContentPane","versa/api/Folders","versa/api/Documents","versa/api/Zones","versa/widget/search/mobile/TextBox","dojo/data/ItemFileWriteStore","dojo/date/locale"],function(_4b5){_4b5("versa.widget.search.mobile.SearchView",[dijit._WidgetBase,dojox.mobile.ScrollableView],{header:null,cpContent:null,footer:null,constructor:function(args){},_setBackAttr:function(back){this.back=back;if(this.header){this.header.set("moveTo",back);}},postCreate:function(){this.inherited("postCreate",arguments);this.header=new versa.widget.mobile.Heading({label:"Search",from:this,back:this.back,transition:"slidev",onCommand:this.onCommand});this.footer=new versa.widget.mobile.Footing({showSearch:false,onCommand:this.onCommand,from:this});this.cpContent=new dojox.mobile.ContentPane({content:dojo.cache("versa.widget.search.mobile","template/SearchView.html","<div style=\"width: 100%; height: 100%; text-align: center;\">\n    <input id=\"searchField\"   data-dojo-type=\"versa.widget.search.mobile.TextBox\"/>\n</div>\n"),parseOnLoad:true});this.searchField=dijit.byId("searchField");this.searchField.txtSearch.onFocus=dojo.hitch(this,function(){if(this.searchField.txtSearch.focused){this.footer.domNode.style.visibility="hidden";}this.findAppBars();this.resize();});this.searchField.txtSearch.onBlur=dojo.hitch(this,function(){this.findAppBars();this.resize();this.footer.domNode.style.visibility="visible";});this.searchField.set("submit",dojo.hitch(this,function(){this.onCommand(versa.widget.zone.mobile.Show.COMMANDS.PERFORM_SEARCH,{search:this.searchField.txtSearch.get("value")});}));this.addChild(this.cpContent);this.addChild(this.footer);this.addChild(this.header);},onBeforeTransitionIn:function(){this.findAppBars();this.resize();},onBeforeTransitionOut:function(){this.findAppBars();this.resize();},startup:function(){this.inherited("startup",arguments);}});});},"versa/api/ViewDefinition":function(){define("versa/api/ViewDefinition",["dojo/_base/declare","versa/api/_Object","versa/api/Error","versa/api/Formatter"],function(_4b6){var o=_4b6("versa.api.ViewDefinition",[versa.api._Object],{_view:null,constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},_generate:function(_4b7){var view={name:this.name,id:this.getId(),sort_column:1,cells:[]};dojo.forEach(this.cell_definitions,function(item,idx){var cell={field:dojo.replace("{table_name}.{column_name}",item),name:String.isBlank(item.label)?"&nbsp;":item.label,width:item.width,noresize:item.noresize,style:item.style,date_format:item.date_format};cell.get=this._generateGetFn(item,_4b7);cell.formatter=this._generateFormatterFn(item);view.cells.push(cell);if(cell.field==this.sort_by){view.sort_column=(this.is_desc)?((idx+1)*-1):(idx+1);}},this);return view;},_generateFormatterFn:function(_4b8){var fn=versa.api.CellDefinition.formatData;if(_4b8.column_name.indexOf("prp_bln")>=0){fn=versa.api.CellDefinition.formatBoolean;}switch(_4b8.formatter){case versa.api.CellDefinition.formats.icon:fn=versa.api.CellDefinition.formatIcon;break;case versa.api.CellDefinition.formats.size:fn=versa.api.CellDefinition.formatSize;break;case versa.api.CellDefinition.formats.status:fn=versa.api.CellDefinition.formatStatus;break;}return fn;},_generateGetFn:function(_4b9,_4ba){var fn=null;switch(_4b9.table_name){case "versions":fn=dojo.hitch([this,_4b9],versa.api.ViewDefinition._getVersionAttrFn);break;case "documents":fn=dojo.hitch([this,_4b9],versa.api.ViewDefinition._getDocumentAttrFn);break;case "document_types":fn=dojo.hitch([this,_4b9,_4ba],versa.api.ViewDefinition._getDocumentTypeAttrFn);break;}return fn;},_formatDateTime:function(_4bb,_4bc){return versa.api.Formatter.formatDateTime(_4bc);},getCellByField:function(_4bd){var cell=null;dojo.some(this.cell_definitions,function(_4be,idx){if(versa.api.CellDefinition.getDbName(_4be)==_4bd){cell=_4be;}return (cell);},this);return cell;},getView:function(_4bf){return this._generate(_4bf);},isValid:function(){var _4c0=true;if(String.isEmpty(this.name.trim())){_4c0=false;}if(String.isEmpty(this.sort_by)){_4c0=false;}return _4c0;},findColumn:function(_4c1,_4c2){for(var i=0;i<this.cell_definitions.length;i++){if(this.cell_definitions[i].table_name&&this.cell_definitions[i].column_name&&_4c1==this.cell_definitions[i].table_name&&_4c2==this.cell_definitions[i].column_name){return this.cell_definitions[i];}}return null;}});o.getCustomName=function(user,_4c3){return dojo.replace("{0}.{1}",[user.name,_4c3.name]);};o._getDocumentAttrFn=function(_4c4,item){var _4c5="";var _4c6=this[0];var _4c7=this[1];if(!item){return _4c5;}var _4c8=_4c7.column_name;switch(_4c8){case "created_at":case "updated_at":_4c5=_4c6._formatDateTime(_4c7,item[_4c8]);break;default:if(/prp_dtt/.test(_4c8)&&item[_4c8]){_4c5=_4c6._formatDateTime(_4c7,item[_4c8]);}else{_4c5=item[_4c8];}break;}return _4c5;};o._getDocumentTypeAttrFn=function(_4c9,item){var _4ca="";var _4cb=this[0];var _4cc=this[1];var _4cd=this[2];if((!item)){return _4ca;}switch(_4cc.column_name){case "name":_4ca=item.document_type_name;break;}return _4ca;};o._getVersionAttrFn=function(_4ce,item){var _4cf=null;var _4d0=this[0];var _4d1=this[1];if(!item){return _4cf;}try{switch(_4d1.column_name){case "binary_content_type":_4cf=item.binary_content_type;break;case "version_number":_4cf=item.major_version_number;break;case "binary_file_size":_4cf=item.binary_file_size;break;}}catch(e){}return (!_4cf)?"":_4cf;};o.compare=function(_4d2,_4d3){if((!_4d2)&&(_4d3)){return -1;}if((_4d2)&&(!_4d3)){return 1;}if((!_4d2)&&(!_4d3)){return 0;}if((!_4d2.name)&&(_4d3.name)){return -1;}if((_4d2.name)&&(!_4d3.name)){return 1;}if((!_4d2.name)&&(!_4d3.name)){return 0;}if(_4d2.name.toLowerCase()==_4d3.name.toLowerCase()){return 0;}return (_4d2.name.toLowerCase()<_4d3.name.toLowerCase())?-1:1;};o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string"},"description":{type:"string"},"is_desc":{type:"boolean","default":false},"is_template":{type:"boolean","default":false},"scope":{type:"string","default":"*"},"sort_by":{type:"string"},"cell_definitions":{type:"array","default":[],"items":{type:"object",properties:{"table_name":{type:"string"},"column_name":{type:"string"},"name":{type:"string"},"label":{type:"string"},"column_order":{type:"integer"},"formatter":{type:"integer"},"date_format":{type:"string"},"width":{type:"string"}}}},"created_at":{type:"date",format:"date-time"},"created_by":{type:"string","default":""},"updated_at":{type:"date",format:"date-time"},"updated_by":{type:"string","default":""}},prototype:o.prototype};return o;});},"dijit/form/_FormMixin":function(){define("dijit/form/_FormMixin",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/window"],function(_4d4,_4d5,_4d6,lang,_4d7){return _4d5("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(_4d8){var res=[];_4d4.forEach(_4d8||this.getChildren(),function(_4d9){if("value" in _4d9){res.push(_4d9);}else{res=res.concat(this._getDescendantFormWidgets(_4d9.getChildren()));}},this);return res;},reset:function(){_4d4.forEach(this._getDescendantFormWidgets(),function(_4da){if(_4da.reset){_4da.reset();}});},validate:function(){var _4db=false;return _4d4.every(_4d4.map(this._getDescendantFormWidgets(),function(_4dc){_4dc._hasBeenBlurred=true;var _4dd=_4dc.disabled||!_4dc.validate||_4dc.validate();if(!_4dd&&!_4db){_4d7.scrollIntoView(_4dc.containerNode||_4dc.domNode);_4dc.focus();_4db=true;}return _4dd;}),function(item){return item;});},setValues:function(val){_4d6.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(obj){var map={};_4d4.forEach(this._getDescendantFormWidgets(),function(_4de){if(!_4de.name){return;}var _4df=map[_4de.name]||(map[_4de.name]=[]);_4df.push(_4de);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _4e0=map[name],_4e1=lang.getObject(name,false,obj);if(_4e1===undefined){continue;}if(!lang.isArray(_4e1)){_4e1=[_4e1];}if(typeof _4e0[0].checked=="boolean"){_4d4.forEach(_4e0,function(w){w.set("value",_4d4.indexOf(_4e1,w.value)!=-1);});}else{if(_4e0[0].multiple){_4e0[0].set("value",_4e1);}else{_4d4.forEach(_4e0,function(w,i){w.set("value",_4e1[i]);});}}}},getValues:function(){_4d6.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_getValueAttr:function(){var obj={};_4d4.forEach(this._getDescendantFormWidgets(),function(_4e2){var name=_4e2.name;if(!name||_4e2.disabled){return;}var _4e3=_4e2.get("value");if(typeof _4e2.checked=="boolean"){if(/Radio/.test(_4e2.declaredClass)){if(_4e3!==false){lang.setObject(name,_4e3,obj);}else{_4e3=lang.getObject(name,false,obj);if(_4e3===undefined){lang.setObject(name,null,obj);}}}else{var ary=lang.getObject(name,false,obj);if(!ary){ary=[];lang.setObject(name,ary,obj);}if(_4e3!==false){ary.push(_4e3);}}}else{var prev=lang.getObject(name,false,obj);if(typeof prev!="undefined"){if(lang.isArray(prev)){prev.push(_4e3);}else{lang.setObject(name,[prev,_4e3],obj);}}else{lang.setObject(name,_4e3,obj);}}});return obj;},isValid:function(){return this.state=="";},onValidStateChange:function(){},_getState:function(){var _4e4=_4d4.map(this._descendants,function(w){return w.get("state")||"";});return _4d4.indexOf(_4e4,"Error")>=0?"Error":_4d4.indexOf(_4e4,"Incomplete")>=0?"Incomplete":"";},disconnectChildren:function(){_4d4.forEach(this._childConnections||[],lang.hitch(this,"disconnect"));_4d4.forEach(this._childWatches||[],function(w){w.unwatch();});},connectChildren:function(_4e5){var _4e6=this;this.disconnectChildren();this._descendants=this._getDescendantFormWidgets();var set=_4e5?function(name,val){_4e6[name]=val;}:lang.hitch(this,"_set");set("value",this.get("value"));set("state",this._getState());var _4e7=(this._childConnections=[]),_4e8=(this._childWatches=[]);_4d4.forEach(_4d4.filter(this._descendants,function(item){return item.validate;}),function(_4e9){_4d4.forEach(["state","disabled"],function(attr){_4e8.push(_4e9.watch(attr,function(){_4e6.set("state",_4e6._getState());}));});});var _4ea=function(){if(_4e6._onChangeDelayTimer){clearTimeout(_4e6._onChangeDelayTimer);}_4e6._onChangeDelayTimer=setTimeout(function(){delete _4e6._onChangeDelayTimer;_4e6._set("value",_4e6.get("value"));},10);};_4d4.forEach(_4d4.filter(this._descendants,function(item){return item.onChange;}),function(_4eb){_4e7.push(_4e6.connect(_4eb,"onChange",_4ea));_4e8.push(_4eb.watch("disabled",_4ea));});},startup:function(){this.inherited(arguments);this.connectChildren(true);this.watch("state",function(attr,_4ec,_4ed){this.onValidStateChange(_4ed=="");});},destroy:function(){this.disconnectChildren();this.inherited(arguments);}});});},"dojo/data/util/simpleFetch":function(){define("dojo/data/util/simpleFetch",["dojo/_base/lang","dojo/_base/window","./sorter"],function(lang,_4ee,_4ef){var _4f0=lang.getObject("dojo.data.util.simpleFetch",true);_4f0.fetch=function(_4f1){_4f1=_4f1||{};if(!_4f1.store){_4f1.store=this;}var self=this;var _4f2=function(_4f3,_4f4){if(_4f4.onError){var _4f5=_4f4.scope||_4ee.global;_4f4.onError.call(_4f5,_4f3,_4f4);}};var _4f6=function(_4f7,_4f8){var _4f9=_4f8.abort||null;var _4fa=false;var _4fb=_4f8.start?_4f8.start:0;var _4fc=(_4f8.count&&(_4f8.count!==Infinity))?(_4fb+_4f8.count):_4f7.length;_4f8.abort=function(){_4fa=true;if(_4f9){_4f9.call(_4f8);}};var _4fd=_4f8.scope||_4ee.global;if(!_4f8.store){_4f8.store=self;}if(_4f8.onBegin){_4f8.onBegin.call(_4fd,_4f7.length,_4f8);}if(_4f8.sort){_4f7.sort(_4ef.createSortFunction(_4f8.sort,self));}if(_4f8.onItem){for(var i=_4fb;(i<_4f7.length)&&(i<_4fc);++i){var item=_4f7[i];if(!_4fa){_4f8.onItem.call(_4fd,item,_4f8);}}}if(_4f8.onComplete&&!_4fa){var _4fe=null;if(!_4f8.onItem){_4fe=_4f7.slice(_4fb,_4fc);}_4f8.onComplete.call(_4fd,_4fe,_4f8);}};this._fetchItems(_4f1,_4f6,_4f2);return _4f1;};return _4f0;});},"dojox/mobile/ProgressIndicator":function(){define("dojox/mobile/ProgressIndicator",["dojo/_base/config","dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/has"],function(_4ff,_500,_501,_502,has){var cls=_500("dojox.mobile.ProgressIndicator",null,{interval:100,colors:["#C0C0C0","#C0C0C0","#C0C0C0","#C0C0C0","#C0C0C0","#C0C0C0","#B8B9B8","#AEAFAE","#A4A5A4","#9A9A9A","#8E8E8E","#838383"],constructor:function(){this._bars=[];this.domNode=_501.create("DIV");this.domNode.className="mblProgContainer";if(_4ff["mblAndroidWorkaround"]!==false&&has("android")>=2.2&&has("android")<3){_502.set(this.domNode,"webkitTransform","translate3d(0,0,0)");}this.spinnerNode=_501.create("DIV",null,this.domNode);for(var i=0;i<this.colors.length;i++){var div=_501.create("DIV",{className:"mblProg mblProg"+i},this.spinnerNode);this._bars.push(div);}},start:function(){if(this.imageNode){var img=this.imageNode;var l=Math.round((this.domNode.offsetWidth-img.offsetWidth)/2);var t=Math.round((this.domNode.offsetHeight-img.offsetHeight)/2);img.style.margin=t+"px "+l+"px";return;}var cntr=0;var _503=this;var n=this.colors.length;this.timer=setInterval(function(){cntr--;cntr=cntr<0?n-1:cntr;var c=_503.colors;for(var i=0;i<n;i++){var idx=(cntr+i)%n;_503._bars[i].style.backgroundColor=c[idx];}},this.interval);},stop:function(){if(this.timer){clearInterval(this.timer);}this.timer=null;if(this.domNode.parentNode){this.domNode.parentNode.removeChild(this.domNode);}},setImage:function(file){if(file){this.imageNode=_501.create("IMG",{src:file},this.domNode);this.spinnerNode.style.display="none";}else{if(this.imageNode){this.domNode.removeChild(this.imageNode);this.imageNode=null;}this.spinnerNode.style.display="";}}});cls._instance=null;cls.getInstance=function(){if(!cls._instance){cls._instance=new cls();}return cls._instance;};return cls;});},"versa/api/Folders":function(){define("versa/api/Folders",["dojo/_base/declare","versa/api/_Collection","versa/api/Folder","versa/api/Utilities"],function(_504){var o=_504("versa.api.Folders",[versa.api._Collection],{library:null,_getExistingNames:function(_505){var _506=[];if((_505)&&(_505.children)){dojo.forEach(_505.children,function(_507){_506.push(_507.name);});}return _506;},constructor:function(args){this.zone=args.zone;this.library=args.library;this.target=dojo.replace(versa.api.Folders.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.Folder.schema;this.cache=true;this._initialize();},generateUniqueName:function(args){var _508=this._getExistingNames(args.parent);var _509=args.base_name;return versa.api.Utilities.generateUniqueName({names:_508,base_name:_509});},getTextPath:function(args){var item=args.item;if(item.parent_id){var _50a=this.fetchById({id:item.parent_id});return this.getTextPath({item:_50a})+"/"+item.name;}else{return "/"+item.name;}}});o.TRGT="/zones/{0}/libraries/{1}/folders";o.generateUniqueName=function(args){var _50b=args.folder;var _50c=[];dojo.forEach(_50b.children,function(_50d){_50c.push(_50d.name);});return versa.api.Utilities.generateUniqueName({names:_50c,base_name:args.base_name});};return o;});},"versa/api/XhrHelper":function(){define("versa/api/XhrHelper",["dojo/_base/declare","dojox/json/ref","versa/api/Error"],function(_50e){var o=_50e("versa.api.XhrHelper",[],{});o._doXhrAction=function(_50f,args){var rsp=null;var err=null;function _510(_511,_512){rsp=_511;};function _513(_514,_515){err=new versa.api.Error(_514.responseText,_514);};args.contentType="application/json";args.handleAs="json";args.sync=true;args.load=_510;args.error=_513;_50f(args);if(err!=null){throw err;}return rsp;};o.doGetAction=function(args){var _516=(args.getData)?dojo.toJson(args.getData):null;var _517={url:args.target,content:_516};return versa.api.XhrHelper._doXhrAction(dojo.xhrGet,_517);};o.doPostAction=function(args){var _518=args.postData;var _519=dojo.toJson(_518);var _51a={url:args.target,postData:_519};return versa.api.XhrHelper._doXhrAction(dojo.xhrPost,_51a);};o.doPutAction=function(args){var _51b=args.putData;var _51c=dojo.toJson(_51b);var _51d={url:args.target,putData:_51c};return versa.api.XhrHelper._doXhrAction(dojo.xhrPut,_51d);};o.authenticity_token=null;o.originalXhr=dojo.xhr;dojo.xhr=function(_51e,_51f,_520){if(versa.api.XhrHelper.authenticity_token!=null){if(_51e.toUpperCase()=="POST"){var _521=(_51f.postData)?dojo.fromJson(_51f.postData):{};_521["authenticity_token"]=versa.api.XhrHelper.authenticity_token;_51f.postData=dojo.toJson(_521);}if(_51e.toUpperCase()=="PUT"){var _522=(_51f.putData)?dojo.fromJson(_51f.putData):{};_522["authenticity_token"]=versa.api.XhrHelper.authenticity_token;_51f.putData=dojo.toJson(_522);}if(_51e.toUpperCase()=="DELETE"){_51f.rawBody=dojo.toJson({authenticity_token:versa.api.XhrHelper.authenticity_token});}}if((_51f.headers)&&_51f.headers.hasOwnProperty("Range")){_51f.headers["dojo-Range"]=_51f.headers["Range"];}return versa.api.XhrHelper.originalXhr(_51e,_51f,_520);};return o;});},"dijit/layout/utils":function(){define("dijit/layout/utils",["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang",".."],function(_523,_524,_525,_526,lang,_527){var _528=lang.getObject("layout",true,_527);_528.marginBox2contentBox=function(node,mb){var cs=_526.getComputedStyle(node);var me=_525.getMarginExtents(node,cs);var pb=_525.getPadBorderExtents(node,cs);return {l:_526.toPixelValue(node,cs.paddingLeft),t:_526.toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};function _529(word){return word.substring(0,1).toUpperCase()+word.substring(1);};function size(_52a,dim){var _52b=_52a.resize?_52a.resize(dim):_525.setMarginBox(_52a.domNode,dim);if(_52b){lang.mixin(_52a,_52b);}else{lang.mixin(_52a,_525.getMarginBox(_52a.domNode));lang.mixin(_52a,dim);}};_528.layoutChildren=function(_52c,dim,_52d,_52e,_52f){dim=lang.mixin({},dim);_524.add(_52c,"dijitLayoutContainer");_52d=_523.filter(_52d,function(item){return item.region!="center"&&item.layoutAlign!="client";}).concat(_523.filter(_52d,function(item){return item.region=="center"||item.layoutAlign=="client";}));_523.forEach(_52d,function(_530){var elm=_530.domNode,pos=(_530.region||_530.layoutAlign);if(!pos){throw new Error("No region setting for "+_530.id);}var _531=elm.style;_531.left=dim.l+"px";_531.top=dim.t+"px";_531.position="absolute";_524.add(elm,"dijitAlign"+_529(pos));var _532={};if(_52e&&_52e==_530.id){_532[_530.region=="top"||_530.region=="bottom"?"h":"w"]=_52f;}if(pos=="top"||pos=="bottom"){_532.w=dim.w;size(_530,_532);dim.h-=_530.h;if(pos=="top"){dim.t+=_530.h;}else{_531.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){_532.h=dim.h;size(_530,_532);dim.w-=_530.w;if(pos=="left"){dim.l+=_530.w;}else{_531.left=dim.l+dim.w+"px";}}else{if(pos=="client"||pos=="center"){size(_530,dim);}}}});};return {marginBox2contentBox:_528.marginBox2contentBox,layoutChildren:_528.layoutChildren};});},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_533,_534){return _533("dijit._Contained",null,{_getSibling:function(_535){var node=this.domNode;do{node=node[_535+"Sibling"];}while(node&&node.nodeType!=1);return node&&_534.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"versa/api/Document":function(){define("versa/api/Document",["dojo/_base/declare","dojox/json/ref","versa/api/_Object","versa/api/_Securable","versa/api/Acl","versa/api/Application","versa/api/Utilities","versa/api/Versions","versa/api/PermissionSet"],function(_536){var o=_536("versa.api.Document",[versa.api._Object,versa.api._Securable],{zone:null,library:null,checked_out_by:"",document_type_id:null,library:null,state:0,clean_properties:function(args){var _537=args.library;var _538=_537.getDocumentTypes().fetchById({id:this.document_type_id});for(var p in this){if(!dojo.isFunction(this[p])){var _539=dojo.replace("documents.{0}",[p]);var _53a=_537.getPropertyDefinitions().fetchByDbName(_539);if((_53a)&&(!_53a.is_system)){if(!_538.hasProperty(_53a.id)){delete this[p];}}}}},constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));this.securable_type=versa.api._Securable.types.Document;if((this.created_at!=null)&&(typeof this.created_at=="string")){this.created_at=dojo.date.stamp.fromISOString(this.created_at);}if((this.updated_at!=null)&&(typeof this.updated_at=="string")){this.updated_at=dojo.date.stamp.fromISOString(this.created_at);}},copyLocal:function(args){var zone=args.zone;var _53b=args.library;var url=dojo.replace(versa.api.Document.CP_TRGT,[zone.subdomain,_53b.id,this.getId()]);versa.api.Utilities.saveUrl({url:url,window_name:"versa_save"});},file:function(args){var zone=args.zone;var _53c=args.library;var url=dojo.replace(versa.api.Document.FILE_TRGT,[zone.subdomain,_53c.id,this.getId()]);var _53d={folder_id:args.folder.id};var _53e=versa.api.XhrHelper.doPutAction({target:url,putData:_53d});return true;},getFullVersion:function(){return this.major_version_number;},getPermissionSet:function(_53f,_540,user){var _541=new versa.api.PermissionSet();_541.setValue(versa.api.PermissionIndices.VIEW,this.hasRights(versa.api._Securable.permissions.VIEW));_541.setValue(versa.api.PermissionIndices.COPY,this.hasRights(versa.api._Securable.permissions.VIEW));_541.setValue(versa.api.PermissionIndices.EDIT,this.hasRights(versa.api._Securable.permissions.WRITE_METADATA));_541.setValue(versa.api.PermissionIndices.MOVE,_541.getValue(versa.api.PermissionIndices.EDIT));_541.setValue(versa.api.PermissionIndices.CKO,(this.hasRights(versa.api._Securable.permissions.VERSION)&&this.getState(versa.api.Document.states.CHECKED_IN)));_541.setValue(versa.api.PermissionIndices.CKI,(this.hasRights(versa.api._Securable.permissions.VERSION)&&this.getState(versa.api.Document.states.CHECKED_OUT)&&(this.checked_out_by==user.name)));_541.setValue(versa.api.PermissionIndices.CANCEL_CKO,_541.getValue(versa.api.PermissionIndices.CKI));_541.setValue(versa.api.PermissionIndices.DELETE,this.hasRights(versa.api._Securable.permissions.DELETE_ITEMS));_541.setValue(versa.api.PermissionIndices.SECURE,this.hasRights(versa.api._Securable.permissions.WRITE_ACL));_541.setValue(versa.api.PermissionIndices.RESTORE,this.hasRights(versa.api._Securable.permissions.DELETE_ITEMS));_541.setValue(versa.api.PermissionIndices.DESTROY,this.hasRights(versa.api._Securable.permissions.DELETE_ITEMS));return _541;},getState:function(_542){return versa.api.Document._isState(this.state,_542);},getVersions:function(args){if(!this._versions){this._versions=new versa.api.Versions({zone:args.zone,library:args.library,document:this});}return this._versions;},isDeleted:function(){return this.getState(versa.api.Document.states.DELETED);},restore:function(args){var zone=args.zone;var _543=args.library;var url=dojo.replace(versa.api.Document.RESTORE_TRGT,[zone.subdomain,_543.getId(),this.getId()]);var _544={};var _545=versa.api.XhrHelper.doPutAction({target:url,putData:_544});return true;},setState:function(_546,_547){if(_547){this.state=this.state|_546;}else{this.state=this.state&~_546;}return this.state;},unfile:function(args){var zone=args.zone;var _548=args.library;var url=dojo.replace(versa.api.Document.UNFILE_TRGT,[zone.subdomain,_548.id,this.id]);var _549={};var _54a=versa.api.XhrHelper.doPutAction({target:url,putData:_549});return true;},validate:function(args){if(!this.document_type_id){this.state|=versa.api.Document.states.INVALID;return false;}var _54b=args.library.getDocumentTypes().fetchById({id:this.document_type_id});var _54c=args.library.getPropertyDefinitions();var _54d=versa.api.Application.getDataTypes();var _54e=dojo.every(_54b.property_mappings,function(item,idx){var _54f=true;if(item.is_required){var _550=_54c.fetchById({id:item.property_definition_id});var _551=_54d.fetchById({id:_550.data_type_id});if(!_550){return false;}var _552=this[_550.column_name];if(_551.isString()){_54f=!String.isEmpty(_552);}}return _54f;},this);this.setState(versa.api.Document.states.INVALID,!_54e);return _54e;},getViewUrl:function(zone,_553){return dojo.replace(versa.api.Document.VW_TRGT,[zone.subdomain,_553.id,this.getId()]);},view:function(args){var zone=args.zone;var _554=args.library;var url=this.getViewUrl(zone,_554);versa.api.Utilities.viewUrl({windowBox:args.windowBox,url:url,window_name:"versa_viewer"});}});o.getIconUrl=function(_555,size){return dojo.replace("/icons/{0}?size={1}",[encodeURIComponent(_555),size]);};o._isState=function(_556,_557){return ((_556&_557)==_557);};o.getStateIcon=function(_558){var icon="none.16.png";if(versa.api.Document._isState(_558,versa.api.Document.states.ERROR)){icon="error.16.png";}else{if(versa.api.Document._isState(_558,versa.api.Document.states.INVALID)){icon="invalid.16.png";}else{if(versa.api.Document._isState(_558,versa.api.Document.states.CHECKED_IN)){icon="cki.16.png";}else{if(versa.api.Document._isState(_558,versa.api.Document.states.PENDING)){icon="pending.16.gif";}else{if(versa.api.Document._isState(_558,versa.api.Document.states.UPLOADED)){icon="uploaded.16.png";}}}}}return icon;};o.getStateMessage=function(_559){var msg="";if(versa.api.Document._isState(_559,versa.api.Document.states.ERROR)){msg="An error occurred";}else{if(versa.api.Document._isState(_559,versa.api.Document.states.INVALID)){msg="The file contains missing or invalid property values";}else{if(versa.api.Document._isState(_559,versa.api.Document.states.CHECKED_IN)){msg="The file has been added to VersaFile";}else{if(versa.api.Document._isState(_559,(versa.api.Document.states.PENDING|versa.api.Document.states.UPLOADED))){msg="The file is being added to VersaFile";}else{if(versa.api.Document._isState(_559,versa.api.Document.states.PENDING)){msg="Uploading...";}else{if(versa.api.Document._isState(_559,versa.api.Document.states.UPLOADED)){msg="The file has been uploaded and is ready for checkin";}}}}}}return msg;};o.VW_TRGT="/zones/{0}/libraries/{1}/documents/{2}/download/?disposition=inline";o.CP_TRGT="/zones/{0}/libraries/{1}/documents/{2}/download/?disposition=attachment";o.CKO_TRGT="/zones/{0}/libraries/{1}/documents/{2}/checkout.json";o.CKI_TRGT="/zones/{0}/libraries/{1}/documents/{2}/checkin.json";o.XCKO_TRGT="/zones/{0}/libraries/{1}/documents/{2}/cancel_checkout.json";o.FILE_TRGT="/zones/{0}/libraries/{1}/documents/{2}/file.json";o.UNFILE_TRGT="/zones/{0}/libraries/{1}/documents/{2}/unfile.json";o.RESTORE_TRGT="/zones/{0}/libraries/{1}/documents/{2}/restore.json";o.SDEL_TRGT="/zones/{0}/libraries/{1}/documents/{2}/soft_delete.json";o.states={"NONE":0,"PENDING":1,"UPLOADED":2,"BUSY":4,"INDEXED":16,"CHECKED_IN":32,"CHECKED_OUT":64,"INVALID":1024,"DELETED":2048,"ERROR":32768};o.schema={type:"object",properties:{"id":{type:"integer"},"document_type_id":{type:"integer"},"name":{type:"string","default":"","required":true},"created_at":{type:["string","object","null"],format:"date-time"},"created_by":{type:["string","null"],"default":""},"checked_out_by":{type:["string","null"]},"state":{type:"integer","default":o.PENDING},"updated_at":{type:["string","object","null"],format:"date-time"},"updated_by":{type:["string","null"],"default":""},"prp_dtt001":{type:["string","object","null"],format:"date-time"},"prp_dtt002":{type:["string","object","null"],format:"date-time"},"prp_dtt003":{type:["string","object","null"],format:"date-time"},"prp_dtt004":{type:["string","object","null"],format:"date-time"},"prp_dtt005":{type:["string","object","null"],format:"date-time"},"prp_dtt006":{type:["string","object","null"],format:"date-time"},"prp_dtt007":{type:["string","object","null"],format:"date-time"},"prp_dtt008":{type:["string","object","null"],format:"date-time"}},prototype:new o()};return o;});},"versa/api/Preference":function(){define("versa/api/Preference",["dojo/_base/declare","versa/api/_Object","dojo/data/ItemFileReadStore"],function(_55a){var o=_55a("versa.api.Preference",[versa.api._Object],{constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));}});o.dateEntryFormats={_date:1,_time:2,_datetime:3};o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string"},"value":{type:"string"},"created_at":{type:"date",format:"date-time"},"created_by":{type:"string","default":""},"updated_at":{type:"date",format:"date-time"},"updated_by":{type:"string","default":""}}};return o;});},"dojox/mobile/sniff":function(){define("dojox/mobile/sniff",["dojo/_base/window","dojo/_base/sniff"],function(win,has){var ua=navigator.userAgent;has.add("bb",ua.indexOf("BlackBerry")>=0&&parseFloat(ua.split("Version/")[1])||undefined,undefined,true);has.add("android",parseFloat(ua.split("Android ")[1])||undefined,undefined,true);if(ua.match(/(iPhone|iPod|iPad)/)){var p=RegExp.$1.replace(/P/,"p");var v=ua.match(/OS ([\d_]+)/)?RegExp.$1:"1";var os=parseFloat(v.replace(/_/,".").replace(/_/g,""));has.add(p,os,undefined,true);has.add("iphone",os,undefined,true);}if(has("webkit")){has.add("touch",(typeof win.doc.documentElement.ontouchstart!="undefined"&&navigator.appVersion.indexOf("Mobile")!=-1)||!!has("android"),undefined,true);}return has;});},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","./registry"],function(_55b,_55c,_55d,_55e){return _55c("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_55f,_560){var _561=this.containerNode;if(_560&&typeof _560=="number"){var _562=this.getChildren();if(_562&&_562.length>=_560){_561=_562[_560-1].domNode;_560="after";}}_55d.place(_55f.domNode,_561,_560);if(this._started&&!_55f._started){_55f.startup();}},removeChild:function(_563){if(typeof _563=="number"){_563=this.getChildren()[_563];}if(_563){var node=_563.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(_564,dir){var node=_564.domNode,_565=(dir>0?"nextSibling":"previousSibling");do{node=node[_565];}while(node&&(node.nodeType!=1||!_55e.byNode(node)));return node&&_55e.byNode(node);},getIndexOfChild:function(_566){return _55b.indexOf(this.getChildren(),_566);}});});},"dojo/data/ItemFileReadStore":function(){define("dojo/data/ItemFileReadStore",["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","../_base/window","./util/filter","./util/simpleFetch","../date/stamp"],function(_567,lang,_568,_569,xhr,_56a,_56b,_56c,_56d,_56e){var _56f=_568("dojo.data.ItemFileReadStore",[_56a],{constructor:function(_570){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_570.url;this._ccUrl=_570.url;this.url=_570.url;this._jsonData=_570.data;this.data=null;this._datatypeMap=_570.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_571){return _56e.fromISOString(_571);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_570.urlPreventCache!==undefined){this.urlPreventCache=_570.urlPreventCache?true:false;}if(_570.hierarchical!==undefined){this.hierarchical=_570.hierarchical?true:false;}if(_570.clearOnClose){this.clearOnClose=true;}if("failOk" in _570){this.failOk=_570.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");}},_assertIsAttribute:function(_572){if(typeof _572!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");}},getValue:function(item,_573,_574){var _575=this.getValues(item,_573);return (_575.length>0)?_575[0]:_574;},getValues:function(item,_576){this._assertIsItem(item);this._assertIsAttribute(_576);return (item[_576]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _577=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_577.push(key);}}return _577;},hasAttribute:function(item,_578){this._assertIsItem(item);this._assertIsAttribute(_578);return (_578 in item);},containsValue:function(item,_579,_57a){var _57b=undefined;if(typeof _57a==="string"){_57b=_56c.patternToRegExp(_57a,false);}return this._containsValue(item,_579,_57a,_57b);},_containsValue:function(item,_57c,_57d,_57e){return _569.some(this.getValues(item,_57c),function(_57f){if(_57f!==null&&!lang.isObject(_57f)&&_57e){if(_57f.toString().match(_57e)){return true;}}else{if(_57d===_57f){return true;}}});},isItem:function(_580){if(_580&&_580[this._storeRefPropName]===this){if(this._arrayOfAllItems[_580[this._itemNumPropName]]===_580){return true;}}return false;},isItemLoaded:function(_581){return this.isItem(_581);},loadItem:function(_582){this._assertIsItem(_582.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_fetchItems:function(_583,_584,_585){var self=this,_586=function(_587,_588){var _589=[],i,key;if(_587.query){var _58a,_58b=_587.queryOptions?_587.queryOptions.ignoreCase:false;var _58c={};for(key in _587.query){_58a=_587.query[key];if(typeof _58a==="string"){_58c[key]=_56c.patternToRegExp(_58a,_58b);}else{if(_58a instanceof RegExp){_58c[key]=_58a;}}}for(i=0;i<_588.length;++i){var _58d=true;var _58e=_588[i];if(_58e===null){_58d=false;}else{for(key in _587.query){_58a=_587.query[key];if(!self._containsValue(_58e,key,_58a,_58c[key])){_58d=false;}}}if(_58d){_589.push(_58e);}}_584(_589,_587);}else{for(i=0;i<_588.length;++i){var item=_588[i];if(item!==null){_589.push(item);}}_584(_589,_587);}};if(this._loadFinished){_586(_583,this._getItemsArray(_583.queryOptions));}else{if(this._jsonFileUrl!==this._ccUrl){_567.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_583,filter:_586});}else{this._loadInProgress=true;var _58f={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _590=xhr.get(_58f);_590.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_586(_583,self._getItemsArray(_583.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_585(e,_583);}});_590.addErrback(function(_591){self._loadInProgress=false;_585(_591,_583);});var _592=null;if(_583.abort){_592=_583.abort;}_583.abort=function(){var df=_590;if(df&&df.fired===-1){df.cancel();df=null;}if(_592){_592.call(_583);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_586(_583,this._getItemsArray(_583.queryOptions));}catch(e){_585(e,_583);}}else{_585(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_583);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _593=this._queuedFetches[i],_594=_593.args,_595=_593.filter;if(_595){_595(_594,this._getItemsArray(_594.queryOptions));}else{this.fetchItemByIdentity(_594);}}this._queuedFetches=[];}},_getItemsArray:function(_596){if(_596&&_596.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_597){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_598){var _599=false,self=this;function _59a(_59b){return (_59b!==null)&&(typeof _59b==="object")&&(!lang.isArray(_59b)||_599)&&(!lang.isFunction(_59b))&&(_59b.constructor==Object||lang.isArray(_59b))&&(typeof _59b._reference==="undefined")&&(typeof _59b._type==="undefined")&&(typeof _59b._value==="undefined")&&self.hierarchical;};function _59c(_59d){self._arrayOfAllItems.push(_59d);for(var _59e in _59d){var _59f=_59d[_59e];if(_59f){if(lang.isArray(_59f)){var _5a0=_59f;for(var k=0;k<_5a0.length;++k){var _5a1=_5a0[k];if(_59a(_5a1)){_59c(_5a1);}}}else{if(_59a(_59f)){_59c(_59f);}}}}};this._labelAttr=_598.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_598.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_599=true;}_59c(item);item[this._rootItemPropName]=true;}var _5a2={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _5a3=item[key];if(_5a3!==null){if(!lang.isArray(_5a3)){item[key]=[_5a3];}}else{item[key]=[null];}}_5a2[key]=key;}}while(_5a2[this._storeRefPropName]){this._storeRefPropName+="_";}while(_5a2[this._itemNumPropName]){this._itemNumPropName+="_";}while(_5a2[this._reverseRefMap]){this._reverseRefMap+="_";}var _5a4;var _5a5=_598.identifier;if(_5a5){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_5a5;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_5a4=item[_5a5];var _5a6=_5a4[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_5a6)){this._itemsByIdentity[_5a6]=item;}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_5a5+"].  Value collided: ["+_5a6+"]");}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_5a5+"].  Value collided: ["+_5a6+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_5a4=item[key];for(var j=0;j<_5a4.length;++j){_5a3=_5a4[j];if(_5a3!==null&&typeof _5a3=="object"){if(("_type" in _5a3)&&("_value" in _5a3)){var type=_5a3._type;var _5a7=this._datatypeMap[type];if(!_5a7){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_5a7)){_5a4[j]=new _5a7(_5a3._value);}else{if(lang.isFunction(_5a7.deserialize)){_5a4[j]=_5a7.deserialize(_5a3._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_5a3._reference){var _5a8=_5a3._reference;if(!lang.isObject(_5a8)){_5a4[j]=this._getItemByIdentity(_5a8);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _5a9=this._arrayOfAllItems[k],_5aa=true;for(var _5ab in _5a8){if(_5a9[_5ab]!=_5a8[_5ab]){_5aa=false;}}if(_5aa){_5a4[j]=_5a9;}}}if(this.referenceIntegrity){var _5ac=_5a4[j];if(this.isItem(_5ac)){this._addReferenceToMap(_5ac,item,key);}}}else{if(this.isItem(_5a3)){if(this.referenceIntegrity){this._addReferenceToMap(_5a3,item,key);}}}}}}}},_addReferenceToMap:function(_5ad,_5ae,_5af){},getIdentity:function(item){var _5b0=this._features["dojo.data.api.Identity"];if(_5b0===Number){return item[this._itemNumPropName];}else{var _5b1=item[_5b0];if(_5b1){return _5b1[0];}}return null;},fetchItemByIdentity:function(_5b2){var item,_5b3;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_567.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_5b2});}else{this._loadInProgress=true;var _5b4={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _5b5=xhr.get(_5b4);_5b5.addCallback(function(data){var _5b6=_5b2.scope?_5b2.scope:_56b.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_5b2.identity);if(_5b2.onItem){_5b2.onItem.call(_5b6,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_5b2.onError){_5b2.onError.call(_5b6,error);}}});_5b5.addErrback(function(_5b7){self._loadInProgress=false;if(_5b2.onError){var _5b8=_5b2.scope?_5b2.scope:_56b.global;_5b2.onError.call(_5b8,_5b7);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_5b2.identity);if(_5b2.onItem){_5b3=_5b2.scope?_5b2.scope:_56b.global;_5b2.onItem.call(_5b3,item);}}}}else{item=this._getItemByIdentity(_5b2.identity);if(_5b2.onItem){_5b3=_5b2.scope?_5b2.scope:_56b.global;_5b2.onItem.call(_5b3,item);}}},_getItemByIdentity:function(_5b9){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_5b9)){item=this._itemsByIdentity[_5b9];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_5b9)){item=this._arrayOfAllItems[_5b9];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _5ba=this._features["dojo.data.api.Identity"];if(_5ba===Number){return null;}else{return [_5ba];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_567.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _5bb={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _5bc=xhr.get(_5bb);_5bc.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_5bc.addErrback(function(_5bd){throw _5bd;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_56f,_56d);return _56f;});},"dojo/window":function(){define("dojo/window",["./_base/lang","./_base/sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(lang,has,_5be,dom,geom,_5bf){var _5c0=lang.getObject("dojo.window",true);_5c0.getBox=function(){var _5c1=(_5be.doc.compatMode=="BackCompat")?_5be.body():_5be.doc.documentElement,_5c2=geom.docScroll(),w,h;if(has("touch")){var _5c3=_5be.doc.parentWindow||_5be.doc.defaultView;w=_5c3.innerWidth||_5c1.clientWidth;h=_5c3.innerHeight||_5c1.clientHeight;}else{w=_5c1.clientWidth;h=_5c1.clientHeight;}return {l:_5c2.x,t:_5c2.y,w:w,h:h};};_5c0.get=function(doc){if(has("ie")&&_5c0!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};_5c0.scrollIntoView=function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_5be.doc,body=doc.body||_5be.body(),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if((!(has("mozilla")||isIE||isWK||has("opera"))||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _5c4=doc.compatMode=="BackCompat",_5c5=(isIE>=9&&node.ownerDocument.parentWindow.frameElement)?((html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth))?html:body):(_5c4?body:html),_5c6=isWK?body:_5c5,_5c7=_5c5.clientWidth,_5c8=_5c5.clientHeight,rtl=!geom.isBodyLtr(),_5c9=pos||geom.position(node),el=node.parentNode,_5ca=function(el){return ((isIE<=6||(isIE&&_5c4))?false:(_5bf.get(el,"position").toLowerCase()=="fixed"));};if(_5ca(node)){return;}while(el){if(el==body){el=_5c6;}var _5cb=geom.position(el),_5cc=_5ca(el);if(el==_5c6){_5cb.w=_5c7;_5cb.h=_5c8;if(_5c6==html&&isIE&&rtl){_5cb.x+=_5c6.offsetWidth-_5cb.w;}if(_5cb.x<0||!isIE){_5cb.x=0;}if(_5cb.y<0||!isIE){_5cb.y=0;}}else{var pb=geom.getPadBorderExtents(el);_5cb.w-=pb.w;_5cb.h-=pb.h;_5cb.x+=pb.l;_5cb.y+=pb.t;var _5cd=el.clientWidth,_5ce=_5cb.w-_5cd;if(_5cd>0&&_5ce>0){_5cb.w=_5cd;_5cb.x+=(rtl&&(isIE||el.clientLeft>pb.l))?_5ce:0;}_5cd=el.clientHeight;_5ce=_5cb.h-_5cd;if(_5cd>0&&_5ce>0){_5cb.h=_5cd;}}if(_5cc){if(_5cb.y<0){_5cb.h+=_5cb.y;_5cb.y=0;}if(_5cb.x<0){_5cb.w+=_5cb.x;_5cb.x=0;}if(_5cb.y+_5cb.h>_5c8){_5cb.h=_5c8-_5cb.y;}if(_5cb.x+_5cb.w>_5c7){_5cb.w=_5c7-_5cb.x;}}var l=_5c9.x-_5cb.x,t=_5c9.y-Math.max(_5cb.y,0),r=l+_5c9.w-_5cb.w,bot=t+_5c9.h-_5cb.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_5c4)||isIE>=9)){s=-s;}_5c9.x+=el.scrollLeft;el.scrollLeft+=s;_5c9.x-=el.scrollLeft;}if(bot*t>0){_5c9.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_5c9.y-=el.scrollTop;}el=(el!=_5c6)&&!_5cc&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};return _5c0;});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_5cf,_5d0,_5d1,lang){lang.extend(_5d0,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _5d1("dijit._FocusMixin",null,{_focusManager:_5cf});});},"dojo/data/util/filter":function(){define("dojo/data/util/filter",["dojo/_base/lang"],function(lang){var _5d2=lang.getObject("dojo.data.util.filter",true);_5d2.patternToRegExp=function(_5d3,_5d4){var rxp="^";var c=null;for(var i=0;i<_5d3.length;i++){c=_5d3.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_5d3.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_5d4){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _5d2;});},"versa/api/Role":function(){define("versa/api/Role",["dojo/_base/declare","versa/api/_Object"],function(_5d5){var o=_5d5("versa.api.Role",[versa.api._Object],{constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));}});o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"permissions":{type:"integer"},"created_at":{type:"date",format:"date-time"},"created_by":{type:"string"},"updated_at":{type:"date",format:"date-time"},"updated_by":{type:"string"}},prototype:new o()};return o;});},"versa/api/Operators":function(){define("versa/api/Operators",["dojo/_base/declare","versa/api/_Collection","versa/api/Operator"],function(_5d6){var o=_5d6("versa.api.Operators",[versa.api._Collection],{_andOp:null,_fetch_onComplete:function(_5d7,_5d8){this.isLoaded=true;if((_5d7!=null)&&(_5d7.length>1)){this.first=_5d7[0];}dojo.forEach(_5d7,function(item,idx){if(item.name=="and"){this._andOp=item;}},this);},constructor:function(args){this.target=versa.api.Operators.TRGT;this.schema=versa.api.Operator.schema;this.cache=true;this._initialize();},byDataType:function(id){var ops=[];this.forEach(function(item){if(item.data_type_id==id){ops.push(item);}},this);return ops;},getAndOp:function(){return this._andOp;}});o.TRGT="/operators";return o;});},"versa/api/Reference":function(){define("versa/api/Reference",["dojo/_base/declare","versa/api/_Object","versa/api/_Securable","versa/api/Utilities","versa/api/Document"],function(_5d9){var o=_5d9("versa.api.Reference",[versa.api._Object,versa.api._Securable],{zone:null,library:null,clean_properties:function(args){var _5da=args.library;var _5db=_5da.getDocumentTypes().fetchById({id:this.document_type_id});for(var p in this){if(!dojo.isFunction(this[p])){var _5dc=dojo.replace("documents.{0}",[p]);var _5dd=_5da.getPropertyDefinitions().fetchByDbName(_5dc);if((_5dd)&&(!_5dd.is_system)){if(!_5db.hasProperty(_5dd.id)){delete this[p];}}}}},constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));this.securable_type=versa.api._Securable.types.Reference;},cancelCheckout:function(args){var zone=args.zone;var _5de=args.library;var url=dojo.replace(versa.api.Reference.XCKO_TRGT,[zone.subdomain,_5de.id,this.getId()]);var _5df={};var _5e0=versa.api.XhrHelper.doPutAction({target:url,putData:_5df});return true;},checkin:function(args){var zone=args.zone;var _5e1=args.library;var url=dojo.replace(versa.api.Reference.CKI_TRGT,[zone.subdomain,_5e1.id,this.getId()]);var _5e2=dojo.fromJson(dojox.json.ref.toJson(this,false,"",true));var _5e3=versa.api.XhrHelper.doPutAction({target:url,putData:_5e2});return true;},checkout:function(args){var zone=args.zone;var _5e4=args.library;var url=dojo.replace(versa.api.Reference.CKO_TRGT,[zone.subdomain,_5e4.id,this.getId()]);var _5e5={};var _5e6=versa.api.XhrHelper.doPutAction({target:url,putData:_5e5});return true;},getCopyUrl:function(zone,_5e7){return dojo.replace(versa.api.Reference.CP_TRGT,[zone.subdomain,_5e7.id,this.getId()]);},getCopyVersionUrl:function(zone,_5e8,_5e9){return dojo.replace(versa.api.Reference.CPV_TRGT,[zone.subdomain,_5e8.id,this.getId(),_5e9]);},copyLocal:function(args){var zone=args.zone;var _5ea=args.library;var url=(args.version_id)?this.getCopyVersionUrl(zone,_5ea,args.version_id):this.getCopyUrl(zone,_5ea);versa.api.Utilities.saveUrl({url:url,window_name:"versa_save"});},file:function(args){var zone=args.zone;var _5eb=args.library;var _5ec=args.folder;var url=dojo.replace(versa.api.Reference.FILE_TRGT,[zone.subdomain,_5eb.id,this.getId(),_5ec.getId()]);var _5ed={};var _5ee=versa.api.XhrHelper.doPutAction({target:url,putData:_5ed});_5eb.getReferences().store.onDelete(this);return true;},getPermissionSet:function(_5ef,_5f0,user){var _5f1=new versa.api.PermissionSet();_5f1.setValue(versa.api.PermissionIndices.VIEW,this.hasRights(versa.api._Securable.permissions.VIEW));_5f1.setValue(versa.api.PermissionIndices.COPY,this.hasRights(versa.api._Securable.permissions.VIEW));_5f1.setValue(versa.api.PermissionIndices.EDIT,this.hasRights(versa.api._Securable.permissions.WRITE_METADATA));_5f1.setValue(versa.api.PermissionIndices.MOVE,_5f1.getValue(versa.api.PermissionIndices.EDIT));_5f1.setValue(versa.api.PermissionIndices.CKO,(this.hasRights(versa.api._Securable.permissions.VERSION)&&this.getState(versa.api.Document.states.CHECKED_IN)));_5f1.setValue(versa.api.PermissionIndices.CKI,(this.hasRights(versa.api._Securable.permissions.VERSION)&&this.getState(versa.api.Document.states.CHECKED_OUT)&&(this.checked_out_by==user.name)));_5f1.setValue(versa.api.PermissionIndices.CANCEL_CKO,_5f1.getValue(versa.api.PermissionIndices.CKI));_5f1.setValue(versa.api.PermissionIndices.DELETE,this.hasRights(versa.api._Securable.permissions.DELETE_ITEMS));_5f1.setValue(versa.api.PermissionIndices.SECURE,this.hasRights(versa.api._Securable.permissions.WRITE_ACL));_5f1.setValue(versa.api.PermissionIndices.RESTORE,this.hasRights(versa.api._Securable.permissions.DELETE_ITEMS));_5f1.setValue(versa.api.PermissionIndices.DESTROY,this.hasRights(versa.api._Securable.permissions.DELETE_ITEMS));return _5f1;},getState:function(_5f2){return ((this.state&_5f2)==_5f2);},isDeleted:function(){return this.getState(versa.api.Document.states.DELETED);},isShare:function(){return this.reference_type==versa.api.Reference.types.SHARE;},restore:function(args){var zone=args.zone;var _5f3=args.library;var url=dojo.replace(versa.api.Reference.RESTORE_TRGT,[zone.subdomain,_5f3.getId(),this.getId()]);var _5f4={folder_id:(args.folder)?args.folder.id:null};var _5f5=versa.api.XhrHelper.doPutAction({target:url,putData:_5f4});_5f3.getReferences().store.onDelete(this);return true;},share:function(args){var zone=args.zone;var _5f6=args.library;var _5f7=args.folder;var url=dojo.replace(versa.api.Reference.SHARE_TRGT,[zone.subdomain,_5f6.id,this.getId(),_5f7.getId()]);var _5f8={};var _5f9=versa.api.XhrHelper.doPutAction({target:url,putData:_5f8});return true;},unshare:function(args){var zone=args.zone;var _5fa=args.library;var url=dojo.replace(versa.api.Reference.UNSHARE_TRGT,[zone.subdomain,_5fa.id,this.getId()]);var _5fb={};var _5fc=versa.api.XhrHelper.doPutAction({target:url,putData:_5fb});_5fa.getReferences().store.onDelete(this);return true;},getViewUrl:function(zone,_5fd){return dojo.replace(versa.api.Reference.VW_TRGT,[zone.subdomain,_5fd.id,this.getId()]);},getViewVersionUrl:function(zone,_5fe,_5ff){return dojo.replace(versa.api.Reference.VWV_TRGT,[zone.subdomain,_5fe.id,this.getId(),_5ff]);},view:function(args){var zone=args.zone;var _600=args.library;var url=(args.version_id)?this.getViewVersionUrl(zone,_600,args.version_id):this.getViewUrl(zone,_600);versa.api.Utilities.viewUrl({windowBox:args.windowBox,url:url,window_name:"versa_viewer"});}});o.VW_TRGT="/zones/{0}/libraries/{1}/references/{2}/download/?disposition=inline";o.VWV_TRGT="/zones/{0}/libraries/{1}/references/{2}/download/?disposition=inline&version_id={3}";o.CP_TRGT="/zones/{0}/libraries/{1}/references/{2}/download/?disposition=attachment";o.CPV_TRGT="/zones/{0}/libraries/{1}/references/{2}/download/?disposition=attachment&version_id={3}";o.CKO_TRGT="/zones/{0}/libraries/{1}/references/{2}/checkout.json";o.CKI_TRGT="/zones/{0}/libraries/{1}/references/{2}/checkin.json";o.XCKO_TRGT="/zones/{0}/libraries/{1}/references/{2}/cancel_checkout.json";o.FILE_TRGT="/zones/{0}/libraries/{1}/references/{2}/file.json?folder_id={3}";o.SHARE_TRGT="/zones/{0}/libraries/{1}/references/{2}/share.json?folder_id={3}";o.UNSHARE_TRGT="/zones/{0}/libraries/{1}/references/{2}/unshare.json?";o.RESTORE_TRGT="/zones/{0}/libraries/{1}/references/{2}/restore.json";o.types={"CONTENT":0,"SHARE":17,"TRASH":18};o.schema={type:"object",properties:{"id":{type:"integer"},"reference_type":{type:"integer"},"state":{type:"integer","default":versa.api.Document.states.PENDING}},prototype:new o()};return o;});},"dojox/json/ref":function(){define("dojox/json/ref",["dojo/_base/kernel","dojox","dojo/date/stamp","dojo/_base/array","dojo/_base/json"],function(dojo,_601){dojo.getObject("json",true,_601);return _601.json.ref={resolveJson:function(root,args){args=args||{};var _602=args.idAttribute||"id";var _603=this.refAttribute;var _604=args.idAsRef;var _605=args.idPrefix||"";var _606=args.assignAbsoluteIds;var _607=args.index||{};var _608=args.timeStamps;var ref,_609=[];var _60a=/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/;var _60b=this._addProp;var F=function(){};function walk(it,stop,_60c,_60d,_60e,_60f){var i,_610,val,id=_602 in it?it[_602]:_60c;if(_602 in it||((id!==undefined)&&_60d)){id=(_605+id).replace(_60a,"$2$3");}var _611=_60f||it;if(id!==undefined){if(_606){it.__id=id;}if(args.schemas&&(!(it instanceof Array))&&(val=id.match(/^(.+\/)[^\.\[]*$/))){_60e=args.schemas[val[1]];}if(_607[id]&&((it instanceof Array)==(_607[id] instanceof Array))){_611=_607[id];delete _611.$ref;delete _611._loadObject;_610=true;}else{var _612=_60e&&_60e.prototype;if(_612){F.prototype=_612;_611=new F();}}_607[id]=_611;if(_608){_608[id]=args.time;}}while(_60e){var _613=_60e.properties;if(_613){for(i in it){var _614=_613[i];if(_614&&_614.format=="date-time"&&typeof it[i]=="string"){it[i]=dojo.date.stamp.fromISOString(it[i]);}}}_60e=_60e["extends"];}var _615=it.length;for(i in it){if(i==_615){break;}if(it.hasOwnProperty(i)){val=it[i];if((typeof val=="object")&&val&&!(val instanceof Date)&&i!="__parent"){ref=val[_603]||(_604&&val[_602]);if(!ref||!val.__parent){if(it!=_609){val.__parent=_611;}}if(ref){delete it[i];var path=ref.toString().replace(/(#)([^\.\[])/,"$1.$2").match(/(^([^\[]*\/)?[^#\.\[]*)#?([\.\[].*)?/);if(_607[(_605+ref).replace(_60a,"$2$3")]){ref=_607[(_605+ref).replace(_60a,"$2$3")];}else{if((ref=(path[1]=="$"||path[1]=="this"||path[1]=="")?root:_607[(_605+path[1]).replace(_60a,"$2$3")])){if(path[3]){path[3].replace(/(\[([^\]]+)\])|(\.?([^\.\[]+))/g,function(t,a,b,c,d){ref=ref&&ref[b?b.replace(/[\"\'\\]/,""):d];});}}}if(ref){val=ref;}else{if(!stop){var _616;if(!_616){_609.push(_611);}_616=true;val=walk(val,false,val[_603],true,_614);val._loadObject=args.loader;}}}else{if(!stop){val=walk(val,_609==it,id===undefined?undefined:_60b(id,i),false,_614,_611!=it&&typeof _611[i]=="object"&&_611[i]);}}}it[i]=val;if(_611!=it&&!_611.__isDirty){var old=_611[i];_611[i]=val;if(_610&&val!==old&&!_611._loadObject&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&i!="$ref"&&!(val instanceof Date&&old instanceof Date&&val.getTime()==old.getTime())&&!(typeof val=="function"&&typeof old=="function"&&val.toString()==old.toString())&&_607.onUpdate){_607.onUpdate(_611,i,old,val);}}}}if(_610&&(_602 in it||_611 instanceof Array)){for(i in _611){if(!_611.__isDirty&&_611.hasOwnProperty(i)&&!it.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&!(_611 instanceof Array&&isNaN(i))){if(_607.onUpdate&&i!="_loadObject"&&i!="_idAttr"){_607.onUpdate(_611,i,_611[i],undefined);}delete _611[i];while(_611 instanceof Array&&_611.length&&_611[_611.length-1]===undefined){_611.length--;}}}}else{if(_607.onLoad){_607.onLoad(_611);}}return _611;};if(root&&typeof root=="object"){root=walk(root,false,args.defaultId,true);walk(_609,false);}return root;},fromJson:function(str,args){function ref(_617){var _618={};_618[this.refAttribute]=_617;return _618;};try{var root=eval("("+str+")");}catch(e){throw new SyntaxError("Invalid JSON string: "+e.message+" parsing: "+str);}if(root){return this.resolveJson(root,args);}return root;},toJson:function(it,_619,_61a,_61b){var _61c=this._useRefs;var _61d=this._addProp;var _61e=this.refAttribute;_61a=_61a||"";var _61f={};var _620={};function _621(it,path,_622){if(typeof it=="object"&&it){var _623;if(it instanceof Date){return "\""+dojo.date.stamp.toISOString(it,{zulu:true})+"\"";}var id=it.__id;if(id){if(path!="#"&&((_61c&&!id.match(/#/))||_61f[id])){var ref=id;if(id.charAt(0)!="#"){if(it.__clientId==id){ref="cid:"+id;}else{if(id.substring(0,_61a.length)==_61a){ref=id.substring(_61a.length);}else{ref=id;}}}var _624={};_624[_61e]=ref;return _621(_624,"#");}path=id;}else{it.__id=path;_620[path]=it;}_61f[path]=it;_622=_622||"";var _625=_619?_622+dojo.toJsonIndentStr:"";var _626=_619?"\n":"";var sep=_619?" ":"";if(it instanceof Array){var res=dojo.map(it,function(obj,i){var val=_621(obj,_61d(path,i),_625);if(typeof val!="string"){val="undefined";}return _626+_625+val;});return "["+res.join(","+sep)+_626+_622+"]";}var _627=[];for(var i in it){if(it.hasOwnProperty(i)){var _628;if(typeof i=="number"){_628="\""+i+"\"";}else{if(typeof i=="string"&&(i.charAt(0)!="_"||i.charAt(1)!="_")){_628=dojo._escapeString(i);}else{continue;}}var val=_621(it[i],_61d(path,i),_625);if(typeof val!="string"){continue;}_627.push(_626+_625+_628+":"+sep+val);}}return "{"+_627.join(","+sep)+_626+_622+"}";}else{if(typeof it=="function"&&_601.json.ref.serializeFunctions){return it.toString();}}return dojo.toJson(it);};var json=_621(it,"#","");if(!_61b){for(var i in _620){delete _620[i].__id;}}return json;},_addProp:function(id,prop){return id+(id.match(/#/)?id.length==1?"":".":"#")+prop;},refAttribute:"$ref",_useRefs:false,serializeFunctions:false};});},"dojox/mobile/View":function(){define("dojox/mobile/View",["dojo/_base/kernel","dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dijit/registry","dijit/_Contained","dijit/_Container","dijit/_WidgetBase","./ViewController","./transition"],function(dojo,_629,_62a,_62b,_62c,lang,has,win,_62d,dom,_62e,_62f,_630,_631,_632,_633,_634,_635,_636){var dm=lang.getObject("dojox.mobile",true);return _62c("dojox.mobile.View",[_634,_633,_632],{selected:false,keepScrollPos:true,constructor:function(_637,node){if(node){dom.byId(node).style.visibility="hidden";}this._aw=has("android")>=2.2&&has("android")<3;},buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||win.doc.createElement("DIV");this.domNode.className="mblView";this.connect(this.domNode,"webkitAnimationEnd","onAnimationEnd");this.connect(this.domNode,"webkitAnimationStart","onAnimationStart");if(!_62a["mblCSS3Transition"]){this.connect(this.domNode,"webkitTransitionEnd","onAnimationEnd");}var id=location.href.match(/#(\w+)([^\w=]|$)/)?RegExp.$1:null;this._visible=this.selected&&!id||this.id==id;if(this.selected){dm._defaultView=this;}},startup:function(){if(this._started){return;}var _638=[];var _639=this.domNode.parentNode.childNodes;var _63a=false;for(var i=0;i<_639.length;i++){var c=_639[i];if(c.nodeType===1&&_62e.contains(c,"mblView")){_638.push(c);_63a=_63a||_631.byNode(c)._visible;}}var _63b=this._visible;if(_638.length===1||(!_63a&&_638[0]===this.domNode)){_63b=true;}var _63c=this;setTimeout(function(){if(!_63b){_63c.domNode.style.display="none";}else{dm.currentView=_63c;_63c.onStartView();_62b.publish("/dojox/mobile/startView",[_63c]);}if(_63c.domNode.style.visibility!="visible"){_63c.domNode.style.visibility="visible";}var _63d=_63c.getParent&&_63c.getParent();if(!_63d||!_63d.resize){_63c.resize();}},has("ie")?100:0);this.inherited(arguments);},resize:function(){_629.forEach(this.getChildren(),function(_63e){if(_63e.resize){_63e.resize();}});},onStartView:function(){},onBeforeTransitionIn:function(_63f,dir,_640,_641,_642){},onAfterTransitionIn:function(_643,dir,_644,_645,_646){},onBeforeTransitionOut:function(_647,dir,_648,_649,_64a){},onAfterTransitionOut:function(_64b,dir,_64c,_64d,_64e){},_saveState:function(_64f,dir,_650,_651,_652){this._context=_651;this._method=_652;if(_650=="none"){_650=null;}this._moveTo=_64f;this._dir=dir;this._transition=_650;this._arguments=lang._toArray(arguments);this._args=[];if(_651||_652){for(var i=5;i<arguments.length;i++){this._args.push(arguments[i]);}}},_fixViewState:function(_653){var _654=this.domNode.parentNode.childNodes;for(var i=0;i<_654.length;i++){var n=_654[i];if(n.nodeType===1&&_62e.contains(n,"mblView")){n.className="mblView";}}_653.className="mblView";},convertToId:function(_655){if(typeof (_655)=="string"){_655.match(/^#?([^&?]+)/);return RegExp.$1;}return _655;},performTransition:function(_656,dir,_657,_658,_659){if(_656==="#"){return;}if(dojo.hash){if(typeof (_656)=="string"&&_656.charAt(0)=="#"&&!dm._params){dm._params=[];for(var i=0;i<arguments.length;i++){dm._params.push(arguments[i]);}dojo.hash(_656);return;}}this._saveState.apply(this,arguments);var _65a;if(_656){_65a=this.convertToId(_656);}else{if(!this._dummyNode){this._dummyNode=win.doc.createElement("DIV");win.body().appendChild(this._dummyNode);}_65a=this._dummyNode;}var _65b=this.domNode;var _65c=_65b.offsetTop;_65a=this.toNode=dom.byId(_65a);if(!_65a){return;}_65a.style.visibility=this._aw?"visible":"hidden";_65a.style.display="";this._fixViewState(_65a);var _65d=_631.byNode(_65a);if(_65d){if(_62a["mblAlwaysResizeOnTransition"]||!_65d._resized){dm.resizeAll(null,_65d);_65d._resized=true;}if(_657&&_657!="none"){_65d.containerNode.style.paddingTop=_65c+"px";}_65d.movedFrom=_65b.id;}this.onBeforeTransitionOut.apply(this,arguments);_62b.publish("/dojox/mobile/beforeTransitionOut",[this].concat(lang._toArray(arguments)));if(_65d){if(this.keepScrollPos&&!this.getParent()){var _65e=win.body().scrollTop||win.doc.documentElement.scrollTop||win.global.pageYOffset||0;_65b._scrollTop=_65e;var _65f=(dir==1)?0:(_65a._scrollTop||0);_65a.style.top="0px";if(_65e>1||_65f!==0){_65b.style.top=_65f-_65e+"px";if(_62a["mblHideAddressBar"]!==false){setTimeout(function(){win.global.scrollTo(0,(_65f||1));},0);}}}else{_65a.style.top="0px";}_65d.onBeforeTransitionIn.apply(_65d,arguments);_62b.publish("/dojox/mobile/beforeTransitionIn",[_65d].concat(lang._toArray(arguments)));}if(!this._aw){_65a.style.display="none";_65a.style.visibility="visible";}if(dm._iw&&dm.scrollable){var ss=dm.getScreenSize();win.body().appendChild(dm._iwBgCover);_630.set(dm._iwBgCover,{position:"absolute",top:"0px",left:"0px",height:(ss.h+1)+"px",width:ss.w+"px",backgroundColor:_630.get(win.body(),"background-color"),zIndex:-10000,display:""});_630.set(_65a,{position:"absolute",zIndex:-10001,visibility:"visible",display:""});setTimeout(lang.hitch(this,function(){this._doTransition(_65b,_65a,_657,dir);}),80);}else{this._doTransition(_65b,_65a,_657,dir);}},_toCls:function(s){return "mbl"+s.charAt(0).toUpperCase()+s.substring(1);},_doTransition:function(_660,_661,_662,dir){var rev=(dir==-1)?" mblReverse":"";if(dm._iw&&dm.scrollable){_630.set(_661,{position:"",zIndex:""});win.body().removeChild(dm._iwBgCover);}else{if(!this._aw){_661.style.display="";}}if(!_662||_662=="none"){this.domNode.style.display="none";this.invokeCallback();}else{if(_62a["mblCSS3Transition"]){_62d.when(_636,lang.hitch(this,function(_663){var _664=_630.get(_661,"position");_630.set(_661,"position","absolute");_62d.when(_663(_660,_661,{transition:_662,reverse:(dir===-1)?true:false}),lang.hitch(this,function(){_630.set(_661,"position",_664);this.invokeCallback();}));}));}else{var s=this._toCls(_662);_62e.add(_660,s+" mblOut"+rev);_62e.add(_661,s+" mblIn"+rev);setTimeout(function(){_62e.add(_660,"mblTransition");_62e.add(_661,"mblTransition");},100);var _665="50% 50%";var _666="50% 50%";var _667,posX,posY;if(_662.indexOf("swirl")!=-1||_662.indexOf("zoom")!=-1){if(this.keepScrollPos&&!this.getParent()){_667=win.body().scrollTop||win.doc.documentElement.scrollTop||win.global.pageYOffset||0;}else{_667=-_62f.position(_660,true).y;}posY=win.global.innerHeight/2+_667;_665="50% "+posY+"px";_666="50% "+posY+"px";}else{if(_662.indexOf("scale")!=-1){var _668=_62f.position(_660,true);posX=((this.clickedPosX!==undefined)?this.clickedPosX:win.global.innerWidth/2)-_668.x;if(this.keepScrollPos&&!this.getParent()){_667=win.body().scrollTop||win.doc.documentElement.scrollTop||win.global.pageYOffset||0;}else{_667=-_668.y;}posY=((this.clickedPosY!==undefined)?this.clickedPosY:win.global.innerHeight/2)+_667;_665=posX+"px "+posY+"px";_666=posX+"px "+posY+"px";}}_630.set(_660,{webkitTransformOrigin:_665});_630.set(_661,{webkitTransformOrigin:_666});}}dm.currentView=_631.byNode(_661);},onAnimationStart:function(e){},onAnimationEnd:function(e){var name=e.animationName||e.target.className;if(name.indexOf("Out")===-1&&name.indexOf("In")===-1&&name.indexOf("Shrink")===-1){return;}var _669=false;if(_62e.contains(this.domNode,"mblOut")){_669=true;this.domNode.style.display="none";_62e.remove(this.domNode,[this._toCls(this._transition),"mblIn","mblOut","mblReverse"]);}else{this.containerNode.style.paddingTop="";}_630.set(this.domNode,{webkitTransformOrigin:""});if(name.indexOf("Shrink")!==-1){var li=e.target;li.style.display="none";_62e.remove(li,"mblCloseContent");}if(_669){this.invokeCallback();}this.domNode&&(this.domNode.className="mblView");this.clickedPosX=this.clickedPosY=undefined;},invokeCallback:function(){this.onAfterTransitionOut.apply(this,this._arguments);_62b.publish("/dojox/mobile/afterTransitionOut",[this].concat(this._arguments));var _66a=_631.byNode(this.toNode);if(_66a){_66a.onAfterTransitionIn.apply(_66a,this._arguments);_62b.publish("/dojox/mobile/afterTransitionIn",[_66a].concat(this._arguments));_66a.movedFrom=undefined;}var c=this._context,m=this._method;if(!c&&!m){return;}if(!m){m=c;c=null;}c=c||win.global;if(typeof (m)=="string"){c[m].apply(c,this._args);}else{m.apply(c,this._args);}},getShowingView:function(){var _66b=this.domNode.parentNode.childNodes;for(var i=0;i<_66b.length;i++){var n=_66b[i];if(n.nodeType===1&&_62e.contains(n,"mblView")&&_630.get(n,"display")!=="none"){return _631.byNode(n);}}return null;},show:function(){var view=this.getShowingView();if(view){view.domNode.style.display="none";}this.domNode.style.display="";dm.currentView=this;}});});},"dojox/data/ClientFilter":function(){define("dojox/data/ClientFilter",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/data/util/filter"],function(_66c,lang,_66d,_66e,_66f){var _670=function(_671,_672,_673){return function(item){_671._updates.push({create:_672&&item,remove:_673&&item});_674.onUpdate();};};var _674=_66c("dojox.data.ClientFilter",null,{cacheByDefault:false,constructor:function(){this.onSet=_670(this,true,true);this.onNew=_670(this,true,false);this.onDelete=_670(this,false,true);this._updates=[];this._fetchCache=[];},clearCache:function(){this._fetchCache=[];},updateResultSet:function(_675,_676){if(this.isUpdateable(_676)){for(var i=_676._version||0;i<this._updates.length;i++){var _677=this._updates[i].create;var _678=this._updates[i].remove;if(_678){for(var j=0;j<_675.length;j++){if(this.getIdentity(_675[j])==this.getIdentity(_678)){_675.splice(j--,1);var _679=true;}}}if(_677&&this.matchesQuery(_677,_676)&&_66d.indexOf(_675,_677)==-1){_675.push(_677);_679=true;}}if(_676.sort&&_679){_675.sort(this.makeComparator(_676.sort.concat()));}_675._fullLength=_675.length;if(_676.count&&_679&&_676.count!==Infinity){_675.splice(_676.count,_675.length);}_676._version=this._updates.length;return _679?2:1;}return 0;},querySuperSet:function(_67a,_67b){if(_67a.query==_67b.query){return {};}if(!(_67b.query instanceof Object&&(!_67a.query||typeof _67a.query=="object"))){return false;}var _67c=lang.mixin({},_67b.query);for(var i in _67a.query){if(_67c[i]==_67a.query[i]){delete _67c[i];}else{if(!(typeof _67a.query[i]=="string"&&_66f.patternToRegExp(_67a.query[i]).test(_67c[i]))){return false;}}}return _67c;},serverVersion:0,cachingFetch:function(args){var self=this;for(var i=0;i<this._fetchCache.length;i++){var _67d=this._fetchCache[i];var _67e=this.querySuperSet(_67d,args);if(_67e!==false){var _67f=_67d._loading;if(!_67f){_67f=new _66e();_67f.callback(_67d.cacheResults);}_67f.addCallback(function(_680){_680=self.clientSideFetch(lang.mixin(lang.mixin({},args),{query:_67e}),_680);_67f.fullLength=_680._fullLength;return _680;});args._version=_67d._version;break;}}if(!_67f){var _681=lang.mixin({},args);var _682=(args.queryOptions||0).cache;var _683=this._fetchCache;if(_682===undefined?this.cacheByDefault:_682){if(args.start||args.count){delete _681.start;delete _681.count;args.clientQuery=lang.mixin(args.clientQuery||{},{start:args.start,count:args.count});}args=_681;_683.push(args);}_67f=args._loading=this._doQuery(args);_67f.addErrback(function(){_683.splice(_66d.indexOf(_683,args),1);});}var _684=this.serverVersion;_67f.addCallback(function(_685){delete args._loading;if(_685){args._version=typeof args._version=="number"?args._version:_684;self.updateResultSet(_685,args);args.cacheResults=_685;if(!args.count||_685.length<args.count){_67f.fullLength=((args.start)?args.start:0)+_685.length;}}return _685;});return _67f;},isUpdateable:function(_686){return typeof _686.query=="object";},clientSideFetch:function(_687,_688){if(_687.queryOptions&&_687.queryOptions.results){_688=_687.queryOptions.results;}if(_687.query){var _689=[];for(var i=0;i<_688.length;i++){var _68a=_688[i];if(_68a&&this.matchesQuery(_68a,_687)){_689.push(_688[i]);}}}else{_689=_687.sort?_688.concat():_688;}if(_687.sort){_689.sort(this.makeComparator(_687.sort.concat()));}return this.clientSidePaging(_687,_689);},clientSidePaging:function(_68b,_68c){var _68d=_68b.start||0;var _68e=(_68d||_68b.count)?_68c.slice(_68d,_68d+(_68b.count||_68c.length)):_68c;_68e._fullLength=_68c.length;return _68e;},matchesQuery:function(item,_68f){var _690=_68f.query;var _691=_68f.queryOptions&&_68f.queryOptions.ignoreCase;for(var i in _690){var _692=_690[i];var _693=this.getValue(item,i);if((typeof _692=="string"&&(_692.match(/[\*\.]/)||_691))?!_66f.patternToRegExp(_692,_691).test(_693):_693!=_692){return false;}}return true;},makeComparator:function(sort){var _694=sort.shift();if(!_694){return function(){return 0;};}var _695=_694.attribute;var _696=!!_694.descending;var next=this.makeComparator(sort);var _697=this;return function(a,b){var av=_697.getValue(a,_695);var bv=_697.getValue(b,_695);if(av!=bv){return av<bv==_696?1:-1;}return next(a,b);};}});_674.onUpdate=function(){};return _674;});},"dojo/data/util/sorter":function(){define("dojo/data/util/sorter",["dojo/_base/lang"],function(lang){var _698=lang.getObject("dojo.data.util.sorter",true);_698.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_698.createSortFunction=function(_699,_69a){var _69b=[];function _69c(attr,dir,comp,s){return function(_69d,_69e){var a=s.getValue(_69d,attr);var b=s.getValue(_69e,attr);return dir*comp(a,b);};};var _69f;var map=_69a.comparatorMap;var bc=_698.basicComparator;for(var i=0;i<_699.length;i++){_69f=_699[i];var attr=_69f.attribute;if(attr){var dir=(_69f.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_69b.push(_69c(attr,dir,comp,_69a));}}return function(rowA,rowB){var i=0;while(i<_69b.length){var ret=_69b[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _698;});},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(_6a0,dom,_6a1,_6a2){return _6a0("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled){_6a1.stop(e);return false;}var _6a3=this.onClick(e)===false;if(!_6a3&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _6a4=_6a2.byNode(node);if(_6a4&&typeof _6a4._onSubmit=="function"){_6a4._onSubmit(e);_6a3=true;break;}}}if(_6a3){e.preventDefault();}return !_6a3;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_6a5){this._set("label",_6a5);(this.containerNode||this.focusNode).innerHTML=_6a5;}});});},"dojox/mobile/RoundRectList":function(){define("dojox/mobile/RoundRectList",["dojo/_base/array","dojo/_base/declare","dojo/_base/window","dijit/_Contained","dijit/_Container","dijit/_WidgetBase"],function(_6a6,_6a7,win,_6a8,_6a9,_6aa){return _6a7("dojox.mobile.RoundRectList",[_6aa,_6a9,_6a8],{transition:"slide",iconBase:"",iconPos:"",select:"",stateful:false,buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||win.doc.createElement("UL");this.domNode.className="mblRoundRectList";},resize:function(){_6a6.forEach(this.getChildren(),function(_6ab){if(_6ab.resize){_6ab.resize();}});},onCheckStateChanged:function(_6ac,_6ad){},_setStatefulAttr:function(_6ae){this.stateful=_6ae;_6a6.forEach(this.getChildren(),function(_6af){_6af.setArrow&&_6af.setArrow();});},deselectItem:function(item){item.deselect();},deselectAll:function(){_6a6.forEach(this.getChildren(),function(_6b0){_6b0.deselect&&_6b0.deselect();});},selectItem:function(item){item.select();}});});},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/_base/sniff","dojo/_base/unload","dojo/_base/window","."],function(_6b1,has,_6b2,win,_6b3){var _6b4={},hash={};var _6b5={length:0,add:function(_6b6){if(hash[_6b6.id]){throw new Error("Tried to register widget with id=="+_6b6.id+" but that id is already registered");}hash[_6b6.id]=_6b6;this.length++;},remove:function(id){if(hash[id]){delete hash[id];this.length--;}},byId:function(id){return typeof id=="string"?hash[id]:id;},byNode:function(node){return hash[node.getAttribute("widgetId")];},toArray:function(){var ar=[];for(var id in hash){ar.push(hash[id]);}return ar;},getUniqueId:function(_6b7){var id;do{id=_6b7+"_"+(_6b7 in _6b4?++_6b4[_6b7]:_6b4[_6b7]=0);}while(hash[id]);return _6b3._scopeName=="dijit"?id:_6b3._scopeName+"_"+id;},findWidgets:function(root){var _6b8=[];function _6b9(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _6ba=node.getAttribute("widgetId");if(_6ba){var _6bb=hash[_6ba];if(_6bb){_6b8.push(_6bb);}}else{_6b9(node);}}}};_6b9(root);return _6b8;},_destroyAll:function(){_6b3._curFocus=null;_6b3._prevFocus=null;_6b3._activeStack=[];_6b1.forEach(_6b5.findWidgets(win.body()),function(_6bc){if(!_6bc._destroyed){if(_6bc.destroyRecursive){_6bc.destroyRecursive();}else{if(_6bc.destroy){_6bc.destroy();}}}});},getEnclosingWidget:function(node){while(node){var id=node.getAttribute&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;},_hash:hash};if(has("ie")){_6b2.addOnWindowUnload(function(){_6b5._destroyAll();});}_6b3.registry=_6b5;return _6b5;});},"dojo/date/locale":function(){define("dojo/date/locale",["../_base/kernel","../_base/lang","../_base/array","../date","../cldr/supplemental","../regexp","../string","../i18n!../cldr/nls/gregorian"],function(dojo,lang,_6bd,date,cldr,_6be,_6bf,_6c0){lang.getObject("date.locale",true,dojo);function _6c1(_6c2,_6c3,_6c4,_6c5){return _6c5.replace(/([a-z])\1*/ig,function(_6c6){var s,pad,c=_6c6.charAt(0),l=_6c6.length,_6c7=["abbr","wide","narrow"];switch(c){case "G":s=_6c3[(l<4)?"eraAbbr":"eraNames"][_6c2.getFullYear()<0?0:1];break;case "y":s=_6c2.getFullYear();switch(l){case 1:break;case 2:if(!_6c4.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_6c2.getMonth()+1)/3);pad=true;break;case "M":var m=_6c2.getMonth();if(l<3){s=m+1;pad=true;}else{var _6c8=["months","format",_6c7[l-3]].join("-");s=_6c3[_6c8][m];}break;case "w":var _6c9=0;s=dojo.date.locale._getWeekOfYear(_6c2,_6c9);pad=true;break;case "d":s=_6c2.getDate();pad=true;break;case "D":s=dojo.date.locale._getDayOfYear(_6c2);pad=true;break;case "E":var d=_6c2.getDay();if(l<3){s=d+1;pad=true;}else{var _6ca=["days","format",_6c7[l-3]].join("-");s=_6c3[_6ca][d];}break;case "a":var _6cb=(_6c2.getHours()<12)?"am":"pm";s=_6c4[_6cb]||_6c3["dayPeriods-format-wide-"+_6cb];break;case "h":case "H":case "K":case "k":var h=_6c2.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_6c2.getMinutes();pad=true;break;case "s":s=_6c2.getSeconds();pad=true;break;case "S":s=Math.round(_6c2.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=dojo.date.locale._getZone(_6c2,true,_6c4);if(s){break;}l=4;case "Z":var _6cc=dojo.date.locale._getZone(_6c2,false,_6c4);var tz=[(_6cc<=0?"+":"-"),_6bf.pad(Math.floor(Math.abs(_6cc)/60),2),_6bf.pad(Math.abs(_6cc)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_6c5);}if(pad){s=_6bf.pad(s,l);}return s;});};dojo.date.locale._getZone=function(_6cd,_6ce,_6cf){if(_6ce){return date.getTimezoneName(_6cd);}else{return _6cd.getTimezoneOffset();}};dojo.date.locale.format=function(_6d0,_6d1){_6d1=_6d1||{};var _6d2=dojo.i18n.normalizeLocale(_6d1.locale),_6d3=_6d1.formatLength||"short",_6d4=dojo.date.locale._getGregorianBundle(_6d2),str=[],_6d5=lang.hitch(this,_6c1,_6d0,_6d4,_6d1);if(_6d1.selector=="year"){return _6d6(_6d4["dateFormatItem-yyyy"]||"yyyy",_6d5);}var _6d7;if(_6d1.selector!="date"){_6d7=_6d1.timePattern||_6d4["timeFormat-"+_6d3];if(_6d7){str.push(_6d6(_6d7,_6d5));}}if(_6d1.selector!="time"){_6d7=_6d1.datePattern||_6d4["dateFormat-"+_6d3];if(_6d7){str.push(_6d6(_6d7,_6d5));}}return str.length==1?str[0]:_6d4["dateTimeFormat-"+_6d3].replace(/\{(\d+)\}/g,function(_6d8,key){return str[key];});};dojo.date.locale.regexp=function(_6d9){return dojo.date.locale._parseInfo(_6d9).regexp;};dojo.date.locale._parseInfo=function(_6da){_6da=_6da||{};var _6db=dojo.i18n.normalizeLocale(_6da.locale),_6dc=dojo.date.locale._getGregorianBundle(_6db),_6dd=_6da.formatLength||"short",_6de=_6da.datePattern||_6dc["dateFormat-"+_6dd],_6df=_6da.timePattern||_6dc["timeFormat-"+_6dd],_6e0;if(_6da.selector=="date"){_6e0=_6de;}else{if(_6da.selector=="time"){_6e0=_6df;}else{_6e0=_6dc["dateTimeFormat-"+_6dd].replace(/\{(\d+)\}/g,function(_6e1,key){return [_6df,_6de][key];});}}var _6e2=[],re=_6d6(_6e0,lang.hitch(this,_6e3,_6e2,_6dc,_6da));return {regexp:re,tokens:_6e2,bundle:_6dc};};dojo.date.locale.parse=function(_6e4,_6e5){var _6e6=/[\u200E\u200F\u202A\u202E]/g,info=dojo.date.locale._parseInfo(_6e5),_6e7=info.tokens,_6e8=info.bundle,re=new RegExp("^"+info.regexp.replace(_6e6,"")+"$",info.strict?"":"i"),_6e9=re.exec(_6e4&&_6e4.replace(_6e6,""));if(!_6e9){return null;}var _6ea=["abbr","wide","narrow"],_6eb=[1970,0,1,0,0,0,0],amPm="",_6ec=dojo.every(_6e9,function(v,i){if(!i){return true;}var _6ed=_6e7[i-1];var l=_6ed.length;switch(_6ed.charAt(0)){case "y":if(l!=2&&_6e5.strict){_6eb[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_6ee=year.substring(0,2)*100,_6ef=Math.min(Number(year.substring(2,4))+20,99);_6eb[0]=(v<_6ef)?_6ee+v:_6ee-100+v;}else{if(_6e5.strict){return false;}_6eb[0]=v;}}break;case "M":if(l>2){var _6f0=_6e8["months-format-"+_6ea[l-3]].concat();if(!_6e5.strict){v=v.replace(".","").toLowerCase();_6f0=dojo.map(_6f0,function(s){return s.replace(".","").toLowerCase();});}v=dojo.indexOf(_6f0,v);if(v==-1){return false;}}else{v--;}_6eb[1]=v;break;case "E":case "e":var days=_6e8["days-format-"+_6ea[l-3]].concat();if(!_6e5.strict){v=v.toLowerCase();days=dojo.map(days,function(d){return d.toLowerCase();});}v=dojo.indexOf(days,v);if(v==-1){return false;}break;case "D":_6eb[1]=0;case "d":_6eb[2]=v;break;case "a":var am=_6e5.am||_6e8["dayPeriods-format-wide-am"],pm=_6e5.pm||_6e8["dayPeriods-format-wide-pm"];if(!_6e5.strict){var _6f1=/\./g;v=v.replace(_6f1,"").toLowerCase();am=am.replace(_6f1,"").toLowerCase();pm=pm.replace(_6f1,"").toLowerCase();}if(_6e5.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_6eb[3]=v;break;case "m":_6eb[4]=v;break;case "s":_6eb[5]=v;break;case "S":_6eb[6]=v;}return true;});var _6f2=+_6eb[3];if(amPm==="p"&&_6f2<12){_6eb[3]=_6f2+12;}else{if(amPm==="a"&&_6f2==12){_6eb[3]=0;}}var _6f3=new Date(_6eb[0],_6eb[1],_6eb[2],_6eb[3],_6eb[4],_6eb[5],_6eb[6]);if(_6e5.strict){_6f3.setFullYear(_6eb[0]);}var _6f4=_6e7.join(""),_6f5=_6f4.indexOf("d")!=-1,_6f6=_6f4.indexOf("M")!=-1;if(!_6ec||(_6f6&&_6f3.getMonth()>_6eb[1])||(_6f5&&_6f3.getDate()>_6eb[2])){return null;}if((_6f6&&_6f3.getMonth()<_6eb[1])||(_6f5&&_6f3.getDate()<_6eb[2])){_6f3=date.add(_6f3,"hour",1);}return _6f3;};function _6d6(_6f7,_6f8,_6f9,_6fa){var _6fb=function(x){return x;};_6f8=_6f8||_6fb;_6f9=_6f9||_6fb;_6fa=_6fa||_6fb;var _6fc=_6f7.match(/(''|[^'])+/g),_6fd=_6f7.charAt(0)=="'";dojo.forEach(_6fc,function(_6fe,i){if(!_6fe){_6fc[i]="";}else{_6fc[i]=(_6fd?_6f9:_6f8)(_6fe.replace(/''/g,"'"));_6fd=!_6fd;}});return _6fa(_6fc.join(""));};function _6e3(_6ff,_700,_701,_702){_702=_6be.escapeString(_702);if(!_701.strict){_702=_702.replace(" a"," ?a");}return _702.replace(/([a-z])\1*/ig,function(_703){var s,c=_703.charAt(0),l=_703.length,p2="",p3="";if(_701.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_701.am||_700["dayPeriods-format-wide-am"],pm=_701.pm||_700["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_701.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_6ff){_6ff.push(_703);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _704=[];dojo.date.locale.addCustomFormats=function(_705,_706){_704.push({pkg:_705,name:_706});};dojo.date.locale._getGregorianBundle=function(_707){var _708={};dojo.forEach(_704,function(desc){var _709=dojo.i18n.getLocalization(desc.pkg,desc.name,_707);_708=lang.mixin(_708,_709);},this);return _708;};dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(item,type,_70a,_70b){var _70c,_70d=dojo.date.locale._getGregorianBundle(_70b),_70e=[item,_70a,type];if(_70a=="standAlone"){var key=_70e.join("-");_70c=_70d[key];if(_70c[0]==1){_70c=undefined;}}_70e[1]="format";return (_70c||_70d[_70e.join("-")]).concat();};dojo.date.locale.isWeekend=function(_70f,_710){var _711=cldr.getWeekend(_710),day=(_70f||new Date()).getDay();if(_711.end<_711.start){_711.end+=7;if(day<_711.start){day+=7;}}return day>=_711.start&&day<=_711.end;};dojo.date.locale._getDayOfYear=function(_712){return date.difference(new Date(_712.getFullYear(),0,1,_712.getHours()),_712)+1;};dojo.date.locale._getWeekOfYear=function(_713,_714){if(arguments.length==1){_714=0;}var _715=new Date(_713.getFullYear(),0,1).getDay(),adj=(_715-_714+7)%7,week=Math.floor((dojo.date.locale._getDayOfYear(_713)+adj-1)/7);if(_715==_714){week++;}return week;};return dojo.date.locale;});},"dojox/mobile/TextBox":function(){define("dojox/mobile/TextBox",["dojo/_base/declare","dojo/dom-construct","dijit/_WidgetBase","dijit/form/_FormValueMixin","dijit/form/_TextBoxMixin"],function(_716,_717,_718,_719,_71a){return _716("dojox.mobile.TextBox",[_718,_719,_71a],{baseClass:"mblTextBox",_setTypeAttr:null,_setPlaceHolderAttr:"textbox",buildRendering:function(){if(!this.srcNodeRef){this.srcNodeRef=_717.create("input",{"type":this.type});}this.inherited(arguments);this.textbox=this.focusNode=this.domNode;},postCreate:function(){this.inherited(arguments);this.connect(this.textbox,"onfocus","_onFocus");this.connect(this.textbox,"onblur","_onBlur");}});});},"dojox/mobile/Button":function(){define("dojox/mobile/Button",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dijit/_WidgetBase","dijit/form/_ButtonMixin","dijit/form/_FormWidgetMixin"],function(_71b,_71c,_71d,_71e,_71f,_720,_721){return _71c("dojox.mobile.Button",[_71f,_721,_720],{baseClass:"mblButton",_setTypeAttr:null,duration:1000,_onClick:function(e){var ret=this.inherited(arguments);if(ret&&this.duration>=0){var _722=this.focusNode||this.domNode;var _723=(this.baseClass+" "+this["class"]).split(" ");_723=_71b.map(_723,function(c){return c+"Selected";});_71d.add(_722,_723);setTimeout(function(){_71d.remove(_722,_723);},this.duration);}return ret;},isFocusable:function(){return false;},buildRendering:function(){if(!this.srcNodeRef){this.srcNodeRef=_71e.create("button",{"type":this.type});}else{if(this._cv){var n=this.srcNodeRef.firstChild;if(n&&n.nodeType===3){n.nodeValue=this._cv(n.nodeValue);}}}this.inherited(arguments);this.focusNode=this.domNode;},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onclick","_onClick");},_setLabelAttr:function(_724){this.inherited(arguments,[this._cv?this._cv(_724):_724]);}});});},"versa/api/ViewMappings":function(){define("versa/api/ViewMappings",["dojo/_base/declare","versa/api/_Collection","versa/api/Error","versa/api/ViewMapping"],function(_725){var o=_725("versa.api.ViewMappings",[versa.api._Collection],{constructor:function(args){this.zone=args.zone;this.library=args.library;this.target=dojo.replace(versa.api.ViewMappings.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.ViewMapping.schema;this.cache=false;this._initialize();},getMapping:function(_726,_727){return this.query({query:dojo.replace("?folder_id={0}&user_id={1}",[_726,_727])});}});o.TRGT="/zones/{0}/libraries/{1}/view_mappings";return o;});},"versa/api/Roles":function(){define("versa/api/Roles",["dojo/_base/declare","versa/api/_Collection","versa/api/Role"],function(_728){var o=_728("versa.api.Roles",[versa.api._Collection],{zone:null,constructor:function(args){this.zone=args.zone;this.target=dojo.replace(versa.api.Roles.TRGT,this.zone);this.schema=versa.api.Role.schema;this.cache=true;this._initialize();}});o.TRGT="/zones/{subdomain}/roles";return o;});},"versa/api/_Configurable":function(){define("versa/api/_Configurable",["dojo/_base/declare"],function(_729){return _729("versa.api._Configurable",[],{configuration:{configuration_settings:[]},constructor:function(args){},getValue:function(name){var _72a=null;dojo.some(this.configuration.configuration_settings,function(_72b,idx){if(_72b.name.toLowerCase()==name.toLowerCase()){_72a=_72b.value;return true;}return false;},this);return _72a;}});});},"dojox/mobile/TabBar":function(){define("dojox/mobile/TabBar",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/_Contained","dijit/_Container","dijit/_WidgetBase","./Heading","./TabBarButton"],function(_72c,_72d,_72e,_72f,_730,_731,_732,_733,_734,_735,_736){return _72d("dojox.mobile.TabBar",[_734,_733,_732],{iconBase:"",iconPos:"",barType:"tabBar",inHeading:false,tag:"UL",_fixedButtonWidth:76,_fixedButtonMargin:17,_largeScreenWidth:500,buildRendering:function(){this._clsName=this.barType=="segmentedControl"?"mblTabButton":"mblTabBarButton";this.domNode=this.containerNode=this.srcNodeRef||_72f.create(this.tag);this.domNode.className=this.barType=="segmentedControl"?"mblTabPanelHeader":"mblTabBar";},startup:function(){if(this._started){return;}this.inherited(arguments);this.resize();},resize:function(size){var i,w;if(size&&size.w){_730.setMarginBox(this.domNode,size);w=size.w;}else{w=_731.get(this.domNode,"position")==="absolute"?_730.getContentBox(this.domNode).w:_730.getMarginBox(this.domNode).w;}var bw=this._fixedButtonWidth;var bm=this._fixedButtonMargin;var _737=this.containerNode.childNodes;var arr=[];for(i=0;i<_737.length;i++){var c=_737[i];if(c.nodeType!=1){continue;}if(_72e.contains(c,this._clsName)){arr.push(c);}}var _738;if(this.barType=="segmentedControl"){_738=w;var _739=0;for(i=0;i<arr.length;i++){_738-=_730.getMarginBox(arr[i]).w;_739+=arr[i].offsetWidth;}_738=Math.floor(_738/2);var _73a=this.getParent();var _73b=this.inHeading||_73a instanceof _735;this.containerNode.style.padding=(_73b?0:3)+"px 0px 0px "+(_73b?0:_738)+"px";if(_73b){_731.set(this.domNode,{background:"none",border:"none",width:_739+2+"px"});}_72e.add(this.domNode,"mblTabBar"+(_73b?"Head":"Top"));}else{_738=Math.floor((w-(bw+bm*2)*arr.length)/2);if(w<this._largeScreenWidth||_738<0){for(i=0;i<arr.length;i++){arr[i].style.width=Math.round(98/arr.length)+"%";arr[i].style.margin="0px";}this.containerNode.style.padding="0px 0px 0px 1%";}else{for(i=0;i<arr.length;i++){arr[i].style.width=bw+"px";arr[i].style.margin="0 "+bm+"px";}if(arr.length>0){arr[0].style.marginLeft=_738+bm+"px";}this.containerNode.style.padding="0px";}}if(!_72c.some(this.getChildren(),function(_73c){return _73c.iconNode1;})){_72e.add(this.domNode,"mblTabBarNoIcons");}else{_72e.remove(this.domNode,"mblTabBarNoIcons");}if(!_72c.some(this.getChildren(),function(_73d){return _73d.label;})){_72e.add(this.domNode,"mblTabBarNoText");}else{_72e.remove(this.domNode,"mblTabBarNoText");}}});});},"versa/api/Version":function(){define("versa/api/Version",["dojo/_base/declare","versa/api/_Object"],function(_73e){var o=_73e("versa.api.Version",[versa.api._Object],{zone:null,library:null,document:null,constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},copyLocal:function(args){var zone=args.zone;var _73f=args.library;var _740=args.document;var url=dojo.replace(versa.api.Version.CP_TRGT,[zone.subdomain,_73f.id,_740.id,this.id]);versa.api.Utilities.saveUrl({url:url,window_name:"versa_save"});},view:function(args){var zone=args.zone;var _741=args.library;var _742=args.document;var url=dojo.replace(versa.api.Version.VW_TRGT,[zone.subdomain,_741.id,_742.id,this.id]);versa.api.Utilities.viewUrl({windowBox:args.windowBox,url:url,window_name:"versa_viewer"});}});o.VW_TRGT="/zones/{0}/libraries/{1}/documents/{2}/download/?disposition=inline&version_id={3}";o.CP_TRGT="/zones/{0}/libraries/{1}/documents/{2}/download/?disposition=attachment&version_id={3}";o.schema={type:"object",properties:{"id":{type:"integer"},"binary_file_name":{type:"string","default":""},"binary_content_type":{type:"string","default":""}},prototype:new o()};return o;});},"dojox/mobile/scrollable":function(){define("dojox/mobile/scrollable",["dojo/_base/kernel","dojo/_base/connect","dojo/_base/event","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","./sniff"],function(dojo,_743,_744,lang,win,_745,_746,_747,has){var dm=lang.getObject("dojox.mobile",true);var _748=function(dojo,_749){this.fixedHeaderHeight=0;this.fixedFooterHeight=0;this.isLocalFooter=false;this.scrollBar=true;this.scrollDir="v";this.weight=0.6;this.fadeScrollBar=true;this.disableFlashScrollBar=false;this.threshold=4;this.constraint=true;this.touchNode=null;this.isNested=false;this.dirLock=false;this.height="";this.androidWorkaroud=true;this.init=function(_74a){if(_74a){for(var p in _74a){if(_74a.hasOwnProperty(p)){this[p]=((p=="domNode"||p=="containerNode")&&typeof _74a[p]=="string")?win.doc.getElementById(_74a[p]):_74a[p];}}}this.touchNode=this.touchNode||this.containerNode;this._v=(this.scrollDir.indexOf("v")!=-1);this._h=(this.scrollDir.indexOf("h")!=-1);this._f=(this.scrollDir=="f");this._ch=[];this._ch.push(_743.connect(this.touchNode,has("touch")?"touchstart":"onmousedown",this,"onTouchStart"));if(has("webkit")){this._ch.push(_743.connect(this.domNode,"webkitAnimationEnd",this,"onFlickAnimationEnd"));this._ch.push(_743.connect(this.domNode,"webkitAnimationStart",this,"onFlickAnimationStart"));this._aw=this.androidWorkaroud&&has("android")>=2.2&&has("android")<3;if(this._aw){this._ch.push(_743.connect(win.global,"onresize",this,"onScreenSizeChanged"));this._ch.push(_743.connect(win.global,"onfocus",this,function(e){if(this.containerNode.style.webkitTransform){this.stopAnimation();this.toTopLeft();}}));this._sz=this.getScreenSize();}for(var i=0;i<3;i++){this.setKeyframes(null,null,i);}}if(has("iphone")){_747.set(this.containerNode,"webkitTransform","translate3d(0,0,0)");}this._speed={x:0,y:0};this._appFooterHeight=0;if(this.isTopLevel()&&!this.noResize){this.resize();}var _74b=this;setTimeout(function(){_74b.flashScrollBar();},600);};this.isTopLevel=function(){return true;};this.cleanup=function(){if(this._ch){for(var i=0;i<this._ch.length;i++){_743.disconnect(this._ch[i]);}this._ch=null;}};this.findDisp=function(node){if(!node.parentNode){return null;}var _74c=node.parentNode.childNodes;for(var i=0;i<_74c.length;i++){var n=_74c[i];if(n.nodeType===1&&_745.contains(n,"mblView")&&n.style.display!=="none"){return n;}}return node;};this.getScreenSize=function(){return {h:win.global.innerHeight||win.doc.documentElement.clientHeight||win.doc.documentElement.offsetHeight,w:win.global.innerWidth||win.doc.documentElement.clientWidth||win.doc.documentElement.offsetWidth};};this.isKeyboardShown=function(e){if(!this._sz){return false;}var sz=this.getScreenSize();return (sz.w*sz.h)/(this._sz.w*this._sz.h)<0.8;};this.disableScroll=function(v){if(this.disableTouchScroll===v||this.domNode.style.display==="none"){return;}this.disableTouchScroll=v;this.scrollBar=!v;dm.disableHideAddressBar=dm.disableResizeAll=v;var of=v?"visible":"hidden";_747.set(this.domNode,"overflow",of);_747.set(win.doc.documentElement,"overflow",of);_747.set(win.body(),"overflow",of);var c=this.containerNode;if(v){if(!c.style.webkitTransform){this.stopAnimation();this.toTopLeft();}var mt=parseInt(c.style.marginTop)||0;var h=c.offsetHeight+mt+this.fixedFooterHeight-this._appFooterHeight;_747.set(this.domNode,"height",h+"px");this._cPos={x:parseInt(c.style.left)||0,y:parseInt(c.style.top)||0};_747.set(c,{top:"0px",left:"0px"});var a=win.doc.activeElement;if(a){var at=0;for(var n=a;n.tagName!="BODY";n=n.offsetParent){at+=n.offsetTop;}var st=at+a.clientHeight+10-this.getScreenSize().h;if(st>0){win.body().scrollTop=st;}}}else{if(this._cPos){_747.set(c,{top:this._cPos.y+"px",left:this._cPos.x+"px"});this._cPos=null;}var tags=this.domNode.getElementsByTagName("*");for(var i=0;i<tags.length;i++){tags[i].blur&&tags[i].blur();}dm.resizeAll&&dm.resizeAll();}};this.onScreenSizeChanged=function(e){var sz=this.getScreenSize();if(sz.w*sz.h>this._sz.w*this._sz.h){this._sz=sz;}this.disableScroll(this.isKeyboardShown());};this.toTransform=function(e){var c=this.containerNode;if(c.offsetTop===0&&c.offsetLeft===0||!c._webkitTransform){return;}_747.set(c,{webkitTransform:c._webkitTransform,top:"0px",left:"0px"});c._webkitTransform=null;};this.toTopLeft=function(){var c=this.containerNode;if(!c.style.webkitTransform){return;}c._webkitTransform=c.style.webkitTransform;var pos=this.getPos();_747.set(c,{webkitTransform:"",top:pos.y+"px",left:pos.x+"px"});};this.resize=function(e){this._appFooterHeight=(this.fixedFooterHeight&&!this.isLocalFooter)?this.fixedFooterHeight:0;if(this.isLocalHeader){this.containerNode.style.marginTop=this.fixedHeaderHeight+"px";}var top=0;for(var n=this.domNode;n&&n.tagName!="BODY";n=n.offsetParent){n=this.findDisp(n);if(!n){break;}top+=n.offsetTop;}var h,_74d=this.getScreenSize().h,dh=_74d-top-this._appFooterHeight;if(this.height==="inherit"){if(this.domNode.offsetParent){h=this.domNode.offsetParent.offsetHeight+"px";}}else{if(this.height==="auto"){var _74e=this.domNode.offsetParent;if(_74e){this.domNode.style.height="0px";var _74f=_74e.getBoundingClientRect(),_750=this.domNode.getBoundingClientRect(),_751=_74f.bottom-this._appFooterHeight;if(_750.bottom>=_751){dh=_74d-(_750.top-_74f.top)-this._appFooterHeight;}else{dh=_751-_750.bottom;}}var _752=Math.max(this.domNode.scrollHeight,this.containerNode.scrollHeight);h=(_752?Math.min(_752,dh):dh)+"px";}else{if(this.height){h=this.height;}}}if(!h){h=dh+"px";}if(h.charAt(0)!=="-"&&h!=="default"){this.domNode.style.height=h;}this.onTouchEnd();};this.onFlickAnimationStart=function(e){_744.stop(e);};this.onFlickAnimationEnd=function(e){var an=e&&e.animationName;if(an&&an.indexOf("scrollableViewScroll2")===-1){if(an.indexOf("scrollableViewScroll0")!==-1){_745.remove(this._scrollBarNodeV,"mblScrollableScrollTo0");}else{if(an.indexOf("scrollableViewScroll1")!==-1){_745.remove(this._scrollBarNodeH,"mblScrollableScrollTo1");}else{if(this._scrollBarNodeV){this._scrollBarNodeV.className="";}if(this._scrollBarNodeH){this._scrollBarNodeH.className="";}}}return;}if(e&&e.srcElement){_744.stop(e);}this.stopAnimation();if(this._bounce){var _753=this;var _754=_753._bounce;setTimeout(function(){_753.slideTo(_754,0.3,"ease-out");},0);_753._bounce=undefined;}else{this.hideScrollBar();this.removeCover();if(this._aw){this.toTopLeft();}}};this.isFormElement=function(node){if(node&&node.nodeType!==1){node=node.parentNode;}if(!node||node.nodeType!==1){return false;}var t=node.tagName;return (t==="SELECT"||t==="INPUT"||t==="TEXTAREA"||t==="BUTTON");};this.onTouchStart=function(e){if(this.disableTouchScroll){return;}if(this._conn&&(new Date()).getTime()-this.startTime<500){return;}if(!this._conn){this._conn=[];this._conn.push(_743.connect(win.doc,has("touch")?"touchmove":"onmousemove",this,"onTouchMove"));this._conn.push(_743.connect(win.doc,has("touch")?"touchend":"onmouseup",this,"onTouchEnd"));}this._aborted=false;if(_745.contains(this.containerNode,"mblScrollableScrollTo2")){this.abort();}else{if(this._scrollBarNodeV){this._scrollBarNodeV.className="";}if(this._scrollBarNodeH){this._scrollBarNodeH.className="";}}if(this._aw){this.toTransform(e);}this.touchStartX=e.touches?e.touches[0].pageX:e.clientX;this.touchStartY=e.touches?e.touches[0].pageY:e.clientY;this.startTime=(new Date()).getTime();this.startPos=this.getPos();this._dim=this.getDim();this._time=[0];this._posX=[this.touchStartX];this._posY=[this.touchStartY];this._locked=false;if(!this.isFormElement(e.target)&&!this.isNested){_744.stop(e);}};this.onTouchMove=function(e){if(this._locked){return;}var x=e.touches?e.touches[0].pageX:e.clientX;var y=e.touches?e.touches[0].pageY:e.clientY;var dx=x-this.touchStartX;var dy=y-this.touchStartY;var to={x:this.startPos.x+dx,y:this.startPos.y+dy};var dim=this._dim;dx=Math.abs(dx);dy=Math.abs(dy);if(this._time.length==1){if(this.dirLock){if(this._v&&!this._h&&dx>=this.threshold&&dx>=dy||(this._h||this._f)&&!this._v&&dy>=this.threshold&&dy>=dx){this._locked=true;return;}}if(this._v&&Math.abs(dy)<this.threshold||(this._h||this._f)&&Math.abs(dx)<this.threshold){return;}this.addCover();this.showScrollBar();}var _755=this.weight;if(this._v&&this.constraint){if(to.y>0){to.y=Math.round(to.y*_755);}else{if(to.y<-dim.o.h){if(dim.c.h<dim.d.h){to.y=Math.round(to.y*_755);}else{to.y=-dim.o.h-Math.round((-dim.o.h-to.y)*_755);}}}}if((this._h||this._f)&&this.constraint){if(to.x>0){to.x=Math.round(to.x*_755);}else{if(to.x<-dim.o.w){if(dim.c.w<dim.d.w){to.x=Math.round(to.x*_755);}else{to.x=-dim.o.w-Math.round((-dim.o.w-to.x)*_755);}}}}this.scrollTo(to);var max=10;var n=this._time.length;if(n>=2){var d0,d1;if(this._v&&!this._h){d0=this._posY[n-1]-this._posY[n-2];d1=y-this._posY[n-1];}else{if(!this._v&&this._h){d0=this._posX[n-1]-this._posX[n-2];d1=x-this._posX[n-1];}}if(d0*d1<0){this._time=[this._time[n-1]];this._posX=[this._posX[n-1]];this._posY=[this._posY[n-1]];n=1;}}if(n==max){this._time.shift();this._posX.shift();this._posY.shift();}this._time.push((new Date()).getTime()-this.startTime);this._posX.push(x);this._posY.push(y);};this.onTouchEnd=function(e){if(this._locked){return;}var _756=this._speed={x:0,y:0};var dim=this._dim;var pos=this.getPos();var to={};if(e){if(!this._conn){return;}for(var i=0;i<this._conn.length;i++){_743.disconnect(this._conn[i]);}this._conn=null;var n=this._time.length;var _757=false;if(!this._aborted){if(n<=1){_757=true;}else{if(n==2&&Math.abs(this._posY[1]-this._posY[0])<4&&has("touch")){_757=true;}}}var _758=this.isFormElement(e.target);if(_757&&!_758){this.hideScrollBar();this.removeCover();if(has("touch")){var elem=e.target;if(elem.nodeType!=1){elem=elem.parentNode;}var ev=win.doc.createEvent("MouseEvents");ev.initMouseEvent("click",true,true,win.global,1,e.screenX,e.screenY,e.clientX,e.clientY);setTimeout(function(){elem.dispatchEvent(ev);},0);}return;}else{if(this._aw&&_757&&_758){this.hideScrollBar();this.toTopLeft();return;}}_756=this._speed=this.getSpeed();}else{if(pos.x==0&&pos.y==0){return;}dim=this.getDim();}if(this._v){to.y=pos.y+_756.y;}if(this._h||this._f){to.x=pos.x+_756.x;}this.adjustDestination(to,pos);if(this.scrollDir=="v"&&dim.c.h<dim.d.h){this.slideTo({y:0},0.3,"ease-out");return;}else{if(this.scrollDir=="h"&&dim.c.w<dim.d.w){this.slideTo({x:0},0.3,"ease-out");return;}else{if(this._v&&this._h&&dim.c.h<dim.d.h&&dim.c.w<dim.d.w){this.slideTo({x:0,y:0},0.3,"ease-out");return;}}}var _759,_75a="ease-out";var _75b={};if(this._v&&this.constraint){if(to.y>0){if(pos.y>0){_759=0.3;to.y=0;}else{to.y=Math.min(to.y,20);_75a="linear";_75b.y=0;}}else{if(-_756.y>dim.o.h-(-pos.y)){if(pos.y<-dim.o.h){_759=0.3;to.y=dim.c.h<=dim.d.h?0:-dim.o.h;}else{to.y=Math.max(to.y,-dim.o.h-20);_75a="linear";_75b.y=-dim.o.h;}}}}if((this._h||this._f)&&this.constraint){if(to.x>0){if(pos.x>0){_759=0.3;to.x=0;}else{to.x=Math.min(to.x,20);_75a="linear";_75b.x=0;}}else{if(-_756.x>dim.o.w-(-pos.x)){if(pos.x<-dim.o.w){_759=0.3;to.x=dim.c.w<=dim.d.w?0:-dim.o.w;}else{to.x=Math.max(to.x,-dim.o.w-20);_75a="linear";_75b.x=-dim.o.w;}}}}this._bounce=(_75b.x!==undefined||_75b.y!==undefined)?_75b:undefined;if(_759===undefined){var _75c,_75d;if(this._v&&this._h){_75d=Math.sqrt(_756.x+_756.x+_756.y*_756.y);_75c=Math.sqrt(Math.pow(to.y-pos.y,2)+Math.pow(to.x-pos.x,2));}else{if(this._v){_75d=_756.y;_75c=to.y-pos.y;}else{if(this._h){_75d=_756.x;_75c=to.x-pos.x;}}}if(_75c===0&&!e){return;}_759=_75d!==0?Math.abs(_75c/_75d):0.01;}this.slideTo(to,_759,_75a);};this.adjustDestination=function(to,pos){};this.abort=function(){this.scrollTo(this.getPos());this.stopAnimation();this._aborted=true;};this.stopAnimation=function(){_745.remove(this.containerNode,"mblScrollableScrollTo2");if(has("android")){_747.set(this.containerNode,"webkitAnimationDuration","0s");}if(this._scrollBarV){this._scrollBarV.className="";}if(this._scrollBarH){this._scrollBarH.className="";}};this.getSpeed=function(){var x=0,y=0,n=this._time.length;if(n>=2&&(new Date()).getTime()-this.startTime-this._time[n-1]<500){var dy=this._posY[n-(n>3?2:1)]-this._posY[(n-6)>=0?n-6:0];var dx=this._posX[n-(n>3?2:1)]-this._posX[(n-6)>=0?n-6:0];var dt=this._time[n-(n>3?2:1)]-this._time[(n-6)>=0?n-6:0];y=this.calcSpeed(dy,dt);x=this.calcSpeed(dx,dt);}return {x:x,y:y};};this.calcSpeed=function(d,t){return Math.round(d/t*100)*4;};this.scrollTo=function(to,_75e,node){var s=(node||this.containerNode).style;if(has("webkit")){s.webkitTransform=this.makeTranslateStr(to);}else{if(this._v){s.top=to.y+"px";}if(this._h||this._f){s.left=to.x+"px";}}if(!_75e){this.scrollScrollBarTo(this.calcScrollBarPos(to));}};this.slideTo=function(to,_75f,_760){this._runSlideAnimation(this.getPos(),to,_75f,_760,this.containerNode,2);this.slideScrollBarTo(to,_75f,_760);};this.makeTranslateStr=function(to){var y=this._v&&typeof to.y=="number"?to.y+"px":"0px";var x=(this._h||this._f)&&typeof to.x=="number"?to.x+"px":"0px";return dm.hasTranslate3d?"translate3d("+x+","+y+",0px)":"translate("+x+","+y+")";};this.getPos=function(){if(has("webkit")){var m=win.doc.defaultView.getComputedStyle(this.containerNode,"")["-webkit-transform"];if(m&&m.indexOf("matrix")===0){var arr=m.split(/[,\s\)]+/);return {y:arr[5]-0,x:arr[4]-0};}return {x:0,y:0};}else{var y=parseInt(this.containerNode.style.top)||0;return {y:y,x:this.containerNode.offsetLeft};}};this.getDim=function(){var d={};d.c={h:this.containerNode.offsetHeight,w:this.containerNode.offsetWidth};d.v={h:this.domNode.offsetHeight+this._appFooterHeight,w:this.domNode.offsetWidth};d.d={h:d.v.h-this.fixedHeaderHeight-this.fixedFooterHeight,w:d.v.w};d.o={h:d.c.h-d.v.h+this.fixedHeaderHeight+this.fixedFooterHeight,w:d.c.w-d.v.w};return d;};this.showScrollBar=function(){if(!this.scrollBar){return;}var dim=this._dim;if(this.scrollDir=="v"&&dim.c.h<=dim.d.h){return;}if(this.scrollDir=="h"&&dim.c.w<=dim.d.w){return;}if(this._v&&this._h&&dim.c.h<=dim.d.h&&dim.c.w<=dim.d.w){return;}var _761=function(self,dir){var bar=self["_scrollBarNode"+dir];if(!bar){var _762=_746.create("div",null,self.domNode);var _763={position:"absolute",overflow:"hidden"};if(dir=="V"){_763.right="2px";_763.width="5px";}else{_763.bottom=(self.isLocalFooter?self.fixedFooterHeight:0)+2+"px";_763.height="5px";}_747.set(_762,_763);_762.className="mblScrollBarWrapper";self["_scrollBarWrapper"+dir]=_762;bar=_746.create("div",null,_762);_747.set(bar,{opacity:0.6,position:"absolute",backgroundColor:"#606060",fontSize:"1px",webkitBorderRadius:"2px",MozBorderRadius:"2px",webkitTransformOrigin:"0 0",zIndex:2147483647});_747.set(bar,dir=="V"?{width:"5px"}:{height:"5px"});self["_scrollBarNode"+dir]=bar;}return bar;};if(this._v&&!this._scrollBarV){this._scrollBarV=_761(this,"V");}if(this._h&&!this._scrollBarH){this._scrollBarH=_761(this,"H");}this.resetScrollBar();};this.hideScrollBar=function(){var _764;if(this.fadeScrollBar&&has("webkit")){if(!dm._fadeRule){var node=_746.create("style",null,win.doc.getElementsByTagName("head")[0]);node.textContent=".mblScrollableFadeScrollBar{"+"  -webkit-animation-duration: 1s;"+"  -webkit-animation-name: scrollableViewFadeScrollBar;}"+"@-webkit-keyframes scrollableViewFadeScrollBar{"+"  from { opacity: 0.6; }"+"  to { opacity: 0; }}";dm._fadeRule=node.sheet.cssRules[1];}_764=dm._fadeRule;}if(!this.scrollBar){return;}var f=function(bar,self){_747.set(bar,{opacity:0,webkitAnimationDuration:""});if(self._aw){bar.style.webkitTransform="";}else{bar.className="mblScrollableFadeScrollBar";}};if(this._scrollBarV){f(this._scrollBarV,this);this._scrollBarV=null;}if(this._scrollBarH){f(this._scrollBarH,this);this._scrollBarH=null;}};this.calcScrollBarPos=function(to){var pos={};var dim=this._dim;var f=function(_765,barH,t,d,c){var y=Math.round((d-barH-8)/(d-c)*t);if(y<-barH+5){y=-barH+5;}if(y>_765-5){y=_765-5;}return y;};if(typeof to.y=="number"&&this._scrollBarV){pos.y=f(this._scrollBarWrapperV.offsetHeight,this._scrollBarV.offsetHeight,to.y,dim.d.h,dim.c.h);}if(typeof to.x=="number"&&this._scrollBarH){pos.x=f(this._scrollBarWrapperH.offsetWidth,this._scrollBarH.offsetWidth,to.x,dim.d.w,dim.c.w);}return pos;};this.scrollScrollBarTo=function(to){if(!this.scrollBar){return;}if(this._v&&this._scrollBarV&&typeof to.y=="number"){if(has("webkit")){this._scrollBarV.style.webkitTransform=this.makeTranslateStr({y:to.y});}else{this._scrollBarV.style.top=to.y+"px";}}if(this._h&&this._scrollBarH&&typeof to.x=="number"){if(has("webkit")){this._scrollBarH.style.webkitTransform=this.makeTranslateStr({x:to.x});}else{this._scrollBarH.style.left=to.x+"px";}}};this.slideScrollBarTo=function(to,_766,_767){if(!this.scrollBar){return;}var _768=this.calcScrollBarPos(this.getPos());var _769=this.calcScrollBarPos(to);if(this._v&&this._scrollBarV){this._runSlideAnimation({y:_768.y},{y:_769.y},_766,_767,this._scrollBarV,0);}if(this._h&&this._scrollBarH){this._runSlideAnimation({x:_768.x},{x:_769.x},_766,_767,this._scrollBarH,1);}};this._runSlideAnimation=function(from,to,_76a,_76b,node,idx){if(has("webkit")){this.setKeyframes(from,to,idx);_747.set(node,{webkitAnimationDuration:_76a+"s",webkitAnimationTimingFunction:_76b});_745.add(node,"mblScrollableScrollTo"+idx);if(idx==2){this.scrollTo(to,true,node);}else{this.scrollScrollBarTo(to);}}else{if(dojo.fx&&dojo.fx.easing&&_76a){var s=dojo.fx.slideTo({node:node,duration:_76a*1000,left:to.x,top:to.y,easing:(_76b=="ease-out")?dojo.fx.easing.quadOut:dojo.fx.easing.linear}).play();if(idx==2){_743.connect(s,"onEnd",this,"onFlickAnimationEnd");}}else{if(idx==2){this.scrollTo(to,false,node);this.onFlickAnimationEnd();}else{this.scrollScrollBarTo(to);}}}};this.resetScrollBar=function(){var f=function(_76c,bar,d,c,hd,v){if(!bar){return;}var _76d={};_76d[v?"top":"left"]=hd+4+"px";var t=(d-8)<=0?1:d-8;_76d[v?"height":"width"]=t+"px";_747.set(_76c,_76d);var l=Math.round(d*d/c);l=Math.min(Math.max(l-8,5),t);bar.style[v?"height":"width"]=l+"px";_747.set(bar,{"opacity":0.6});};var dim=this.getDim();f(this._scrollBarWrapperV,this._scrollBarV,dim.d.h,dim.c.h,this.fixedHeaderHeight,true);f(this._scrollBarWrapperH,this._scrollBarH,dim.d.w,dim.c.w,0);this.createMask();};this.createMask=function(){if(!has("webkit")){return;}var ctx;if(this._scrollBarWrapperV){var h=this._scrollBarWrapperV.offsetHeight;ctx=win.doc.getCSSCanvasContext("2d","scrollBarMaskV",5,h);ctx.fillStyle="rgba(0,0,0,0.5)";ctx.fillRect(1,0,3,2);ctx.fillRect(0,1,5,1);ctx.fillRect(0,h-2,5,1);ctx.fillRect(1,h-1,3,2);ctx.fillStyle="rgb(0,0,0)";ctx.fillRect(0,2,5,h-4);this._scrollBarWrapperV.style.webkitMaskImage="-webkit-canvas(scrollBarMaskV)";}if(this._scrollBarWrapperH){var w=this._scrollBarWrapperH.offsetWidth;ctx=win.doc.getCSSCanvasContext("2d","scrollBarMaskH",w,5);ctx.fillStyle="rgba(0,0,0,0.5)";ctx.fillRect(0,1,2,3);ctx.fillRect(1,0,1,5);ctx.fillRect(w-2,0,1,5);ctx.fillRect(w-1,1,2,3);ctx.fillStyle="rgb(0,0,0)";ctx.fillRect(2,0,w-4,5);this._scrollBarWrapperH.style.webkitMaskImage="-webkit-canvas(scrollBarMaskH)";}};this.flashScrollBar=function(){if(this.disableFlashScrollBar||!this.domNode){return;}this._dim=this.getDim();if(this._dim.d.h<=0){return;}this.showScrollBar();var _76e=this;setTimeout(function(){_76e.hideScrollBar();},300);};this.addCover=function(){if(!has("touch")&&!this.noCover){if(!this._cover){this._cover=_746.create("div",null,win.doc.body);_747.set(this._cover,{backgroundColor:"#ffff00",opacity:0,position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:2147483647});this._ch.push(_743.connect(this._cover,has("touch")?"touchstart":"onmousedown",this,"onTouchEnd"));}else{this._cover.style.display="";}this.setSelectable(this._cover,false);this.setSelectable(this.domNode,false);}};this.removeCover=function(){if(!has("touch")&&this._cover){this._cover.style.display="none";this.setSelectable(this._cover,true);this.setSelectable(this.domNode,true);}};this.setKeyframes=function(from,to,idx){if(!dm._rule){dm._rule=[];}if(!dm._rule[idx]){var node=_746.create("style",null,win.doc.getElementsByTagName("head")[0]);node.textContent=".mblScrollableScrollTo"+idx+"{-webkit-animation-name: scrollableViewScroll"+idx+";}"+"@-webkit-keyframes scrollableViewScroll"+idx+"{}";dm._rule[idx]=node.sheet.cssRules[1];}var rule=dm._rule[idx];if(rule){if(from){rule.deleteRule("from");rule.insertRule("from { -webkit-transform: "+this.makeTranslateStr(from)+"; }");}if(to){if(to.x===undefined){to.x=from.x;}if(to.y===undefined){to.y=from.y;}rule.deleteRule("to");rule.insertRule("to { -webkit-transform: "+this.makeTranslateStr(to)+"; }");}}};this.setSelectable=function(node,_76f){node.style.KhtmlUserSelect=_76f?"auto":"none";node.style.MozUserSelect=_76f?"":"none";node.onselectstart=_76f?null:function(){return false;};if(has("ie")){node.unselectable=_76f?"":"on";var _770=node.getElementsByTagName("*");for(var i=0;i<_770.length;i++){_770[i].unselectable=_76f?"":"on";}}};if(has("webkit")){var elem=win.doc.createElement("div");elem.style.webkitTransform="translate3d(0px,1px,0px)";win.doc.documentElement.appendChild(elem);var v=win.doc.defaultView.getComputedStyle(elem,"")["-webkit-transform"];dm.hasTranslate3d=v&&v.indexOf("matrix")===0;win.doc.documentElement.removeChild(elem);}};dm.scrollable=_748;return _748;});},"versa/api/_Collection":function(){define("versa/api/_Collection",["dojo/_base/declare","dojox/data/ClientFilter","dojox/data/JsonRestStore","versa/api/Error","versa/api/Utilities"],function(_771){return _771("versa.api._Collection",[],{store:null,target:null,schema:null,syncMode:true,cache:false,first:null,isLoaded:false,_fetch_onComplete:function(_772,_773){this.isLoaded=true;if((_772!=null)&&(_772.length>1)){this.first=_772[0];}this.onFetchComplete(_772);},_getExistingNames:function(args){var _774=[];var _775=this.fetch();var _776=null;if(args){_776=args.exclude;}dojo.forEach(_775,function(item){if((item!=_776)&&(this.store.hasAttribute(item,"name"))){_774.push(item.name);}},this);return _774;},_getIdentity:function(item){var id=item.id;if(id){return id;}id=item.__clientId||item.__id;if(!id){return id;}var _777=this.service.servicePath.replace(/[^\/]*$/,"");return id.substring(0,_777.length)!=_777?id:id.substring(_777.length);},_initialize:function(){this.store=new dojox.data.JsonRestStore({target:this.target,idAttribute:"id",labelAttribute:"name",schema:this.schema,syncMode:this.syncMode,cacheByDefault:this.cache,clearOnClose:true,loadLazyValues:false,alwaysPostNewItems:true});},clearCache:function(){this.store.clearCache();},clone:function(args){this.store.changing(args.item);},constructor:function(){},containsValue:function(item,_778,_779){return this.store.containsValue(item,_778,_779);},create:function(args){var _77a=this.store.newItem(args);this.store.changing(_77a);return _77a;},destroy:function(args){var _77b=(args)?args.no_save:false;try{this.store.deleteItem(args.item);if(!_77b){this.save({alwaysPostNewItems:true,onComplete:((args)&&(args.onComplete))?args.onComplete:function(){},scope:((args)&&(args.scope))?args.scope:this});}}finally{args.item.__isDirty=false;}},fetch:function(args){var _77c=this.store.fetch({query:{},queryOptions:{cache:this.cache},onComplete:dojo.hitch(this,this._fetch_onComplete)});return _77c.results;},fetchById:function(args){var item=this.store.fetchItemByIdentity({identity:args.id});return item;},fetchByName:function(name){var _77d=null;function _77e(_77f,_780){dojo.some(_77f,function(item){if(item.name==name){_77d=item;return false;}},this);};this.store.fetch({query:{},queryOptions:{cache:true},onComplete:_77e});return _77d;},fetchItemsByName:function(name){var _781=new Array();function _782(_783,_784){dojo.some(_783,function(item){if(item.name==name){_781.push(item);}},this);};this.store.fetch({query:{},queryOptions:{cache:true},onComplete:_782});return _781;},forEach:function(_785,_786){function _787(_788,_789){dojo.forEach(_788,_785,_786);};this.store.fetch({query:{},onComplete:_787});},isDirty:function(args){var item=(args)?args.item:null;return this.store.isDirty(item);},isNew:function(args){return ((args.item.id==undefined)||(args.item.id==null));},invalidate:function(_78a){var _78b=this.store.service.servicePath.replace(/[^\/]*$/,"");var _78c=(_78b||"")+_78a;var item=this.store._index[_78c];if(item){delete this.store._index[_78c];}},isItemLoaded:function(args){return this.store.isItemLoaded(args);},loadItem:function(args){var err=null;var item=args.item;if(args.callback){args.onItem=args.callback;}var _78d=(args.scope)?args.scope:this;this.store.loadItem({item:item,scope:_78d,onItem:args.onItem,onError:args.onError});},merge:function(_78e,_78f){for(var prop in _78e){var _790=_78e[prop];if((_790!=null)&&(typeof _790=="object")&&(typeof _790.getMonth!="function")){continue;}if(_78f.hasOwnProperty(prop)){var _791=_78f[prop];if(_791!=_790){this.store.setValue(_78e,prop,_791);}}}},onFetchComplete:function(_792){},query:function(args){var _793=[];var _794=this.store.fetch({query:args.query,queryOptions:{cache:false},sort:args.sort});if((_794)&&(_794.results)){_793=_794.results;}return _793;},refresh:function(){this.store.clearCache();this.fetch();},refreshAsync:function(args){if(args.invalidate){this.invalidate(args.identity);}this.store.fetchItemByIdentity({scope:args.scope,identity:args.identity,onItem:args.onItem,onError:args.onError});},refreshItem:function(_795){var _796=this.store.fetch({query:_795,queryOptions:{cache:false}});return _796.results;},revert:function(args){this.store.revert();},save:function(args){var err=null;args=(!args)?{scope:this,onComplete:function(){}}:args;function _797(_798){err=new versa.api.Error(_798.responseText,_798);};this.store.save({alwaysPostNewItems:true,revertOnError:false,onError:_797,onComplete:((args)&&(args.onComplete))?args.onComplete:function(){},scope:((args)&&(args.scope))?args.scope:this});if(err){throw err;}},setDirty:function(item){this.store.changing(item);},setValue:function(item,attr,_799){this.store.setValue(item,attr,_799);},getValue:function(item,attr){return this.store.getValue(item,attr);},generateUniqueName:function(args){var _79a=this.getExistingNames();var _79b=args.base_name;var _79c=args.appendix;return versa.api.Utilities.generateUniqueName({names:_79a,base_name:_79b,appendix:_79c});},getExistingNames:function(args){var _79d=[];var _79e=this.fetch();var _79f=null;if(args){_79f=args.exclude;}dojo.forEach(_79e,function(item){if((item!=_79f)&&(this.store.hasAttribute(item,"name"))){_79d.push(item.name);}},this);return _79d;},fetchDirtyItems:function(args){var _7a0=[];var _7a1=this.store.fetch({query:{__isDirty:true},queryOptions:{cache:false}});if((_7a1)&&(_7a1.results)){_7a0=_7a1.results;}return _7a0;}});});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/sniff","./_base/manager","."],function(_7a2,_7a3,_7a4,dom,_7a5,_7a6,has,_7a7,_7a8){var _7a9=(_7a8._isElementShown=function(elem){var s=_7a6.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_7a5.get(elem,"type")!="hidden");});_7a8.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _7a5.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _7aa=elem.contentDocument;if("designMode" in _7aa&&_7aa.designMode=="on"){return true;}body=_7aa.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _7ab=(_7a8.isTabNavigable=function(elem){if(_7a5.get(elem,"disabled")){return false;}else{if(_7a5.has(elem,"tabIndex")){return _7a5.get(elem,"tabIndex")>=0;}else{return _7a8.hasDefaultTabStop(elem);}}});_7a8._getTabNavigable=function(root){var _7ac,last,_7ad,_7ae,_7af,_7b0,_7b1={};function _7b2(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _7b3=function(_7b4){for(var _7b5=_7b4.firstChild;_7b5;_7b5=_7b5.nextSibling){if(_7b5.nodeType!=1||(has("ie")&&_7b5.scopeName!=="HTML")||!_7a9(_7b5)){continue;}if(_7ab(_7b5)){var _7b6=_7a5.get(_7b5,"tabIndex");if(!_7a5.has(_7b5,"tabIndex")||_7b6==0){if(!_7ac){_7ac=_7b5;}last=_7b5;}else{if(_7b6>0){if(!_7ad||_7b6<_7ae){_7ae=_7b6;_7ad=_7b5;}if(!_7af||_7b6>=_7b0){_7b0=_7b6;_7af=_7b5;}}}var rn=_7b2(_7b5);if(_7a5.get(_7b5,"checked")&&rn){_7b1[rn]=_7b5;}}if(_7b5.nodeName.toUpperCase()!="SELECT"){_7b3(_7b5);}}};if(_7a9(root)){_7b3(root);}function rs(node){return _7b1[_7b2(node)]||node;};return {first:rs(_7ac),last:rs(last),lowest:rs(_7ad),highest:rs(_7af)};};_7a8.getFirstInTabbingOrder=function(root){var _7b7=_7a8._getTabNavigable(dom.byId(root));return _7b7.lowest?_7b7.lowest:_7b7.first;};_7a8.getLastInTabbingOrder=function(root){var _7b8=_7a8._getTabNavigable(dom.byId(root));return _7b8.last?_7b8.last:_7b8.highest;};return {hasDefaultTabStop:_7a8.hasDefaultTabStop,isTabNavigable:_7a8.isTabNavigable,_getTabNavigable:_7a8._getTabNavigable,getFirstInTabbingOrder:_7a8.getFirstInTabbingOrder,getLastInTabbingOrder:_7a8.getLastInTabbingOrder};});},"versa/api/Group":function(){define("versa/api/Group",["dojo/_base/declare","versa/api/_Object"],function(_7b9){var o=_7b9("versa.api.Group",[versa.api._Object],{description:null,constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},isValid:function(){var _7ba=true;if(String.isEmpty(this.name.trim())){_7ba=false;}return _7ba;}});o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"description":{type:"string"},"active_users":{type:"array",items:{type:"integer"}},"created_at":{type:"date",format:"date-time"},"created_by":{type:"string"},"updated_at":{type:"date",format:"date-time"},"updated_by":{type:"string"}},prototype:new o()};return o;});},"versa/widget/document/mobile/DocumentPropertyView":function(){require(["dojo/_base/declare","dijit/_WidgetBase","dojox/mobile/Heading","dojox/mobile/ScrollableView","dojox/mobile/EdgeToEdgeDataList","dojox/mobile/ToolBarButton","versa/api/Folders","versa/api/Documents","versa/api/Zones","dojo/data/ItemFileWriteStore","dojo/date/locale"],function(_7bb){_7bb("versa.widget.document.mobile.DocumentPropertyView",[dijit._WidgetBase,dojox.mobile.ScrollableView],{document:null,reference:null,library:null,folders:null,references:null,documents:null,documentTypes:null,folderStore:null,refStore:null,docStore:null,docTypeStore:null,etedlMain:null,header:null,footer:null,constructor:function(args){},_setBackAttr:function(back){this.back=back;if(this.header){this.header.set("moveTo",back);}},postCreate:function(){this.inherited("postCreate",arguments);this.folders=this.library.getFolders();this.references=this.library.getReferences();this.documents=this.library.getDocuments();this.documentTypes=this.library.getDocumentTypes();this.folderStore=this.folders.store;this.refStore=this.references.store;this.docStore=this.documents.store;this.docTypeStore=this.documentTypes.store;this.header=new versa.widget.mobile.Heading({label:this.document.name,from:this,back:this.back,onCommand:this.onCommand});this.footer=new versa.widget.mobile.Footing({reference:this.reference,onCommand:this.onCommand,from:this});var _7bc=[];_7bc.push({label:"Type",rightText:this.document.document_type_name});_7bc.push({label:"Version",rightText:this.document.getFullVersion()});_7bc.push({label:"Size",rightText:versa.api.Utilities.readablizeBytes({bytes:this.document.binary_file_size})});_7bc.push({label:"Checked Out By",rightText:(this.document.getState(versa.api.Document.states.CHECKED_OUT)?this.document.checked_out_by:"")});_7bc.push({label:(this.document.isDeleted()?"Deletion Date":"Last Modified Date"),rightText:versa.api.Formatter.formatDateTime(this.document.updated_at).toString()});this.documentType=this.documentTypes.fetchById({id:this.document.document_type_id});dojo.forEach(this.documentType.property_mappings,function(_7bd){var idx=0;var _7be=this.library.getPropertyDefinitions().fetchById({id:_7bd.property_definition_id});if(!(_7be.is_system)){var _7bf=this.document[_7be.column_name];_7bf=versa.api.PropertyMapping.formatValue(_7be,_7bf);var _7c0={label:_7be.name,rightText:_7bf};if(_7be.isTypeText()){_7c0.rightText=_7c0.rightText.display_limit(10);_7c0.clickable=true;_7c0.property=_7be.column_name;_7c0.document=this.document;_7c0.onCommand=this.onCommand;_7c0.onClick=function(){this.select(true);setTimeout("var caller=dijit.byId('"+this.id+"');"+"caller.onCommand(versa.widget.zone.mobile.Show.COMMANDS.SHOW_TEXT, {document: caller.document, property: caller.property, label: caller.label});",3);};}_7bc.push(_7c0);}},this);var _7c1={items:_7bc};var _7c2=new dojo.data.ItemFileWriteStore({data:_7c1});this.etedlMain=new dojox.mobile.EdgeToEdgeDataList({store:_7c2});this.addChild(this.header);this.addChild(this.footer);this.addChild(this.etedlMain);},onBeforeTransitionIn:function(){this.findAppBars();this.resize();},onBeforeTransitionOut:function(){this.findAppBars();this.resize();},startup:function(){this.inherited("startup",arguments);this.etedlMain.startup();}});});},"versa/widget/zone/mobile/Logon":function(){define("versa/widget/zone/mobile/Logon",["dojo/_base/declare","dijit/_WidgetBase","versa/widget/zone/mobile/LogonView","dojox/mobile/View"],function(_7c3){return _7c3("versa.widget.zone.mobile.Logon",[dijit._WidgetBase],{constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},postCreate:function(){this.inherited("postCreate",arguments);this.loadingView=dijit.byId("loadingView");},startup:function(){this.inherited("startup",arguments);this.logonView=new versa.widget.zone.mobile.LogonView({id:"logonView",zone:this.zone,onError:this.onError,onLogon:this.onLogon,onReset:this.onReset,onResetError:this.onError},dojo.create("div",{style:{height:"100%",width:"100%"}},dojo.body()));this.logonView.startup();this.loadingView=new dojox.mobile.View({id:"loadingView"});dojox.mobile.hideAddressBar();this.logonView.findAppBars();this.logonView.resize();}});});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_7c4,_7c5,_7c6,_7c7,_7c8,lang,_7c9,_7ca,_7cb,_7cc,_7cd,_7ce){function _7cf(){};function _7d0(_7d1){return function(obj,_7d2,_7d3,_7d4){if(obj&&typeof _7d2=="string"&&obj[_7d2]==_7cf){return obj.on(_7d2.substring(2).toLowerCase(),lang.hitch(_7d3,_7d4));}return _7d1.apply(_7c6,arguments);};};_7c4.around(_7c6,"connect",_7d0);if(_7c8.connect){_7c4.around(_7c8,"connect",_7d0);}var _7d5=_7c7("dijit._Widget",[_7cc,_7cd,_7ce],{onClick:_7cf,onDblClick:_7cf,onKeyDown:_7cf,onKeyPress:_7cf,onKeyUp:_7cf,onMouseDown:_7cf,onMouseMove:_7cf,onMouseOut:_7cf,onMouseOver:_7cf,onMouseLeave:_7cf,onMouseEnter:_7cf,onMouseUp:_7cf,constructor:function(_7d6){this._toConnect={};for(var name in _7d6){if(this[name]===_7cf){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_7d6[name];delete _7d6[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_7cf){return _7c6.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,_7d7){_7c8.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_7d7);},attr:function(name,_7d8){if(_7c5.isDebug){var _7d9=arguments.callee._ach||(arguments.callee._ach={}),_7da=(arguments.callee.caller||"unknown caller").toString();if(!_7d9[_7da]){_7c8.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_7da,"","2.0");_7d9[_7da]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_7c8.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?_7c9("[widgetId]",this.containerNode).map(_7cb.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(!_7c8.isAsync){_7ca(0,function(){var _7db=["dijit/_base"];require(_7db);});}return _7d5;});},"dojo/touch":function(){define("dojo/touch",["./_base/kernel","./on","./has","./mouse"],function(dojo,on,has,_7dc){function _7dd(type){return function(node,_7de){return on(node,type,_7de);};};var _7df=has("touch");dojo.touch={press:_7dd(_7df?"touchstart":"mousedown"),move:_7dd(_7df?"touchmove":"mousemove"),release:_7dd(_7df?"touchend":"mouseup"),cancel:_7df?_7dd("touchcancel"):_7dc.leave};return dojo.touch;});},"versa/api/ViewDefinitions":function(){define("versa/api/ViewDefinitions",["dojo/_base/declare","versa/api/ViewDefinition","versa/api/_Collection","versa/api/CellDefinitions","versa/api/Error"],function(_7e0){var o=_7e0("versa.api.ViewDefinitions",[versa.api._Collection],{_system:null,documentTypes:null,_matchesQuery:function(item,_7e1){if(dojo.isArray(item)||(item.hasOwnProperty("column_order"))){return false;}var _7e2=_7e1.query;var _7e3=_7e1.queryOptions&&_7e1.queryOptions.ignoreCase;for(var i in _7e2){var _7e4=_7e2[i];var _7e5=this.getValue(item,i);if((typeof _7e4=="string"&&(_7e4.match(/[\*\.]/)||_7e3))?!dojo.data.util.filter.patternToRegExp(_7e4,_7e3).test(_7e5):_7e5!=_7e4){return false;}}return true;},copyFromTemplate:function(_7e6,user){var _7e7=_7e6.cell_definitions;var _7e8=this.create({cell_definitions:[],created_by:user.name,is_system:false,is_template:false,library_id:_7e6.library_id,name:_7e6.name,scope:_7e6.scope,sort_by:_7e6.sort_by,updated_by:user.name});dojo.forEach(_7e7,function(cell){_7e8.cell_definitions.push({column_name:cell.column_name,column_order:cell.column_order,date_format:cell.date_format,formatter:cell.formatter,label:cell.label,name:cell.name,noresize:cell.noresize,style:cell.style,table_name:cell.table_name,width:cell.width});},this);return _7e8;},_getDocumentAttr:function(_7e9,item){var _7ea="";var _7eb=this[0];var _7ec=this[1];if(!item){return _7ea;}var _7ed=_7ec.column_name;switch(_7ed){case "created_at":case "updated_at":_7ea=_7eb._formatDateTime(_7ec,item[_7ed]);break;default:if(/prp_dtt/.test(_7ed)&&item[_7ed]){_7ea=dojo.date.stamp.fromISOString(item[_7ed]);if(_7ea){_7ea=_7eb._formatDateTime(_7ec,_7ea);}}else{_7ea=item[_7ed];}break;}return _7ea;},_getDocumentTypeAttr:function(_7ee,item){var _7ef="";var _7f0=this[0];var _7f1=this[1];if(!item){return _7ef;}if(!item.document_type_id){return "";}var _7f2=_7f0.documentTypes.fetchById({id:item.document_type_id});switch(_7f1.column_name){case "name":_7ef=_7f2.name;break;}return _7ef;},_getVersionAttr:function(_7f3,item){var _7f4="";var _7f5=this[0];var _7f6=this[1];if(!item){return _7f4;}switch(_7f6.column_name){case "content_type":_7f4=(item.current_version)?item.current_version.content_type:"";break;case "version_number":_7f4=(item.current_version)?item.current_version.version_number:0;break;case "size":_7f4=(item.current_version)?item.current_version.size:0;break;}return _7f4;},constructor:function(args){this.zone=args.zone;this.library=args.library;this.target=dojo.replace(versa.api.ViewDefinitions.TRGT,[this.zone.subdomain,this.library.id]);this.schema=versa.api.ViewDefinition.schema;this.cache=true;this.cellDefinitions=args.cellDefinitions;this._initialize();},cloneItem:function(_7f7){var _7f8=this.create({name:_7f7.name,is_system:false,description:_7f7.description,is_template:false,scope:_7f7.scope,sort_by:_7f7.sort_by});dojo.forEach(_7f7.cell_definitions,function(_7f9,idx){_7f8.cell_definitions.push(versa.api.CellDefinition.clone(_7f9));});return _7f8;},getSystem:function(){if(!this._system){this._system=new Array();this.forEach(function(item){if(item.is_system){this._system.push(item);}},this);}return this._system;},isValidItem:function(args){var _7fa=this.inherited(arguments);var item=args.item;if(!_7fa){return;}if(item.name.length<1){throw new Error("View Definition 'Name' is empty or invalid");}if((!item.sort_by)||(item.sort_by.length<1)){throw new Error("View Definition must have a 'Sort By' value");}return true;}});o.TRGT="/zones/{0}/libraries/{1}/view_definitions";return o;});},"versa/api/PropertyDefinition":function(){define("versa/api/PropertyDefinition",["dojo/_base/declare","versa/api/_Object"],function(_7fb){var o=_7fb("versa.api.PropertyDefinition",[versa.api._Object],{constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));},getDbName:function(){return dojo.replace("{table_name}.{column_name}",this);},isTypeDate:function(){return this.data_type_id==versa.api.DataTypes.types.DATETIME;},isTypeText:function(){return this.data_type_id==versa.api.DataTypes.types.TEXT;},isTypeInteger:function(){return this.data_type_id==versa.api.DataTypes.types.INTEGER;},isTypeFloat:function(){return this.data_type_id==versa.api.DataTypes.types.FLOAT;},isTypeAnyNumber:function(){return this.data_type_id==versa.api.DataTypes.types.INTEGER||this.data_type_id==versa.api.DataTypes.types.FLOAT;},isTypeBoolean:function(){return this.data_type_id==versa.api.DataTypes.types.BOOLEAN;},isValid:function(){var _7fc=true;if(String.isEmpty(this.name.trim())){_7fc=false;}if(!this.data_type_id){_7fc=false;}return _7fc;}});versa.api.Cardinality={"Single":1,"Multiple":2};o.compare=function(_7fd,_7fe){if(!_7fd.name||!_7fe.name){return 0;}return (_7fd.name.toLowerCase()>_7fe.name.toLowerCase())?1:-1;};o.schema={type:"object",properties:{"id":{type:"integer"},"name":{type:"string","default":""},"cardinality":{type:"integer","default":versa.api.Cardinality.Single},"column_name":{type:"string"},"created_at":{type:"date",format:"date-time"},"created_by":{type:"string"},"data_type_id":{type:"integer"},"description":{type:"string","default":""},"is_readonly":{type:"boolean","default":false},"is_system":{type:"boolean","default":false},"max_length":{type:"max_length"},"table_name":{type:"string"},"updated_at":{type:"date",format:"date-time"},"updated_by":{type:"string"}},prototype:new o()};return o;});},"dojox/mobile/ContentPane":function(){define("dojox/mobile/ContentPane",["dojo/_base/kernel","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dijit/_Contained","dijit/_WidgetBase","dojo/_base/xhr","./ProgressIndicator"],function(dojo,_7ff,_800,lang,win,_801,_802,xhr,_803){return _800("dojox.mobile.ContentPane",[_802,_801],{href:"",content:"",parseOnLoad:true,prog:true,buildRendering:function(){this.inherited(arguments);this.domNode.className="mblContentPane";if(!this.containerNode){this.containerNode=this.domNode;}},startup:function(){if(this._started){return;}if(this.prog){this._p=_803.getInstance();}var _804=this.getParent&&this.getParent();if(!_804||!_804.resize){this.resize();}this.inherited(arguments);},resize:function(){_7ff.forEach(this.getChildren(),function(_805){if(_805.resize){_805.resize();}});},loadHandler:function(_806){this.set("content",_806);},errorHandler:function(err){if(this._p){this._p.stop();}},onLoad:function(){},_setHrefAttr:function(href){var p=this._p;if(p){win.body().appendChild(p.domNode);p.start();}this.href=href;xhr.get({url:href,handleAs:"text",load:lang.hitch(this,"loadHandler"),error:lang.hitch(this,"errorHandler")});},_setContentAttr:function(data){this.destroyDescendants();if(typeof data==="object"){this.domNode.appendChild(data);}else{this.domNode.innerHTML=data;}if(this.parseOnLoad){dojo.parser.parse(this.domNode);}if(this._p){this._p.stop();}this.onLoad();}});});},"versa/api/Folder":function(){define("versa/api/Folder",["dojo/_base/declare","versa/api/_Object","versa/api/_Securable","versa/api/Acl","versa/api/Search"],function(_807){var o=_807("versa.api.Folder",[versa.api._Object,versa.api._Securable],{_activeQuery:null,_searchFolder:null,_shareRootFolder:null,_trashFolder:null,constructor:function(args){dojo.safeMixin(this,((!args)?{}:args));this.securable_type=versa.api._Securable.types.Folder;},childNameExists:function(name,_808){return dojo.some(this.children,function(_809){if(_809.getId()==_808){return false;}return (_809.name.toLowerCase()==name.toLowerCase());},this);},getActiveQuery:function(){if(!this._activeQuery){this._activeQuery=new versa.api.Search({type:(this.isTrash()?versa.api.Search.types.TRASH:versa.api.Search.types.FOLDER),queryData:this.getId(),view_definition_id:this.view_definition_id});}return this._activeQuery;},getPermissionSet:function(_80a,user){var _80b=new versa.api.PermissionSet();_80b.setValue(versa.api.PermissionIndices.VIEW,true);_80b.setValue(versa.api.PermissionIndices.COPY,true);_80b.setValue(versa.api.PermissionIndices.EDIT,this.hasRights(versa.api._Securable.permissions.WRITE_METADATA)&&(!this.isSpecial()||this.isShare())&&(!this.isRoot()));_80b.setValue(versa.api.PermissionIndices.CREATE,this.hasRights(versa.api._Securable.permissions.CREATE_FOLDERS)&&(!(this.isTrash()||this.isSearch()||this.isShare())));_80b.setValue(versa.api.PermissionIndices.FILE,this.hasRights(versa.api._Securable.permissions.CREATE_DOCUMENTS)&&(!this.isSpecial()));_80b.setValue(versa.api.PermissionIndices.DELETE,this.hasRights(versa.api._Securable.permissions.DELETE_ITEMS)&&(!this.isRoot()));_80b.setValue(versa.api.PermissionIndices.SECURE,this.hasRights(versa.api._Securable.permissions.WRITE_ACL)&&(!this.isSpecial()||this.isShareRoot()||this.isShare()));return _80b;},getSearchFolder:function(){if(!this._searchFolder){dojo.every(this.children,function(item,idx){if(item.isSearch()){this._searchFolder=item;}return (!this._searchFolder);},this);}return this._searchFolder;},getShareRootFolder:function(){if(!this._shareRootFolder){dojo.every(this.children,function(item,idx){if(item.isShareRoot()){this._shareRootFolder=item;}return (!this._shareRootFolder);},this);}return this._shareRootFolder;},getTrashFolder:function(){if(!this._trashFolder){dojo.every(this.children,function(item,idx){if(item.isTrash()){this._trashFolder=item;}return (!this._trashFolder);},this);}return this._trashFolder;},isContent:function(){return (this.folder_type==versa.api.Folder.FolderTypes.CONTENT);},isError:function(){return (this.folder_type==versa.api.Folder.FolderTypes.ERROR);},isRoot:function(){return (this.folder_type==versa.api.Folder.FolderTypes.ROOT);},isSearch:function(){return (this.folder_type==versa.api.Folder.FolderTypes.SEARCH);},isShare:function(){return (this.folder_type==versa.api.Folder.FolderTypes.SHARE);},isShareRoot:function(){return (this.folder_type==versa.api.Folder.FolderTypes.SHARE_ROOT);},isSpecial:function(){return (this.folder_type==versa.api.Folder.FolderTypes.SEARCH||this.folder_type==versa.api.Folder.FolderTypes.TRASH||this.folder_type==versa.api.Folder.FolderTypes.SHARE||this.folder_type==versa.api.Folder.FolderTypes.SHARE_ROOT);},isTrash:function(){return (this.folder_type==versa.api.Folder.FolderTypes.TRASH);},setActiveQuery:function(_80c){this._activeQuery=_80c;this._activeQuery.view_definition_id=this.view_definition_id;},shareItems:function(args){var zone=args.zone;var _80d=args.library;var ids=[];dojo.forEach(args.references,function(_80e){ids.push(_80e.getId());},this);var url=dojo.replace(versa.api.Folder.SHAREITEMS_TRGT,[zone.subdomain,_80d.id,this.getId()]);var _80f={reference_ids:ids};var _810=versa.api.XhrHelper.doPutAction({target:url,putData:_80f});return true;}});o.SHAREITEMS_TRGT="/zones/{0}/libraries/{1}/folders/{2}/share_items.json";o.FolderTypes={"ROOT":0,"CONTENT":1,"SHARE_ROOT":16,"SHARE":17,"SEARCH":32,"TRASH":64,"ERROR":65535};o.getIconUrl=function(_811,size){var _812="content";switch(_811.folder_type){case versa.api.Folder.FolderTypes.TRASH:_812="recyclebin";break;case versa.api.Folder.FolderTypes.SEARCH:_812="search";break;case versa.api.Folder.FolderTypes.SHARE_ROOT:_812="share_root";break;}return dojo.replace("/images/mimetypes/{0}/{1}.png",[size,_812]);};o.getTypeLabel=function(_813){var _814="Content";switch(_813.folder_type){case versa.api.Folder.FolderTypes.TRASH:_814="Deleted Items";break;case versa.api.Folder.FolderTypes.SEARCH:_814="Search Results";break;case versa.api.Folder.FolderTypes.SHARE_ROOT:_814="Shared Folders";break;case versa.api.Folder.FolderTypes.SHARE:_814="Shared Files";break;}return _814;};o.sort=function(_815,_816){if((_815.folder_type!=versa.api.Folder.FolderTypes.CONTENT)||(_816.folder_type!=versa.api.Folder.FolderTypes.CONTENT)){if(_815.folder_type>_816.folder_type){return -1;}return 1;}if(_815.name==_816.name){return 0;}return (_815.name?_815.name:"").toLowerCase()<(_816.name?_816.name:"").toLowerCase()?-1:1;};o.permissionIndices={"CREATE":0,"VIEW":1,"FILE":2,"DELETE":3,"SECURE":4};o.schema={type:"object",properties:{"id":{type:"integer"},"folder_type":{type:"integer"},"name":{type:"string","default":""},"expiry":{type:["string","object","null"],format:"date-time"},"created_at":{type:"string",format:"date-time","default":dojo.date.stamp.toISOString(new Date(),{zulu:true})},"created_by":{type:"string","default":""},"updated_at":{type:"string",format:"date-time","default":dojo.date.stamp.toISOString(new Date(),{zulu:true})},"updated_by":{type:"string","default":""},"text_path":{type:"string","default":""},"document_count":{type:"integer","default":0}},prototype:new o()};return o;});},"versa/widget/search/mobile/SearchResultsView":function(){require(["dojo/_base/declare","dijit/_WidgetBase","dojox/mobile/Heading","dojox/mobile/ScrollableView","dojox/mobile/EdgeToEdgeDataList","dojox/mobile/ToolBarButton","versa/api/Folders","versa/api/Documents","versa/api/Zones","dojo/data/ItemFileWriteStore"],function(_817){_817("versa.widget.search.mobile.SearchResultsView",[dijit._WidgetBase,dojox.mobile.ScrollableView],{folder:null,library:null,folders:null,references:null,folderStore:null,refStore:null,etedlMain:null,header:null,footer:null,constructor:function(args){},_setSearchAttr:function(_818){if(this.search!=_818){this.search=_818;var _819=this.refStore.fetch({query:{type:2,query:_818,view:this.view_id}}).results;var _81a=[];dojo.forEach(_819,function(_81b){_81a.push({label:_81b.name,item:_81b,from:this,onCommand:this.onCommand,icon:versa.api.Document.getIconUrl(_81b.binary_content_type,32),clickable:true,onClick:function(){this.select(true);setTimeout("var caller=dijit.byId('"+this.id+"');"+"caller.onCommand(versa.widget.zone.mobile.Show.COMMANDS.SHOW_DOCUMENT_PROPERTIES, {from: caller.from, reference:caller.item});",3);}});},this);var _81c={items:_81a};var _81d=new dojo.data.ItemFileWriteStore({data:_81c});this.etedlMain.setStore(_81d);}},postCreate:function(){this.inherited("postCreate",arguments);this.folders=this.library.getFolders();this.references=this.library.getReferences();this.folderStore=this.folders.store;this.refStore=this.references.store;this.header=new versa.widget.mobile.Heading({label:"Search",from:this,moveTo:this.back,onCommand:this.onCommand});this.footer=new versa.widget.mobile.Footing({onCommand:this.onCommand,from:this});this.etedlMain=new dojox.mobile.EdgeToEdgeDataList({iconBase:"../../images/mimetypes/48/default.png"});this.addChild(this.header);this.addChild(this.footer);this.addChild(this.etedlMain);},onBeforeTransitionIn:function(){this.findAppBars();this.resize();},onBeforeTransitionOut:function(){this.findAppBars();this.resize();},startup:function(){this.inherited("startup",arguments);this.etedlMain.startup();}});});}}});require(["dojo/i18n"],function(i18n){i18n._preloadLocalizations("dojo/nls/versa_mobile",["en-us"]);});define("dojo/versa_mobile",[],1);