//>>built
require(["dojo/_base/declare","dijit/_WidgetBase","dojox/mobile/Heading","dojox/mobile/ScrollableView","dojox/mobile/EdgeToEdgeDataList","dojox/mobile/ToolBarButton","versa/api/Folders","versa/api/Documents","versa/api/Zones","dojo/data/ItemFileWriteStore","dojo/date/locale"],function(_1){_1("versa.widget.document.mobile.DocumentPropertyView",[dijit._WidgetBase,dojox.mobile.ScrollableView],{document:null,reference:null,library:null,folders:null,references:null,documents:null,documentTypes:null,folderStore:null,refStore:null,docStore:null,docTypeStore:null,etedlMain:null,header:null,footer:null,constructor:function(_2){},_setBackAttr:function(_3){this.back=_3;if(this.header){this.header.set("back",_3);}},postCreate:function(){this.inherited("postCreate",arguments);this.folders=this.library.getFolders();this.references=this.library.getReferences();this.documents=this.library.getDocuments();this.documentTypes=this.library.getDocumentTypes();this.folderStore=this.folders.store;this.refStore=this.references.store;this.docStore=this.documents.store;this.docTypeStore=this.documentTypes.store;this.header=new versa.widget.mobile.Heading({label:this.document.name,from:this,back:this.back,onCommand:this.onCommand});this.footer=new versa.widget.mobile.Footing({reference:this.reference,onCommand:this.onCommand,from:this});var _4=[];_4.push({label:"Type",rightText:this.document.document_type_name});_4.push({label:"Version",rightText:this.document.getFullVersion()});_4.push({label:"Size",rightText:versa.api.Utilities.readablizeBytes({bytes:this.document.binary_file_size})});_4.push({label:"Checked Out By",rightText:(this.document.getState(versa.api.Document.states.CHECKED_OUT)?this.document.checked_out_by:"")});_4.push({label:(this.document.isDeleted()?"Deletion Date":"Last Modified Date"),rightText:versa.api.Formatter.formatDateTime(this.document.updated_at).toString()});this.documentType=this.documentTypes.fetchById({id:this.document.document_type_id});dojo.forEach(this.documentType.property_mappings,function(_5){var _6=0;var _7=this.library.getPropertyDefinitions().fetchById({id:_5.property_definition_id});if(!(_7.is_system)){var _8=this.document[_7.column_name];_8=versa.api.PropertyMapping.formatValue(_7,_8);var _9={label:_7.name,rightText:_8};if(_7.isTypeText()){_9.rightText=_9.rightText.display_limit(10);_9.clickable=true;_9.property=_7.column_name;_9.document=this.document;_9.onCommand=this.onCommand;_9.onClick=function(){this.select(true);setTimeout("var caller=dijit.byId('"+this.id+"');"+"caller.onCommand(versa.widget.zone.mobile.Show.COMMANDS.SHOW_TEXT, {document: caller.document, property: caller.property, label: caller.label});",3);};}_4.push(_9);}},this);var _a={items:_4};var _b=new dojo.data.ItemFileWriteStore({data:_a});this.etedlMain=new dojox.mobile.EdgeToEdgeDataList({store:_b});this.addChild(this.header);this.addChild(this.footer);this.addChild(this.etedlMain);},onBeforeTransitionIn:function(){this.findAppBars();this.resize();},onBeforeTransitionOut:function(){this.findAppBars();this.resize();},startup:function(){this.inherited("startup",arguments);this.etedlMain.startup();}});});